"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("_pages-dir-browser_components_tracking_map_AircraftTrackingMap_tsx",{

/***/ "(pages-dir-browser)/./components/tracking/filters/FloatingGeofencePanel.tsx":
/*!***************************************************************!*\
  !*** ./components/tracking/filters/FloatingGeofencePanel.tsx ***!
  \***************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Search_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Search,X!=!lucide-react */ \"(pages-dir-browser)/__barrel_optimize__?names=Search,X!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-draggable */ \"(pages-dir-browser)/./node_modules/react-draggable/build/cjs/cjs.js\");\n/* harmony import */ var react_draggable__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_draggable__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_services_geofencing__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/services/geofencing */ \"(pages-dir-browser)/./lib/services/geofencing.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\nconst FloatingGeofencePanel = (param)=>{\n    let { isOpen, onClose, geofenceRadius, setGeofenceRadius, initialPosition, onSearch, isSearching, coordinates, setCoordinates, isGeofenceActive, isGeofencePlacementMode } = param;\n    _s();\n    const [position, setPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialPosition);\n    const nodeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [locationName, setLocationName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoadingLocation, setIsLoadingLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Fetch location name whenever coordinates change\n    // Add a reference to store the previous coordinates to avoid unnecessary API calls\n    const prevCoordinatesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Modify your location name effect to use the ref\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingGeofencePanel.useEffect\": ()=>{\n            var _prevCoordinatesRef_current, _prevCoordinatesRef_current1;\n            // Only proceed if we have coordinates\n            if (!coordinates) return;\n            // Check if these are the same coordinates as before\n            const isSameCoordinates = ((_prevCoordinatesRef_current = prevCoordinatesRef.current) === null || _prevCoordinatesRef_current === void 0 ? void 0 : _prevCoordinatesRef_current.lat) === coordinates.lat && ((_prevCoordinatesRef_current1 = prevCoordinatesRef.current) === null || _prevCoordinatesRef_current1 === void 0 ? void 0 : _prevCoordinatesRef_current1.lng) === coordinates.lng;\n            // If these are the same coordinates and we already have a location name or are loading,\n            // don't make another API call\n            if (isSameCoordinates && (locationName || isLoadingLocation)) {\n                return;\n            }\n            // Near the top of your component\n            console.log('onSearch prop:', onSearch);\n            console.log('onSearch is function?', typeof onSearch === 'function');\n            // Update the reference with current coordinates\n            prevCoordinatesRef.current = coordinates;\n            // Proceed with API call\n            setIsLoadingLocation(true);\n            (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(coordinates.lat, coordinates.lng).then({\n                \"FloatingGeofencePanel.useEffect\": (name)=>{\n                    setLocationName(name);\n                }\n            }[\"FloatingGeofencePanel.useEffect\"]).catch({\n                \"FloatingGeofencePanel.useEffect\": (error)=>{\n                    console.error('Error fetching location name:', error);\n                }\n            }[\"FloatingGeofencePanel.useEffect\"]).finally({\n                \"FloatingGeofencePanel.useEffect\": ()=>{\n                    setIsLoadingLocation(false);\n                }\n            }[\"FloatingGeofencePanel.useEffect\"]);\n        // Don't include locationName in dependencies to avoid loops\n        }\n    }[\"FloatingGeofencePanel.useEffect\"], [\n        coordinates\n    ]);\n    // Auto-search when coordinates change, with improved throttling and debouncing\n    // Use a reference for the last search coordinates\n    const lastSearchRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Auto-search when coordinates change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingGeofencePanel.useEffect\": ()=>{\n            var _lastSearchRef_current, _lastSearchRef_current1;\n            let searchTimeout = null;\n            // Only proceed if we have coordinates, aren't searching, and panel is open\n            if (!coordinates || isSearching || !isOpen) return;\n            // Check if we've already searched these coordinates\n            const isSameCoordinates = ((_lastSearchRef_current = lastSearchRef.current) === null || _lastSearchRef_current === void 0 ? void 0 : _lastSearchRef_current.lat) === coordinates.lat && ((_lastSearchRef_current1 = lastSearchRef.current) === null || _lastSearchRef_current1 === void 0 ? void 0 : _lastSearchRef_current1.lng) === coordinates.lng;\n            // Skip if we've already searched these exact coordinates\n            if (isSameCoordinates) return;\n            // Schedule a search\n            searchTimeout = setTimeout({\n                \"FloatingGeofencePanel.useEffect\": ()=>{\n                    // Double-check that conditions are still valid when timeout fires\n                    if (isOpen && coordinates && !isSearching) {\n                        // Update reference before search\n                        lastSearchRef.current = coordinates;\n                        onSearch(coordinates.lat, coordinates.lng);\n                    }\n                }\n            }[\"FloatingGeofencePanel.useEffect\"], 1500);\n            // Cleanup function\n            return ({\n                \"FloatingGeofencePanel.useEffect\": ()=>{\n                    if (searchTimeout) {\n                        clearTimeout(searchTimeout);\n                    }\n                }\n            })[\"FloatingGeofencePanel.useEffect\"];\n        }\n    }[\"FloatingGeofencePanel.useEffect\"], [\n        coordinates,\n        isSearching,\n        isOpen,\n        onSearch\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingGeofencePanel.useEffect\": ()=>{\n            // Only fetch location name if we have coordinates and not in special states\n            if (coordinates && !isGeofenceActive && !isGeofencePlacementMode) {\n                setIsLoading(true);\n                const fetchLocationName = {\n                    \"FloatingGeofencePanel.useEffect.fetchLocationName\": async ()=>{\n                        try {\n                            const name = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(coordinates.lat, coordinates.lng);\n                            setLocationName(name);\n                        } catch (error) {\n                            console.error('Error fetching location name:', error);\n                            setLocationName(null);\n                        } finally{\n                            setIsLoading(false);\n                        }\n                    }\n                }[\"FloatingGeofencePanel.useEffect.fetchLocationName\"];\n                fetchLocationName();\n            }\n        }\n    }[\"FloatingGeofencePanel.useEffect\"], [\n        coordinates,\n        isGeofenceActive,\n        isGeofencePlacementMode\n    ]);\n    // Helper function to extract just city and country\n    const formatCityCountry = (locationString)=>{\n        if (!locationString) return '';\n        // Split by commas\n        const parts = locationString.split(',').map((part)=>part.trim());\n        // If we have city, country (or more parts)\n        if (parts.length >= 2) {\n            // Try to find the country (usually the last part)\n            const country = parts[parts.length - 1];\n            // For city, use the first meaningful part\n            let city = parts[0];\n            // Skip redundant parts like province/city name duplication (Madrid, Madrid)\n            if (parts.length >= 3 && parts[0] === parts[1]) {\n                city = parts[0];\n            }\n            return \"\".concat(city, \", \").concat(country);\n        }\n        return locationString;\n    };\n    // Enable map click mode when panel is opened\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"FloatingGeofencePanel.useEffect\": ()=>{\n            if (isOpen) {\n                // Dispatch event to notify map that we're in geofence placement mode\n                const event = new CustomEvent('enable-geofence-placement', {\n                    detail: {\n                        active: true\n                    }\n                });\n                document.dispatchEvent(event);\n                // Set up listener for map click events\n                const handleMapClick = {\n                    \"FloatingGeofencePanel.useEffect.handleMapClick\": (e)=>{\n                        const { lat, lng } = e.detail;\n                        setCoordinates({\n                            lat,\n                            lng\n                        });\n                    }\n                }[\"FloatingGeofencePanel.useEffect.handleMapClick\"];\n                document.addEventListener('map-geofence-click', handleMapClick);\n                return ({\n                    \"FloatingGeofencePanel.useEffect\": ()=>{\n                        // Clean up\n                        document.removeEventListener('map-geofence-click', handleMapClick);\n                        // Turn off placement mode when component unmounts\n                        const event = new CustomEvent('enable-geofence-placement', {\n                            detail: {\n                                active: false\n                            }\n                        });\n                        document.dispatchEvent(event);\n                    }\n                })[\"FloatingGeofencePanel.useEffect\"];\n            }\n        }\n    }[\"FloatingGeofencePanel.useEffect\"], [\n        isOpen,\n        setCoordinates\n    ]);\n    // Handle search button click\n    const handleSearch = ()=>{\n        console.log('handleSearch function called');\n        console.log('coordinates:', coordinates);\n        console.log('isSearching:', isSearching);\n        if (!coordinates) {\n            console.log('No coordinates available');\n            return;\n        }\n        if (isSearching) {\n            console.log('Already searching, skipping');\n            return;\n        }\n        console.log('About to call onSearch with:', coordinates.lat, coordinates.lng);\n        try {\n            onSearch(coordinates.lat, coordinates.lng);\n            console.log('onSearch called successfully');\n        } catch (error) {\n            console.error('Error calling onSearch:', error);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((react_draggable__WEBPACK_IMPORTED_MODULE_2___default()), {\n        nodeRef: nodeRef,\n        handle: \".handle\",\n        defaultPosition: position,\n        onStop: (e, data)=>setPosition({\n                x: data.x,\n                y: data.y\n            }),\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            ref: nodeRef,\n            className: \"absolute z-50 bg-white rounded-lg shadow-lg border border-gray-200 w-80 geofence-floating-panel\",\n            style: {\n                position: 'absolute',\n                top: 0,\n                left: 0\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"handle px-4 py-3 bg-indigo-600 text-white rounded-t-lg flex items-center justify-between cursor-move\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"text-white hover:bg-indigo-700 rounded-full p-1\",\n                            title: \"Close\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Search_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.X, {\n                                size: 16\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                lineNumber: 272,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 267,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center justify-center flex-grow mx-auto\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"font-medium text-center\",\n                                children: \"Search Pin Placement\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                lineNumber: 275,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 274,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-4\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 279,\n                            columnNumber: 11\n                        }, undefined),\n                        \" \"\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                    lineNumber: 266,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"text-center text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Selected Location:\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                    lineNumber: 286,\n                                    columnNumber: 13\n                                }, undefined),\n                                coordinates && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"p-2 bg-gray-50 rounded border border-gray-200 text-center\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-gray-700 font-bold\",\n                                            children: isLoadingLocation ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                children: \"Loading location name...\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                                lineNumber: 293,\n                                                columnNumber: 21\n                                            }, undefined) : locationName ? formatCityCountry(locationName) : \"\".concat(coordinates.lat.toFixed(6), \", \").concat(coordinates.lng.toFixed(6))\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                            lineNumber: 291,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            className: \"text-xs text-gray-500 mt-1\",\n                                            children: [\n                                                coordinates.lat.toFixed(6),\n                                                \", \",\n                                                coordinates.lng.toFixed(6)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                            lineNumber: 300,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                    lineNumber: 290,\n                                    columnNumber: 15\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 285,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    className: \"text-sm font-medium text-gray-700 block mb-1\",\n                                    children: [\n                                        \"Radius: \",\n                                        geofenceRadius,\n                                        \" km\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                    lineNumber: 309,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"range\",\n                                    min: \"5\",\n                                    max: \"100\",\n                                    step: \"5\",\n                                    value: geofenceRadius,\n                                    onChange: (e)=>setGeofenceRadius(parseInt(e.target.value)),\n                                    className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                    lineNumber: 312,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex justify-between text-xs text-gray-500 mt-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"5 km\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                            lineNumber: 322,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"50 km\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                            lineNumber: 323,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            children: \"100 km\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                            lineNumber: 324,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                    lineNumber: 321,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 308,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-3 text-sm text-gray-600 text-center\",\n                            children: \"Click anywhere on the map to place a search pin\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 329,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            type: \"button\",\n                            onClick: handleSearch,\n                            disabled: !coordinates || isSearching,\n                            className: \"w-full py-2 px-4 flex items-center justify-center gap-2 rounded-md \".concat(!coordinates || isSearching ? 'bg-gray-300 text-gray-500 cursor-not-allowed' : 'bg-indigo-600 text-white hover:bg-indigo-700', \" transition-colors\"),\n                            children: isSearching ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"animate-spin h-5 w-5\",\n                                        viewBox: \"0 0 24 24\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                                className: \"opacity-25\",\n                                                cx: \"12\",\n                                                cy: \"12\",\n                                                r: \"10\",\n                                                stroke: \"currentColor\",\n                                                strokeWidth: \"4\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                                lineNumber: 348,\n                                                columnNumber: 19\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                className: \"opacity-75\",\n                                                fill: \"currentColor\",\n                                                d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                                lineNumber: 356,\n                                                columnNumber: 19\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                        lineNumber: 347,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Searching...\"\n                                ]\n                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Search_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__.Search, {\n                                        size: 16\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                                        lineNumber: 366,\n                                        columnNumber: 17\n                                    }, undefined),\n                                    \"Search Aircraft\"\n                                ]\n                            }, void 0, true)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                            lineNumber: 335,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n                    lineNumber: 283,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n            lineNumber: 256,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\FloatingGeofencePanel.tsx\",\n        lineNumber: 250,\n        columnNumber: 5\n    }, undefined);\n};\n_s(FloatingGeofencePanel, \"j6mf0KOa+tc0x0TlzbyTxs0nswI=\");\n_c = FloatingGeofencePanel;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (FloatingGeofencePanel);\nvar _c;\n$RefreshReg$(_c, \"FloatingGeofencePanel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvdHJhY2tpbmcvZmlsdGVycy9GbG9hdGluZ0dlb2ZlbmNlUGFuZWwudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTJEO0FBQ1Y7QUFDVDtBQUNzQztBQTBCOUUsTUFBTVEsd0JBQThEO1FBQUMsRUFDbkVDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxjQUFjLEVBQ2RDLGlCQUFpQixFQUNqQkMsZUFBZSxFQUNmQyxRQUFRLEVBQ1JDLFdBQVcsRUFDWEMsV0FBVyxFQUNYQyxjQUFjLEVBQ2RDLGdCQUFnQixFQUNoQkMsdUJBQXVCLEVBQ3hCOztJQUNDLE1BQU0sQ0FBQ0MsVUFBVUMsWUFBWSxHQUFHcEIsK0NBQVFBLENBQUNZO0lBQ3pDLE1BQU1TLFVBQVVuQiw2Q0FBTUEsQ0FBQztJQUN2QixNQUFNLENBQUNvQixjQUFjQyxnQkFBZ0IsR0FBR3ZCLCtDQUFRQSxDQUFnQjtJQUNoRSxNQUFNLENBQUN3QixtQkFBbUJDLHFCQUFxQixHQUFHekIsK0NBQVFBLENBQUM7SUFDM0QsTUFBTSxDQUFDMEIsV0FBV0MsYUFBYSxHQUFHM0IsK0NBQVFBLENBQVU7SUFFcEQsa0RBQWtEO0lBRWxELG1GQUFtRjtJQUNuRixNQUFNNEIscUJBQXFCMUIsNkNBQU1BLENBQXNDO0lBRXZFLGtEQUFrRDtJQUNsREQsZ0RBQVNBOzJDQUFDO2dCQU1OMkIsNkJBQ0FBO1lBTkYsc0NBQXNDO1lBQ3RDLElBQUksQ0FBQ2IsYUFBYTtZQUVsQixvREFBb0Q7WUFDcEQsTUFBTWMsb0JBQ0pELEVBQUFBLDhCQUFBQSxtQkFBbUJFLE9BQU8sY0FBMUJGLGtEQUFBQSw0QkFBNEJHLEdBQUcsTUFBS2hCLFlBQVlnQixHQUFHLElBQ25ESCxFQUFBQSwrQkFBQUEsbUJBQW1CRSxPQUFPLGNBQTFCRixtREFBQUEsNkJBQTRCSSxHQUFHLE1BQUtqQixZQUFZaUIsR0FBRztZQUVyRCx3RkFBd0Y7WUFDeEYsOEJBQThCO1lBQzlCLElBQUlI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Z0RBQ0ZDLFFBQU87Z0RBQ1BDLGFBQVk7Ozs7OzswREFFZCw4REFBQ0M7Z0RBQ0M3QixXQUFVO2dEQUNWOEIsTUFBSztnREFDTEMsR0FBRTs7Ozs7Ozs7Ozs7O29DQUVBOzs2REFJUjs7a0RBQ0UsOERBQUNyRyxnRkFBTUE7d0NBQUM2RSxNQUFNOzs7Ozs7b0NBQU07Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFTcEM7R0F6Vk0xRTtLQUFBQTtBQTJWTixpRUFBZUEscUJBQXFCQSxFQUFDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXHNhdGhvXFxEb2N1bWVudHNcXFByb2plY3RzXFxhaXJjcmFmdC10cmFja2luZ1xcY29tcG9uZW50c1xcdHJhY2tpbmdcXGZpbHRlcnNcXEZsb2F0aW5nR2VvZmVuY2VQYW5lbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgWCwgU2VhcmNoLCBNYXBQaW4gfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgRHJhZ2dhYmxlIGZyb20gJ3JlYWN0LWRyYWdnYWJsZSc7XHJcbmltcG9ydCBnZXRMb2NhdGlvbk5hbWVGcm9tQ29vcmRpbmF0ZXMgZnJvbSAnLi4vLi4vLi4vbGliL3NlcnZpY2VzL2dlb2ZlbmNpbmcnO1xyXG5cclxuaW50ZXJmYWNlIENvb3JkaW5hdGVzIHtcclxuICBsYXQ6IG51bWJlcjtcclxuICBsbmc6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIEZvcm1hdENpdHlDb3VudHJ5UmVzdWx0IHtcclxuICBjaXR5OiBzdHJpbmc7XHJcbiAgY291bnRyeTogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRmxvYXRpbmdHZW9mZW5jZVBhbmVsUHJvcHMge1xyXG4gIGlzT3BlbjogYm9vbGVhbjtcclxuICBvbkNsb3NlOiAoKSA9PiB2b2lkO1xyXG4gIGdlb2ZlbmNlUmFkaXVzOiBudW1iZXI7XHJcbiAgc2V0R2VvZmVuY2VSYWRpdXM6IChyYWRpdXM6IG51bWJlcikgPT4gdm9pZDtcclxuICBpbml0aWFsUG9zaXRpb24/OiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH07XHJcbiAgb25TZWFyY2g6IChsYXQ6IG51bWJlciwgbG5nOiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgaXNTZWFyY2hpbmc6IGJvb2xlYW47XHJcbiAgY29vcmRpbmF0ZXM6IENvb3JkaW5hdGVzIHwgbnVsbDtcclxuICBzZXRDb29yZGluYXRlczogKGNvb3JkczogQ29vcmRpbmF0ZXMgfCBudWxsKSA9PiB2b2lkO1xyXG4gIGlzR2VvZmVuY2VBY3RpdmU6IGJvb2xlYW47XHJcbiAgaXNHZW9mZW5jZVBsYWNlbWVudE1vZGU6IGJvb2xlYW47XHJcbn1cclxuXHJcbmNvbnN0IEZsb2F0aW5nR2VvZmVuY2VQYW5lbDogUmVhY3QuRkM8RmxvYXRpbmdHZW9mZW5jZVBhbmVsUHJvcHM+ID0gKHtcclxuICBpc09wZW4sXHJcbiAgb25DbG9zZSxcclxuICBnZW9mZW5jZVJhZGl1cyxcclxuICBzZXRHZW9mZW5jZVJhZGl1cyxcclxuICBpbml0aWFsUG9zaXRpb24sXHJcbiAgb25TZWFyY2gsXHJcbiAgaXNTZWFyY2hpbmcsXHJcbiAgY29vcmRpbmF0ZXMsXHJcbiAgc2V0Q29vcmRpbmF0ZXMsXHJcbiAgaXNHZW9mZW5jZUFjdGl2ZSxcclxuICBpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZSxcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtwb3NpdGlvbiwgc2V0UG9zaXRpb25dID0gdXNlU3RhdGUoaW5pdGlhbFBvc2l0aW9uKTtcclxuICBjb25zdCBub2RlUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IFtsb2NhdGlvbk5hbWUsIHNldExvY2F0aW9uTmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbaXNMb2FkaW5nTG9jYXRpb24sIHNldElzTG9hZGluZ0xvY2F0aW9uXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xyXG5cclxuICAvLyBGZXRjaCBsb2NhdGlvbiBuYW1lIHdoZW5ldmVyIGNvb3JkaW5hdGVzIGNoYW5nZVxyXG5cclxuICAvLyBBZGQgYSByZWZlcmVuY2UgdG8gc3RvcmUgdGhlIHByZXZpb3VzIGNvb3JkaW5hdGVzIHRvIGF2b2lkIHVubmVjZXNzYXJ5IEFQSSBjYWxsc1xyXG4gIGNvbnN0IHByZXZDb29yZGluYXRlc1JlZiA9IHVzZVJlZjx7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlciB9IHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIC8vIE1vZGlmeSB5b3VyIGxvY2F0aW9uIG5hbWUgZWZmZWN0IHRvIHVzZSB0aGUgcmVmXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIC8vIE9ubHkgcHJvY2VlZCBpZiB3ZSBoYXZlIGNvb3JkaW5hdGVzXHJcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSByZXR1cm47XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlc2UgYXJlIHRoZSBzYW1lIGNvb3JkaW5hdGVzIGFzIGJlZm9yZVxyXG4gICAgY29uc3QgaXNTYW1lQ29vcmRpbmF0ZXMgPVxyXG4gICAgICBwcmV2Q29vcmRpbmF0ZXNSZWYuY3VycmVudD8ubGF0ID09PSBjb29yZGluYXRlcy5sYXQgJiZcclxuICAgICAgcHJldkNvb3JkaW5hdGVzUmVmLmN1cnJlbnQ/LmxuZyA9PT0gY29vcmRpbmF0ZXMubG5nO1xyXG5cclxuICAgIC8vIElmIHRoZXNlIGFyZSB0aGUgc2FtZSBjb29yZGluYXRlcyBhbmQgd2UgYWxyZWFkeSBoYXZlIGEgbG9jYXRpb24gbmFtZSBvciBhcmUgbG9hZGluZyxcclxuICAgIC8vIGRvbid0IG1ha2UgYW5vdGhlciBBUEkgY2FsbFxyXG4gICAgaWYgKGlzU2FtZUNvb3JkaW5hdGVzICYmIChsb2NhdGlvbk5hbWUgfHwgaXNMb2FkaW5nTG9jYXRpb24pKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBOZWFyIHRoZSB0b3Agb2YgeW91ciBjb21wb25lbnRcclxuICAgIGNvbnNvbGUubG9nKCdvblNlYXJjaCBwcm9wOicsIG9uU2VhcmNoKTtcclxuICAgIGNvbnNvbGUubG9nKCdvblNlYXJjaCBpcyBmdW5jdGlvbj8nLCB0eXBlb2Ygb25TZWFyY2ggPT09ICdmdW5jdGlvbicpO1xyXG5cclxuICAgIC8vIFVwZGF0ZSB0aGUgcmVmZXJlbmNlIHdpdGggY3VycmVudCBjb29yZGluYXRlc1xyXG4gICAgcHJldkNvb3JkaW5hdGVzUmVmLmN1cnJlbnQgPSBjb29yZGluYXRlcztcclxuXHJcbiAgICAvLyBQcm9jZWVkIHdpdGggQVBJIGNhbGxcclxuICAgIHNldElzTG9hZGluZ0xvY2F0aW9uKHRydWUpO1xyXG5cclxuICAgIGdldExvY2F0aW9uTmFtZUZyb21Db29yZGluYXRlcyhjb29yZGluYXRlcy5sYXQsIGNvb3JkaW5hdGVzLmxuZylcclxuICAgICAgLnRoZW4oKG5hbWUpID0+IHtcclxuICAgICAgICBzZXRMb2NhdGlvbk5hbWUobmFtZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBsb2NhdGlvbiBuYW1lOicsIGVycm9yKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHNldElzTG9hZGluZ0xvY2F0aW9uKGZhbHNlKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8gRG9uJ3QgaW5jbHVkZSBsb2NhdGlvbk5hbWUgaW4gZGVwZW5kZW5jaWVzIHRvIGF2b2lkIGxvb3BzXHJcbiAgfSwgW2Nvb3JkaW5hdGVzXSk7XHJcblxyXG4gIC8vIEF1dG8tc2VhcmNoIHdoZW4gY29vcmRpbmF0ZXMgY2hhbmdlLCB3aXRoIGltcHJvdmVkIHRocm90dGxpbmcgYW5kIGRlYm91bmNpbmdcclxuXHJcbiAgLy8gVXNlIGEgcmVmZXJlbmNlIGZvciB0aGUgbGFzdCBzZWFyY2ggY29vcmRpbmF0ZXNcclxuICBjb25zdCBsYXN0U2VhcmNoUmVmID0gdXNlUmVmPHsgbGF0OiBudW1iZXI7IGxuZzogbnVtYmVyIH0gfCBudWxsPihudWxsKTtcclxuXHJcbiAgLy8gQXV0by1zZWFyY2ggd2hlbiBjb29yZGluYXRlcyBjaGFuZ2VcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IHNlYXJjaFRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgLy8gT25seSBwcm9jZWVkIGlmIHdlIGhhdmUgY29vcmRpbmF0ZXMsIGFyZW4ndCBzZWFyY2hpbmcsIGFuZCBwYW5lbCBpcyBvcGVuXHJcbiAgICBpZiAoIWNvb3JkaW5hdGVzIHx8IGlzU2VhcmNoaW5nIHx8ICFpc09wZW4pIHJldHVybjtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB3ZSd2ZSBhbHJlYWR5IHNlYXJjaGVkIHRoZXNlIGNvb3JkaW5hdGVzXHJcbiAgICBjb25zdCBpc1NhbWVDb29yZGluYXRlcyA9XHJcbiAgICAgIGxhc3RTZWFyY2hSZWYuY3VycmVudD8ubGF0ID09PSBjb29yZGluYXRlcy5sYXQgJiZcclxuICAgICAgbGFzdFNlYXJjaFJlZi5jdXJyZW50Py5sbmcgPT09IGNvb3JkaW5hdGVzLmxuZztcclxuXHJcbiAgICAvLyBTa2lwIGlmIHdlJ3ZlIGFscmVhZHkgc2VhcmNoZWQgdGhlc2UgZXhhY3QgY29vcmRpbmF0ZXNcclxuICAgIGlmIChpc1NhbWVDb29yZGluYXRlcykgcmV0dXJuO1xyXG5cclxuICAgIC8vIFNjaGVkdWxlIGEgc2VhcmNoXHJcbiAgICBzZWFyY2hUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIC8vIERvdWJsZS1jaGVjayB0aGF0IGNvbmRpdGlvbnMgYXJlIHN0aWxsIHZhbGlkIHdoZW4gdGltZW91dCBmaXJlc1xyXG4gICAgICBpZiAoaXNPcGVuICYmIGNvb3JkaW5hdGVzICYmICFpc1NlYXJjaGluZykge1xyXG4gICAgICAgIC8vIFVwZGF0ZSByZWZlcmVuY2UgYmVmb3JlIHNlYXJjaFxyXG4gICAgICAgIGxhc3RTZWFyY2hSZWYuY3VycmVudCA9IGNvb3JkaW5hdGVzO1xyXG4gICAgICAgIG9uU2VhcmNoKGNvb3JkaW5hdGVzLmxhdCwgY29vcmRpbmF0ZXMubG5nKTtcclxuICAgICAgfVxyXG4gICAgfSwgMTUwMCk7XHJcblxyXG4gICAgLy8gQ2xlYW51cCBmdW5jdGlvblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgaWYgKHNlYXJjaFRpbWVvdXQpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQoc2VhcmNoVGltZW91dCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW2Nvb3JkaW5hdGVzLCBpc1NlYXJjaGluZywgaXNPcGVuLCBvblNlYXJjaF0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gT25seSBmZXRjaCBsb2NhdGlvbiBuYW1lIGlmIHdlIGhhdmUgY29vcmRpbmF0ZXMgYW5kIG5vdCBpbiBzcGVjaWFsIHN0YXRlc1xyXG4gICAgaWYgKGNvb3JkaW5hdGVzICYmICFpc0dlb2ZlbmNlQWN0aXZlICYmICFpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZSkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgICBjb25zdCBmZXRjaExvY2F0aW9uTmFtZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgbmFtZSA9IGF3YWl0IGdldExvY2F0aW9uTmFtZUZyb21Db29yZGluYXRlcyhcclxuICAgICAgICAgICAgY29vcmRpbmF0ZXMubGF0LFxyXG4gICAgICAgICAgICBjb29yZGluYXRlcy5sbmdcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBzZXRMb2NhdGlvbk5hbWUobmFtZSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxvY2F0aW9uIG5hbWU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgc2V0TG9jYXRpb25OYW1lKG51bGwpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGZldGNoTG9jYXRpb25OYW1lKCk7XHJcbiAgICB9XHJcbiAgfSwgW2Nvb3JkaW5hdGVzLCBpc0dlb2ZlbmNlQWN0aXZlLCBpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZV0pO1xyXG5cclxuICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZXh0cmFjdCBqdXN0IGNpdHkgYW5kIGNvdW50cnlcclxuXHJcbiAgY29uc3QgZm9ybWF0Q2l0eUNvdW50cnkgPSAobG9jYXRpb25TdHJpbmc6IHN0cmluZyB8IG51bGwpOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKCFsb2NhdGlvblN0cmluZykgcmV0dXJuICcnO1xyXG5cclxuICAgIC8vIFNwbGl0IGJ5IGNvbW1hc1xyXG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gbG9jYXRpb25TdHJpbmdcclxuICAgICAgLnNwbGl0KCcsJylcclxuICAgICAgLm1hcCgocGFydCkgPT4gcGFydC50cmltKCkpO1xyXG5cclxuICAgIC8vIElmIHdlIGhhdmUgY2l0eSwgY291bnRyeSAob3IgbW9yZSBwYXJ0cylcclxuICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xyXG4gICAgICAvLyBUcnkgdG8gZmluZCB0aGUgY291bnRyeSAodXN1YWxseSB0aGUgbGFzdCBwYXJ0KVxyXG4gICAgICBjb25zdCBjb3VudHJ5OiBzdHJpbmcgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgIC8vIEZvciBjaXR5LCB1c2UgdGhlIGZpcnN0IG1lYW5pbmdmdWwgcGFydFxyXG4gICAgICBsZXQgY2l0eTogc3RyaW5nID0gcGFydHNbMF07XHJcblxyXG4gICAgICAvLyBTa2lwIHJlZHVuZGFudCBwYXJ0cyBsaWtlIHByb3ZpbmNlL2NpdHkgbmFtZSBkdXBsaWNhdGlvbiAoTWFkcmlkLCBNYWRyaWQpXHJcbiAgICAgIGlmIChwYXJ0cy5sZW5ndGggPj0gMyAmJiBwYXJ0c1swXSA9PT0gcGFydHNbMV0pIHtcclxuICAgICAgICBjaXR5ID0gcGFydHNbMF07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBgJHtjaXR5fSwgJHtjb3VudHJ5fWA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGxvY2F0aW9uU3RyaW5nO1xyXG4gIH07XHJcblxyXG4gIC8vIEVuYWJsZSBtYXAgY2xpY2sgbW9kZSB3aGVuIHBhbmVsIGlzIG9wZW5lZFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoaXNPcGVuKSB7XHJcbiAgICAgIC8vIERpc3BhdGNoIGV2ZW50IHRvIG5vdGlmeSBtYXAgdGhhdCB3ZSdyZSBpbiBnZW9mZW5jZSBwbGFjZW1lbnQgbW9kZVxyXG4gICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnZW5hYmxlLWdlb2ZlbmNlLXBsYWNlbWVudCcsIHtcclxuICAgICAgICBkZXRhaWw6IHsgYWN0aXZlOiB0cnVlIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuXHJcbiAgICAgIC8vIFNldCB1cCBsaXN0ZW5lciBmb3IgbWFwIGNsaWNrIGV2ZW50c1xyXG4gICAgICBjb25zdCBoYW5kbGVNYXBDbGljayA9IChlOiBDdXN0b21FdmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbGF0LCBsbmcgfSA9IGUuZGV0YWlsO1xyXG4gICAgICAgIHNldENvb3JkaW5hdGVzKHsgbGF0LCBsbmcgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICdtYXAtZ2VvZmVuY2UtY2xpY2snLFxyXG4gICAgICAgIGhhbmRsZU1hcENsaWNrIGFzIEV2ZW50TGlzdGVuZXJcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgLy8gQ2xlYW4gdXBcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgJ21hcC1nZW9mZW5jZS1jbGljaycsXHJcbiAgICAgICAgICBoYW5kbGVNYXBDbGljayBhcyBFdmVudExpc3RlbmVyXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBUdXJuIG9mZiBwbGFjZW1lbnQgbW9kZSB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdlbmFibGUtZ2VvZmVuY2UtcGxhY2VtZW50Jywge1xyXG4gICAgICAgICAgZGV0YWlsOiB7IGFjdGl2ZTogZmFsc2UgfSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9LCBbaXNPcGVuLCBzZXRDb29yZGluYXRlc10pO1xyXG5cclxuICAvLyBIYW5kbGUgc2VhcmNoIGJ1dHRvbiBjbGlja1xyXG4gIGNvbnN0IGhhbmRsZVNlYXJjaCA9ICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdoYW5kbGVTZWFyY2ggZnVuY3Rpb24gY2FsbGVkJyk7XHJcbiAgICBjb25zb2xlLmxvZygnY29vcmRpbmF0ZXM6JywgY29vcmRpbmF0ZXMpO1xyXG4gICAgY29uc29sZS5sb2coJ2lzU2VhcmNoaW5nOicsIGlzU2VhcmNoaW5nKTtcclxuXHJcbiAgICBpZiAoIWNvb3JkaW5hdGVzKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdObyBjb29yZGluYXRlcyBhdmFpbGFibGUnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc1NlYXJjaGluZykge1xyXG4gICAgICBjb25zb2xlLmxvZygnQWxyZWFkeSBzZWFyY2hpbmcsIHNraXBwaW5nJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgJ0Fib3V0IHRvIGNhbGwgb25TZWFyY2ggd2l0aDonLFxyXG4gICAgICBjb29yZGluYXRlcy5sYXQsXHJcbiAgICAgIGNvb3JkaW5hdGVzLmxuZ1xyXG4gICAgKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIG9uU2VhcmNoKGNvb3JkaW5hdGVzLmxhdCwgY29vcmRpbmF0ZXMubG5nKTtcclxuICAgICAgY29uc29sZS5sb2coJ29uU2VhcmNoIGNhbGxlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgb25TZWFyY2g6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8RHJhZ2dhYmxlXHJcbiAgICAgIG5vZGVSZWY9e25vZGVSZWZ9XHJcbiAgICAgIGhhbmRsZT1cIi5oYW5kbGVcIlxyXG4gICAgICBkZWZhdWx0UG9zaXRpb249e3Bvc2l0aW9ufVxyXG4gICAgICBvblN0b3A9eyhlLCBkYXRhKSA9PiBzZXRQb3NpdGlvbih7IHg6IGRhdGEueCwgeTogZGF0YS55IH0pfVxyXG4gICAgPlxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgcmVmPXtub2RlUmVmfVxyXG4gICAgICAgIGNsYXNzTmFtZT1cImFic29sdXRlIHotNTAgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCB3LTgwIGdlb2ZlbmNlLWZsb2F0aW5nLXBhbmVsXCJcclxuICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICB0b3A6IDAsXHJcbiAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgIH19XHJcbiAgICAgID5cclxuICAgICAgICB7LyogSGVhZGVyL0hhbmRsZSBmb3IgZHJhZ2dpbmcgLSB3aXRoIGNlbnRlcmVkIHRpdGxlICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGFuZGxlIHB4LTQgcHktMyBiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcm91bmRlZC10LWxnIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBjdXJzb3ItbW92ZVwiPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlIGhvdmVyOmJnLWluZGlnby03MDAgcm91bmRlZC1mdWxsIHAtMVwiXHJcbiAgICAgICAgICAgIHRpdGxlPVwiQ2xvc2VcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICA8WCBzaXplPXsxNn0gLz5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBmbGV4LWdyb3cgbXgtYXV0b1wiPlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICAgIFNlYXJjaCBQaW4gUGxhY2VtZW50XHJcbiAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LTRcIj48L2Rpdj4gey8qIEVtcHR5IGRpdiBmb3IgYmFsYW5jaW5nIHRoZSBsYXlvdXQgKi99XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHsvKiBCb2R5ICovfVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicC00XCI+XHJcbiAgICAgICAgICB7LyogTG9jYXRpb24gZGlzcGxheSBhdCB0aGUgdG9wICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi00XCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXIgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cclxuICAgICAgICAgICAgICBTZWxlY3RlZCBMb2NhdGlvbjpcclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIHtjb29yZGluYXRlcyAmJiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTIgYmctZ3JheS01MCByb3VuZGVkIGJvcmRlciBib3JkZXItZ3JheS0yMDAgdGV4dC1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTcwMCBmb250LWJvbGRcIj5cclxuICAgICAgICAgICAgICAgICAge2lzTG9hZGluZ0xvY2F0aW9uID8gKFxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPkxvYWRpbmcgbG9jYXRpb24gbmFtZS4uLjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgKSA6IGxvY2F0aW9uTmFtZSA/IChcclxuICAgICAgICAgICAgICAgICAgICBmb3JtYXRDaXR5Q291bnRyeShsb2NhdGlvbk5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgYCR7Y29vcmRpbmF0ZXMubGF0LnRvRml4ZWQoNil9LCAke2Nvb3JkaW5hdGVzLmxuZy50b0ZpeGVkKDYpfWBcclxuICAgICAgICAgICAgICAgICAgKX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxyXG4gICAgICAgICAgICAgICAgICB7Y29vcmRpbmF0ZXMubGF0LnRvRml4ZWQoNil9LCB7Y29vcmRpbmF0ZXMubG5nLnRvRml4ZWQoNil9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIHsvKiBSYWRpdXMgc2xpZGVyICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDAgYmxvY2sgbWItMVwiPlxyXG4gICAgICAgICAgICAgIFJhZGl1czoge2dlb2ZlbmNlUmFkaXVzfSBrbVxyXG4gICAgICAgICAgICA8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICB0eXBlPVwicmFuZ2VcIlxyXG4gICAgICAgICAgICAgIG1pbj1cIjVcIlxyXG4gICAgICAgICAgICAgIG1heD1cIjEwMFwiXHJcbiAgICAgICAgICAgICAgc3RlcD1cIjVcIlxyXG4gICAgICAgICAgICAgIHZhbHVlPXtnZW9mZW5jZVJhZGl1c31cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEdlb2ZlbmNlUmFkaXVzKHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlKSl9XHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtMiBiZy1ncmF5LTIwMCByb3VuZGVkLWxnIGFwcGVhcmFuY2Utbm9uZSBjdXJzb3ItcG9pbnRlclwiXHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gdGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTFcIj5cclxuICAgICAgICAgICAgICA8c3Bhbj41IGttPC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuPjUwIGttPC9zcGFuPlxyXG4gICAgICAgICAgICAgIDxzcGFuPjEwMCBrbTwvc3Bhbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICB7LyogSW5zdHJ1Y3Rpb25zIG1vdmVkIGRvd24gbmVhciB0aGUgYnV0dG9uICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi0zIHRleHQtc20gdGV4dC1ncmF5LTYwMCB0ZXh0LWNlbnRlclwiPlxyXG4gICAgICAgICAgICBDbGljayBhbnl3aGVyZSBvbiB0aGUgbWFwIHRvIHBsYWNlIGEgc2VhcmNoIHBpblxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgey8qIFNlYXJjaCBidXR0b24gKi99XHJcbiAgICAgICAgICB7LyogU2VhcmNoIGJ1dHRvbiAqL31cclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVNlYXJjaH0gLy8gVXNlIHlvdXIgZXhpc3RpbmcgaGFuZGxlU2VhcmNoIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIGRpc2FibGVkPXshY29vcmRpbmF0ZXMgfHwgaXNTZWFyY2hpbmd9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCBweS0yIHB4LTQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTIgcm91bmRlZC1tZCAke1xyXG4gICAgICAgICAgICAgICFjb29yZGluYXRlcyB8fCBpc1NlYXJjaGluZ1xyXG4gICAgICAgICAgICAgICAgPyAnYmctZ3JheS0zMDAgdGV4dC1ncmF5LTUwMCBjdXJzb3Itbm90LWFsbG93ZWQnXHJcbiAgICAgICAgICAgICAgICA6ICdiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgaG92ZXI6YmctaW5kaWdvLTcwMCdcclxuICAgICAgICAgICAgfSB0cmFuc2l0aW9uLWNvbG9yc2B9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtpc1NlYXJjaGluZyA/IChcclxuICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gaC01IHctNVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgPGNpcmNsZVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm9wYWNpdHktMjVcIlxyXG4gICAgICAgICAgICAgICAgICAgIGN4PVwiMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgIGN5PVwiMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgIHI9XCIxMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjRcIlxyXG4gICAgICAgICAgICAgICAgICA+PC9jaXJjbGU+XHJcbiAgICAgICAgICAgICAgICAgIDxwYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3BhY2l0eS03NVwiXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cImN1cnJlbnRDb2xvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiXHJcbiAgICAgICAgICAgICAgICAgID48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICAgICAgICAgIFNlYXJjaGluZy4uLlxyXG4gICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICA8U2VhcmNoIHNpemU9ezE2fSAvPlxyXG4gICAgICAgICAgICAgICAgU2VhcmNoIEFpcmNyYWZ0XHJcbiAgICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICAgICl9XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L0RyYWdnYWJsZT5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmxvYXRpbmdHZW9mZW5jZVBhbmVsO1xyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIlgiLCJTZWFyY2giLCJEcmFnZ2FibGUiLCJnZXRMb2NhdGlvbk5hbWVGcm9tQ29vcmRpbmF0ZXMiLCJGbG9hdGluZ0dlb2ZlbmNlUGFuZWwiLCJpc09wZW4iLCJvbkNsb3NlIiwiZ2VvZmVuY2VSYWRpdXMiLCJzZXRHZW9mZW5jZVJhZGl1cyIsImluaXRpYWxQb3NpdGlvbiIsIm9uU2VhcmNoIiwiaXNTZWFyY2hpbmciLCJjb29yZGluYXRlcyIsInNldENvb3JkaW5hdGVzIiwiaXNHZW9mZW5jZUFjdGl2ZSIsImlzR2VvZmVuY2VQbGFjZW1lbnRNb2RlIiwicG9zaXRpb24iLCJzZXRQb3NpdGlvbiIsIm5vZGVSZWYiLCJsb2NhdGlvbk5hbWUiLCJzZXRMb2NhdGlvbk5hbWUiLCJpc0xvYWRpbmdMb2NhdGlvbiIsInNldElzTG9hZGluZ0xvY2F0aW9uIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwicHJldkNvb3JkaW5hdGVzUmVmIiwiaXNTYW1lQ29vcmRpbmF0ZXMiLCJjdXJyZW50IiwibGF0IiwibG5nIiwiY29uc29sZSIsImxvZyIsInRoZW4iLCJuYW1lIiwiY2F0Y2giLCJlcnJvciIsImZpbmFsbHkiLCJsYXN0U2VhcmNoUmVmIiwic2VhcmNoVGltZW91dCIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJmZXRjaExvY2F0aW9uTmFtZSIsImZvcm1hdENpdHlDb3VudHJ5IiwibG9jYXRpb25TdHJpbmciLCJwYXJ0cyIsInNwbGl0IiwibWFwIiwicGFydCIsInRyaW0iLCJsZW5ndGgiLCJjb3VudHJ5IiwiY2l0eSIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJhY3RpdmUiLCJkb2N1bWVudCIsImRpc3BhdGNoRXZlbnQiLCJoYW5kbGVNYXBDbGljayIsImUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZVNlYXJjaCIsImhhbmRsZSIsImRlZmF1bHRQb3NpdGlvbiIsIm9uU3RvcCIsImRhdGEiLCJ4IiwieSIsImRpdiIsInJlZiIsImNsYXNzTmFtZSIsInN0eWxlIiwidG9wIiwibGVmdCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJ0aXRsZSIsInNpemUiLCJzcGFuIiwidG9GaXhlZCIsImxhYmVsIiwiaW5wdXQiLCJ0eXBlIiwibWluIiwibWF4Iiwic3RlcCIsInZhbHVlIiwib25DaGFuZ2UiLCJwYXJzZUludCIsInRhcmdldCIsImRpc2FibGVkIiwic3ZnIiwidmlld0JveCIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJwYXRoIiwiZmlsbCIsImQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/tracking/filters/FloatingGeofencePanel.tsx\n"));

/***/ }),

/***/ "(pages-dir-browser)/./components/tracking/filters/GeofenceFilter.tsx":
/*!********************************************************!*\
  !*** ./components/tracking/filters/GeofenceFilter.tsx ***!
  \********************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(pages-dir-browser)/./node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_MapPin_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=MapPin!=!lucide-react */ \"(pages-dir-browser)/__barrel_optimize__?names=MapPin!=!./node_modules/lucide-react/dist/esm/lucide-react.js\");\n/* harmony import */ var _context_EnhancedMapContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/EnhancedMapContext */ \"(pages-dir-browser)/./components/tracking/context/EnhancedMapContext.tsx\");\n/* harmony import */ var _FloatingGeofencePanel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FloatingGeofencePanel */ \"(pages-dir-browser)/./components/tracking/filters/FloatingGeofencePanel.tsx\");\n/* harmony import */ var _lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/services/geofencing */ \"(pages-dir-browser)/./lib/services/geofencing.ts\");\n/* harmony import */ var _utils_getFlagImage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/getFlagImage */ \"(pages-dir-browser)/./utils/getFlagImage.ts\");\n// Description: This component handles the geofence filter functionality, including location search, radius adjustment, and aircraft data fetching.\n// It also manages the floating panel for geofence placement on the map.\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\nconst GeofenceFilter = (param)=>{\n    let { geofenceLocation, geofenceRadius, isGettingLocation, isGeofenceActive, geofenceCoordinates, getUserLocation, processGeofenceSearch, toggleGeofenceState, setGeofenceLocation, setGeofenceRadius, setGeofenceCoordinates, setGeofenceCenter, setActiveDropdown, combinedLoading, activeDropdown, toggleDropdown, dropdownRef, updateGeofenceAircraft, coordinates } = param;\n    _s();\n    // Get context and state\n    const { isGeofencePlacementMode, setIsGeofencePlacementMode, mapInstance } = (0,_context_EnhancedMapContext__WEBPACK_IMPORTED_MODULE_2__.useEnhancedMapContext)();\n    const [showFloatingPanel, setShowFloatingPanel] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [tempCoordinates, setTempCoordinates] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isSearching, setIsSearching] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [locationName, setLocationName] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const prevCoordinatesRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [isLoadingLocation, setIsLoadingLocation] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Handle opening the floating panel\n    const openFloatingPanel = ()=>{\n        setShowFloatingPanel(true);\n        setIsGeofencePlacementMode(true); // Enter placement mode\n        setActiveDropdown(null); // Close the dropdown\n    };\n    // Handle closing the floating panel\n    const closeFloatingPanel = ()=>{\n        setShowFloatingPanel(false);\n        setIsGeofencePlacementMode(false);\n        setTempCoordinates(null); // Clear temporary coordinates\n    };\n    // Handle panel search\n    const handlePanelSearch = async (lat, lng)=>{\n        setIsSearching(true);\n        try {\n            // Update the geofence location name\n            const locationName = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(lat, lng);\n            // Set the location name\n            if (locationName) {\n                setGeofenceLocation(locationName);\n            } else {\n                // Fallback to coordinates if no name is found\n                setGeofenceLocation(\"\".concat(lat.toFixed(4), \", \").concat(lng.toFixed(4)));\n            }\n            // Set coordinates using the same functions from processGeofenceSearch\n            if (setGeofenceCoordinates) {\n                setGeofenceCoordinates({\n                    lat,\n                    lng\n                });\n            }\n            if (setGeofenceCenter) {\n                setGeofenceCenter({\n                    lat,\n                    lng\n                });\n            }\n            // Get aircraft data near this location\n            await fetchAircraftForClickLocation(lat, lng);\n            // Activate geofence if not already active\n            if (!isGeofenceActive) {\n                toggleGeofenceState(true);\n            }\n            // Center the map on this location\n            if (mapInstance && typeof mapInstance.setView === 'function') {\n                // Get current zoom level\n                const currentZoom = mapInstance.getZoom();\n                // Use appropriate zoom level based on current view\n                const targetZoom = currentZoom <= 7 ? 9 : currentZoom;\n                // Set view to the coordinates\n                mapInstance.setView([\n                    lat,\n                    lng\n                ], targetZoom);\n                // Ensure map is updated\n                mapInstance.invalidateSize();\n            }\n        } catch (error) {\n            console.error('Error searching from panel:', error);\n        } finally{\n            setIsSearching(false);\n        }\n    };\n    // Function to get and process aircraft data\n    const fetchAircraftForClickLocation = async (lat, lng)=>{\n        try {\n            console.log('Fetching aircraft near clicked location:', lat, lng);\n            // Call the existing function from your geofencing.ts\n            const fetchedAircraft = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__.getAircraftNearLocation)(lat, lng, geofenceRadius || 25);\n            // Process the aircraft data\n            if (fetchedAircraft.length === 0) {\n                console.log('No aircraft found near clicked location');\n                return;\n            }\n            // Update the context with the new aircraft - add null check\n            if (typeof updateGeofenceAircraft === 'function') {\n                updateGeofenceAircraft(fetchedAircraft);\n            } else {\n                console.warn('updateGeofenceAircraft is not available or not a function');\n            }\n            console.log(\"Found \".concat(fetchedAircraft.length, \" aircraft near clicked location\"));\n        } catch (error) {\n            console.error('Error fetching aircraft for clicked location:', error);\n        }\n    };\n    const formatCityCountry = function(locationString) {\n        let countryOnly = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        if (!locationString) return '';\n        // Split by commas\n        const parts = locationString.split(',').map((part)=>part.trim());\n        // If we only want the country\n        if (countryOnly && parts.length >= 1) {\n            // Return the last part (usually the country)\n            return parts[parts.length - 1];\n        }\n        // For city, country format\n        if (parts.length >= 2) {\n            // Get country (usually the last part)\n            const country = parts[parts.length - 1];\n            // For city, use the first meaningful part\n            let city = parts[0];\n            // Skip redundant parts like province/city name duplication (Madrid, Madrid)\n            if (parts.length >= 3 && parts[0] === parts[1]) {\n                city = parts[0];\n            }\n            return \"\".concat(city, \", \").concat(country);\n        }\n        return locationString;\n    };\n    const country = formatCityCountry(locationName || '', true);\n    const flagUrl = (0,_utils_getFlagImage__WEBPACK_IMPORTED_MODULE_5__.getFlagImageUrl)(country);\n    const renderFlagAndName = (countryName)=>{\n        const flagUrl = (0,_utils_getFlagImage__WEBPACK_IMPORTED_MODULE_5__.getFlagImageUrl)(countryName);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n            className: \"flex items-center gap-2\",\n            children: [\n                flagUrl && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                    src: flagUrl,\n                    alt: \"\".concat(countryName, \" flag\"),\n                    className: \"w-5 h-3 rounded-sm\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                    lineNumber: 213,\n                    columnNumber: 11\n                }, undefined),\n                countryName\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n            lineNumber: 211,\n            columnNumber: 7\n        }, undefined);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GeofenceFilter.useEffect\": ()=>{\n            if (coordinates && !isGeofenceActive && !isGeofencePlacementMode) {\n                const fetchLocationName = {\n                    \"GeofenceFilter.useEffect.fetchLocationName\": async ()=>{\n                        try {\n                            // Make sure to pass both lat and lng as separate arguments\n                            // or according to how your function is defined\n                            const name = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(coordinates.lat, coordinates.lng);\n                            setLocationName(name);\n                        } catch (error) {\n                            console.error('Error fetching location name:', error);\n                            setLocationName(null);\n                        }\n                    }\n                }[\"GeofenceFilter.useEffect.fetchLocationName\"];\n                fetchLocationName();\n            }\n        }\n    }[\"GeofenceFilter.useEffect\"], [\n        coordinates,\n        isGeofenceActive,\n        isGeofencePlacementMode\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GeofenceFilter.useEffect\": ()=>{\n            // Only fetch location name if we have coordinates and not in special states\n            if (coordinates && !isGeofenceActive && !isGeofencePlacementMode) {\n                setIsLoading(true);\n                const fetchLocationName = {\n                    \"GeofenceFilter.useEffect.fetchLocationName\": async ()=>{\n                        try {\n                            const name = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(coordinates.lat, coordinates.lng);\n                            setLocationName(name);\n                        } catch (error) {\n                            console.error('Error fetching location name:', error);\n                            setLocationName(null);\n                        } finally{\n                            setIsLoading(false);\n                        }\n                    }\n                }[\"GeofenceFilter.useEffect.fetchLocationName\"];\n                fetchLocationName();\n            }\n        }\n    }[\"GeofenceFilter.useEffect\"], [\n        coordinates,\n        isGeofenceActive,\n        isGeofencePlacementMode\n    ]);\n    // In your location name effect\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GeofenceFilter.useEffect\": ()=>{\n            var _prevCoordinatesRef_current, _prevCoordinatesRef_current1;\n            if (!coordinates) return;\n            const isSameCoordinates = ((_prevCoordinatesRef_current = prevCoordinatesRef.current) === null || _prevCoordinatesRef_current === void 0 ? void 0 : _prevCoordinatesRef_current.lat) === coordinates.lat && ((_prevCoordinatesRef_current1 = prevCoordinatesRef.current) === null || _prevCoordinatesRef_current1 === void 0 ? void 0 : _prevCoordinatesRef_current1.lng) === coordinates.lng;\n            if (isSameCoordinates && (locationName || isLoadingLocation)) {\n                return;\n            }\n            prevCoordinatesRef.current = coordinates;\n            setIsLoadingLocation(true);\n            (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(coordinates.lat, coordinates.lng).then({\n                \"GeofenceFilter.useEffect\": (name)=>{\n                    setLocationName(name);\n                }\n            }[\"GeofenceFilter.useEffect\"]).catch({\n                \"GeofenceFilter.useEffect\": (error)=>{\n                    console.error('Error fetching location name:', error);\n                }\n            }[\"GeofenceFilter.useEffect\"]).finally({\n                \"GeofenceFilter.useEffect\": ()=>{\n                    setIsLoadingLocation(false);\n                }\n            }[\"GeofenceFilter.useEffect\"]);\n        }\n    }[\"GeofenceFilter.useEffect\"], [\n        coordinates\n    ]);\n    // Listen for the clear all filters event\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"GeofenceFilter.useEffect\": ()=>{\n            const handleClearAllFilters = {\n                \"GeofenceFilter.useEffect.handleClearAllFilters\": ()=>{\n                    // Close the floating panel when filters are cleared\n                    if (showFloatingPanel) {\n                        closeFloatingPanel();\n                    }\n                }\n            }[\"GeofenceFilter.useEffect.handleClearAllFilters\"];\n            // Add event listener for the clear all filters event\n            document.addEventListener('ribbon-filters-cleared', handleClearAllFilters);\n            // Clean up\n            return ({\n                \"GeofenceFilter.useEffect\": ()=>{\n                    document.removeEventListener('ribbon-filters-cleared', handleClearAllFilters);\n                }\n            })[\"GeofenceFilter.useEffect\"];\n        }\n    }[\"GeofenceFilter.useEffect\"], [\n        showFloatingPanel,\n        closeFloatingPanel\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: dropdownRef,\n        className: \"relative\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                className: \"px-4 py-2 flex items-center justify-between gap-2 rounded-lg border \".concat(activeDropdown === 'location' ? 'bg-indigo-100 text-indigo-700 border-indigo-300 shadow-sm' : isGeofenceActive ? 'bg-indigo-50/70 text-indigo-600 border-indigo-200' : 'bg-gray-50/30 hover:bg-gray-50 border-gray-200 text-gray-700 hover:border-gray-300', \" transition-all duration-200\"),\n                onClick: (event)=>toggleDropdown('location', event),\n                disabled: combinedLoading || isGeofencePlacementMode,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"flex items-center gap-2 font-medium\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_MapPin_lucide_react__WEBPACK_IMPORTED_MODULE_6__.MapPin, {\n                                size: 16,\n                                className: isGeofenceActive ? 'text-indigo-500' : 'text-gray-500'\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 332,\n                                columnNumber: 11\n                            }, undefined),\n                            isGeofenceActive && geofenceLocation ? renderFlagAndName(formatCityCountry(geofenceLocation, true)) : isGeofencePlacementMode ? 'Click on map...' : isLoading ? 'Loading location...' : locationName ? renderFlagAndName(formatCityCountry(locationName, true)) : 'Location'\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                        lineNumber: 331,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                        xmlns: \"http://www.w3.org/2000/svg\",\n                        className: \"h-4 w-4 transition-transform \".concat(activeDropdown === 'location' ? 'transform rotate-180' : ''),\n                        fill: \"none\",\n                        viewBox: \"0 0 24 24\",\n                        stroke: \"currentColor\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                            strokeLinecap: \"round\",\n                            strokeLinejoin: \"round\",\n                            strokeWidth: 2,\n                            d: \"M19 9l-7 7-7-7\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                            lineNumber: 354,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                        lineNumber: 347,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                lineNumber: 320,\n                columnNumber: 7\n            }, undefined),\n            activeDropdown === 'location' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute left-0 top-full mt-1 w-72 bg-white shadow-lg rounded-md border border-gray-200 z-50\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-3 border-b\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex gap-2 mb-3\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                        type: \"text\",\n                                        className: \"flex-1 px-3 py-2 border border-gray-300 rounded-md\",\n                                        placeholder: \"ZIP code or coordinates...\",\n                                        value: geofenceLocation,\n                                        onChange: (e)=>setGeofenceLocation(e.target.value),\n                                        onKeyDown: (e)=>{\n                                            if (e.key === 'Enter' && !combinedLoading && geofenceLocation) {\n                                                processGeofenceSearch();\n                                            }\n                                        },\n                                        autoFocus: true\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                        lineNumber: 368,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"px-3 py-2 rounded-md text-white \".concat(combinedLoading || !geofenceLocation && !isGettingLocation ? 'bg-gray-400 cursor-not-allowed' : 'bg-indigo-600 hover:bg-indigo-700'),\n                                        onClick: processGeofenceSearch,\n                                        disabled: combinedLoading || !geofenceLocation && !isGettingLocation,\n                                        title: \"Search\",\n                                        children: combinedLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"animate-spin h-5 w-5\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                                    className: \"opacity-25\",\n                                                    cx: \"12\",\n                                                    cy: \"12\",\n                                                    r: \"10\",\n                                                    stroke: \"currentColor\",\n                                                    strokeWidth: \"4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                                    lineNumber: 399,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    className: \"opacity-75\",\n                                                    fill: \"currentColor\",\n                                                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                                    lineNumber: 407,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                            lineNumber: 398,\n                                            columnNumber: 19\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            className: \"h-5 w-5\",\n                                            fill: \"none\",\n                                            viewBox: \"0 0 24 24\",\n                                            stroke: \"currentColor\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                                lineNumber: 421,\n                                                columnNumber: 21\n                                            }, undefined)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                            lineNumber: 414,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                        lineNumber: 385,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 367,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: openFloatingPanel,\n                                className: \"w-full flex items-center justify-center py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_MapPin_lucide_react__WEBPACK_IMPORTED_MODULE_6__.MapPin, {\n                                        size: 16,\n                                        className: \"mr-2\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                        lineNumber: 437,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    \"Click on Map to Set Location\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 433,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"my-2\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 442,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                className: \"w-full flex items-center justify-center py-2 border border-indigo-300 rounded-md text-indigo-700 bg-indigo-50 hover:bg-indigo-100 transition-colors \".concat(isGettingLocation ? 'opacity-75 cursor-not-allowed' : ''),\n                                onClick: getUserLocation,\n                                disabled: isGettingLocation || combinedLoading,\n                                children: isGettingLocation ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            className: \"animate-spin h-4 w-4 mr-2\",\n                                            viewBox: \"0 0 24 24\",\n                                            children: [\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                                                    className: \"opacity-25\",\n                                                    cx: \"12\",\n                                                    cy: \"12\",\n                                                    r: \"10\",\n                                                    stroke: \"currentColor\",\n                                                    strokeWidth: \"4\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                                    lineNumber: 458,\n                                                    columnNumber: 21\n                                                }, undefined),\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                    className: \"opacity-75\",\n                                                    fill: \"currentColor\",\n                                                    d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                                    lineNumber: 466,\n                                                    columnNumber: 21\n                                                }, undefined)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                            lineNumber: 454,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        \"Getting location...\"\n                                    ]\n                                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_MapPin_lucide_react__WEBPACK_IMPORTED_MODULE_6__.MapPin, {\n                                            size: 16,\n                                            className: \"mr-2\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                            lineNumber: 476,\n                                            columnNumber: 19\n                                        }, undefined),\n                                        \"Use My Current Location\"\n                                    ]\n                                }, void 0, true)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 445,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                        lineNumber: 366,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"p-3 border-b\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                className: \"text-sm font-medium text-gray-700 block mb-1\",\n                                children: [\n                                    \"Radius: \",\n                                    geofenceRadius,\n                                    \" km\"\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 485,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                type: \"range\",\n                                min: \"5\",\n                                max: \"100\",\n                                step: \"5\",\n                                value: geofenceRadius,\n                                onChange: (e)=>setGeofenceRadius(parseInt(e.target.value)),\n                                className: \"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 488,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-between text-xs text-gray-500 mt-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"5 km\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                        lineNumber: 498,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"50 km\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                        lineNumber: 499,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: \"100 km\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                        lineNumber: 500,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                                lineNumber: 497,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                        lineNumber: 484,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                lineNumber: 364,\n                columnNumber: 9\n            }, undefined),\n            showFloatingPanel && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FloatingGeofencePanel__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                isOpen: showFloatingPanel,\n                onClose: closeFloatingPanel,\n                geofenceRadius: geofenceRadius,\n                setGeofenceRadius: setGeofenceRadius,\n                onSearch: handlePanelSearch,\n                isSearching: isSearching,\n                coordinates: tempCoordinates,\n                setCoordinates: setTempCoordinates,\n                isGeofenceActive: isGeofenceActive,\n                isGeofencePlacementMode: isGeofencePlacementMode\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n                lineNumber: 508,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\Users\\\\satho\\\\Documents\\\\Projects\\\\aircraft-tracking\\\\components\\\\tracking\\\\filters\\\\GeofenceFilter.tsx\",\n        lineNumber: 319,\n        columnNumber: 5\n    }, undefined);\n};\n_s(GeofenceFilter, \"4sfJxYige8w6lkXXnMEtz1ivdSI=\", false, function() {\n    return [\n        _context_EnhancedMapContext__WEBPACK_IMPORTED_MODULE_2__.useEnhancedMapContext\n    ];\n});\n_c = GeofenceFilter;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GeofenceFilter);\nvar _c;\n$RefreshReg$(_c, \"GeofenceFilter\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvdHJhY2tpbmcvZmlsdGVycy9HZW9mZW5jZUZpbHRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBLG1KQUFtSjtBQUNuSix3RUFBd0U7OztBQUNiO0FBQ3JCO0FBRWdDO0FBQ1Y7QUFDZTtBQUNHO0FBQ2hCO0FBa0I5RCxNQUFNVSxpQkFBZ0Q7UUFBQyxFQUNyREMsZ0JBQWdCLEVBQ2hCQyxjQUFjLEVBQ2RDLGlCQUFpQixFQUNqQkMsZ0JBQWdCLEVBQ2hCQyxtQkFBbUIsRUFDbkJDLGVBQWUsRUFDZkMscUJBQXFCLEVBQ3JCQyxtQkFBbUIsRUFDbkJDLG1CQUFtQixFQUNuQkMsaUJBQWlCLEVBQ2pCQyxzQkFBc0IsRUFDdEJDLGlCQUFpQixFQUNqQkMsaUJBQWlCLEVBQ2pCQyxlQUFlLEVBQ2ZDLGNBQWMsRUFDZEMsY0FBYyxFQUNkQyxXQUFXLEVBQ1hDLHNCQUFzQixFQUN0QkMsV0FBVyxFQUNaOztJQUNDLHdCQUF3QjtJQUN4QixNQUFNLEVBQUVDLHVCQUF1QixFQUFFQywwQkFBMEIsRUFBRUMsV0FBVyxFQUFFLEdBQ3hFM0Isa0ZBQXFCQTtJQUN2QixNQUFNLENBQUM0QixtQkFBbUJDLHFCQUFxQixHQUFHakMsK0NBQVFBLENBQUM7SUFDM0QsTUFBTSxDQUFDa0MsaUJBQWlCQyxtQkFBbUIsR0FBR25DLCtDQUFRQSxDQUc1QztJQUNWLE1BQU0sQ0FBQ29DLGFBQWFDLGVBQWUsR0FBR3JDLCtDQUFRQSxDQUFDO0lBQy9DLE1BQU0sQ0FBQ3NDLGNBQWNDLGdCQUFnQixHQUFHdkMsK0NBQVFBLENBQWdCO0lBQ2hFLE1BQU0sQ0FBQ3dDLFdBQVdDLGFBQWEsR0FBR3pDLCtDQUFRQSxDQUFVO0lBRXBELE1BQU0wQyxxQkFBcUJ4Qyw2Q0FBTUEsQ0FBc0M7SUFDdkUsTUFBTSxDQUFDeUMsbUJBQW1CQyxxQkFBcUIsR0FBRzVDLCtDQUFRQSxDQUFDO0lBRTNELG9DQUFvQztJQUNwQyxNQUFN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QlEsbUJBQW1CQTtnQkFDbkJnSCxVQUFVcEY7Z0JBQ1ZYLGFBQWFBO2dCQUNiUixhQUFhTTtnQkFDYmtHLGdCQUFnQmpHO2dCQUNoQnRCLGtCQUFrQkE7Z0JBQ2xCZ0IseUJBQXlCQTs7Ozs7Ozs7Ozs7O0FBS25DO0dBL2VNcEI7O1FBdUJGTCw4RUFBcUJBOzs7S0F2Qm5CSztBQWlmTixpRUFBZUEsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzYXRob1xcRG9jdW1lbnRzXFxQcm9qZWN0c1xcYWlyY3JhZnQtdHJhY2tpbmdcXGNvbXBvbmVudHNcXHRyYWNraW5nXFxmaWx0ZXJzXFxHZW9mZW5jZUZpbHRlci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVzY3JpcHRpb246IFRoaXMgY29tcG9uZW50IGhhbmRsZXMgdGhlIGdlb2ZlbmNlIGZpbHRlciBmdW5jdGlvbmFsaXR5LCBpbmNsdWRpbmcgbG9jYXRpb24gc2VhcmNoLCByYWRpdXMgYWRqdXN0bWVudCwgYW5kIGFpcmNyYWZ0IGRhdGEgZmV0Y2hpbmcuXHJcbi8vIEl0IGFsc28gbWFuYWdlcyB0aGUgZmxvYXRpbmcgcGFuZWwgZm9yIGdlb2ZlbmNlIHBsYWNlbWVudCBvbiB0aGUgbWFwLlxyXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBNYXBQaW4gfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xyXG5pbXBvcnQgdHlwZSB7IEdlb2ZlbmNlU3RhdGUgfSBmcm9tICcuLi90eXBlcy9maWx0ZXJzJztcclxuaW1wb3J0IHsgdXNlRW5oYW5jZWRNYXBDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9FbmhhbmNlZE1hcENvbnRleHQnO1xyXG5pbXBvcnQgRmxvYXRpbmdHZW9mZW5jZVBhbmVsIGZyb20gJy4vRmxvYXRpbmdHZW9mZW5jZVBhbmVsJztcclxuaW1wb3J0IHsgZ2V0QWlyY3JhZnROZWFyTG9jYXRpb24gfSBmcm9tICcuLi8uLi8uLi9saWIvc2VydmljZXMvZ2VvZmVuY2luZyc7XHJcbmltcG9ydCBnZXRMb2NhdGlvbk5hbWVGcm9tQ29vcmRpbmF0ZXMgZnJvbSAnLi4vLi4vLi4vbGliL3NlcnZpY2VzL2dlb2ZlbmNpbmcnO1xyXG5pbXBvcnQgeyBnZXRGbGFnSW1hZ2VVcmwgfSBmcm9tICcuLi8uLi8uLi91dGlscy9nZXRGbGFnSW1hZ2UnO1xyXG5cclxuaW50ZXJmYWNlIEdlb2ZlbmNlRmlsdGVyUHJvcHMgZXh0ZW5kcyBHZW9mZW5jZVN0YXRlIHtcclxuICBhY3RpdmVEcm9wZG93bjogc3RyaW5nIHwgbnVsbDtcclxuICBzZXRBY3RpdmVEcm9wZG93bjogKGRyb3Bkb3duOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xyXG4gIHRvZ2dsZURyb3Bkb3duOiAodHlwZTogc3RyaW5nLCBldmVudDogUmVhY3QuTW91c2VFdmVudCkgPT4gdm9pZDtcclxuICBkcm9wZG93blJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PjtcclxuICBzZXRHZW9mZW5jZUNvb3JkaW5hdGVzOiAoXHJcbiAgICBjb29yZGluYXRlczogeyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXIgfSB8IG51bGxcclxuICApID0+IHZvaWQ7XHJcbiAgc2V0R2VvZmVuY2VDZW50ZXI6IChjb29yZGluYXRlczogeyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXIgfSkgPT4gdm9pZDtcclxuICB1cGRhdGVHZW9mZW5jZUFpcmNyYWZ0OiAoYWlyY3JhZnQ6IGFueVtdKSA9PiB2b2lkO1xyXG4gIGlzR2VvZmVuY2VBY3RpdmU6IGJvb2xlYW47XHJcbiAgZ2VvZmVuY2VMb2NhdGlvbjogc3RyaW5nO1xyXG4gIGlzR2VvZmVuY2VQbGFjZW1lbnRNb2RlOiBib29sZWFuO1xyXG4gIGNvb3JkaW5hdGVzPzogeyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXIgfTtcclxufVxyXG5cclxuY29uc3QgR2VvZmVuY2VGaWx0ZXI6IFJlYWN0LkZDPEdlb2ZlbmNlRmlsdGVyUHJvcHM+ID0gKHtcclxuICBnZW9mZW5jZUxvY2F0aW9uLFxyXG4gIGdlb2ZlbmNlUmFkaXVzLFxyXG4gIGlzR2V0dGluZ0xvY2F0aW9uLFxyXG4gIGlzR2VvZmVuY2VBY3RpdmUsXHJcbiAgZ2VvZmVuY2VDb29yZGluYXRlcyxcclxuICBnZXRVc2VyTG9jYXRpb24sXHJcbiAgcHJvY2Vzc0dlb2ZlbmNlU2VhcmNoLFxyXG4gIHRvZ2dsZUdlb2ZlbmNlU3RhdGUsXHJcbiAgc2V0R2VvZmVuY2VMb2NhdGlvbixcclxuICBzZXRHZW9mZW5jZVJhZGl1cyxcclxuICBzZXRHZW9mZW5jZUNvb3JkaW5hdGVzLFxyXG4gIHNldEdlb2ZlbmNlQ2VudGVyLFxyXG4gIHNldEFjdGl2ZURyb3Bkb3duLFxyXG4gIGNvbWJpbmVkTG9hZGluZyxcclxuICBhY3RpdmVEcm9wZG93bixcclxuICB0b2dnbGVEcm9wZG93bixcclxuICBkcm9wZG93blJlZixcclxuICB1cGRhdGVHZW9mZW5jZUFpcmNyYWZ0LFxyXG4gIGNvb3JkaW5hdGVzLFxyXG59KSA9PiB7XHJcbiAgLy8gR2V0IGNvbnRleHQgYW5kIHN0YXRlXHJcbiAgY29uc3QgeyBpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZSwgc2V0SXNHZW9mZW5jZVBsYWNlbWVudE1vZGUsIG1hcEluc3RhbmNlIH0gPVxyXG4gICAgdXNlRW5oYW5jZWRNYXBDb250ZXh0KCk7XHJcbiAgY29uc3QgW3Nob3dGbG9hdGluZ1BhbmVsLCBzZXRTaG93RmxvYXRpbmdQYW5lbF0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3RlbXBDb29yZGluYXRlcywgc2V0VGVtcENvb3JkaW5hdGVzXSA9IHVzZVN0YXRlPHtcclxuICAgIGxhdDogbnVtYmVyO1xyXG4gICAgbG5nOiBudW1iZXI7XHJcbiAgfSB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpc1NlYXJjaGluZywgc2V0SXNTZWFyY2hpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtsb2NhdGlvbk5hbWUsIHNldExvY2F0aW9uTmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xyXG5cclxuICBjb25zdCBwcmV2Q29vcmRpbmF0ZXNSZWYgPSB1c2VSZWY8eyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXIgfSB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpc0xvYWRpbmdMb2NhdGlvbiwgc2V0SXNMb2FkaW5nTG9jYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xyXG5cclxuICAvLyBIYW5kbGUgb3BlbmluZyB0aGUgZmxvYXRpbmcgcGFuZWxcclxuICBjb25zdCBvcGVuRmxvYXRpbmdQYW5lbCA9ICgpID0+IHtcclxuICAgIHNldFNob3dGbG9hdGluZ1BhbmVsKHRydWUpO1xyXG4gICAgc2V0SXNHZW9mZW5jZVBsYWNlbWVudE1vZGUodHJ1ZSk7IC8vIEVudGVyIHBsYWNlbWVudCBtb2RlXHJcbiAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTsgLy8gQ2xvc2UgdGhlIGRyb3Bkb3duXHJcbiAgfTtcclxuXHJcbiAgLy8gSGFuZGxlIGNsb3NpbmcgdGhlIGZsb2F0aW5nIHBhbmVsXHJcbiAgY29uc3QgY2xvc2VGbG9hdGluZ1BhbmVsID0gKCkgPT4ge1xyXG4gICAgc2V0U2hvd0Zsb2F0aW5nUGFuZWwoZmFsc2UpO1xyXG4gICAgc2V0SXNHZW9mZW5jZVBsYWNlbWVudE1vZGUoZmFsc2UpO1xyXG4gICAgc2V0VGVtcENvb3JkaW5hdGVzKG51bGwpOyAvLyBDbGVhciB0ZW1wb3JhcnkgY29vcmRpbmF0ZXNcclxuICB9O1xyXG5cclxuICAvLyBIYW5kbGUgcGFuZWwgc2VhcmNoXHJcbiAgY29uc3QgaGFuZGxlUGFuZWxTZWFyY2ggPSBhc3luYyAobGF0OiBudW1iZXIsIGxuZzogbnVtYmVyKSA9PiB7XHJcbiAgICBzZXRJc1NlYXJjaGluZyh0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZ2VvZmVuY2UgbG9jYXRpb24gbmFtZVxyXG4gICAgICBjb25zdCBsb2NhdGlvbk5hbWUgPSBhd2FpdCBnZXRMb2NhdGlvbk5hbWVGcm9tQ29vcmRpbmF0ZXMobGF0LCBsbmcpO1xyXG5cclxuICAgICAgLy8gU2V0IHRoZSBsb2NhdGlvbiBuYW1lXHJcbiAgICAgIGlmIChsb2NhdGlvbk5hbWUpIHtcclxuICAgICAgICBzZXRHZW9mZW5jZUxvY2F0aW9uKGxvY2F0aW9uTmFtZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gY29vcmRpbmF0ZXMgaWYgbm8gbmFtZSBpcyBmb3VuZFxyXG4gICAgICAgIHNldEdlb2ZlbmNlTG9jYXRpb24oYCR7bGF0LnRvRml4ZWQoNCl9LCAke2xuZy50b0ZpeGVkKDQpfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTZXQgY29vcmRpbmF0ZXMgdXNpbmcgdGhlIHNhbWUgZnVuY3Rpb25zIGZyb20gcHJvY2Vzc0dlb2ZlbmNlU2VhcmNoXHJcbiAgICAgIGlmIChzZXRHZW9mZW5jZUNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgc2V0R2VvZmVuY2VDb29yZGluYXRlcyh7IGxhdCwgbG5nIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc2V0R2VvZmVuY2VDZW50ZXIpIHtcclxuICAgICAgICBzZXRHZW9mZW5jZUNlbnRlcih7IGxhdCwgbG5nIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgYWlyY3JhZnQgZGF0YSBuZWFyIHRoaXMgbG9jYXRpb25cclxuICAgICAgYXdhaXQgZmV0Y2hBaXJjcmFmdEZvckNsaWNrTG9jYXRpb24obGF0LCBsbmcpO1xyXG5cclxuICAgICAgLy8gQWN0aXZhdGUgZ2VvZmVuY2UgaWYgbm90IGFscmVhZHkgYWN0aXZlXHJcbiAgICAgIGlmICghaXNHZW9mZW5jZUFjdGl2ZSkge1xyXG4gICAgICAgIHRvZ2dsZUdlb2ZlbmNlU3RhdGUodHJ1ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENlbnRlciB0aGUgbWFwIG9uIHRoaXMgbG9jYXRpb25cclxuICAgICAgaWYgKG1hcEluc3RhbmNlICYmIHR5cGVvZiBtYXBJbnN0YW5jZS5zZXRWaWV3ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gR2V0IGN1cnJlbnQgem9vbSBsZXZlbFxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRab29tID0gbWFwSW5zdGFuY2UuZ2V0Wm9vbSgpO1xyXG4gICAgICAgIC8vIFVzZSBhcHByb3ByaWF0ZSB6b29tIGxldmVsIGJhc2VkIG9uIGN1cnJlbnQgdmlld1xyXG4gICAgICAgIGNvbnN0IHRhcmdldFpvb20gPSBjdXJyZW50Wm9vbSA8PSA3ID8gOSA6IGN1cnJlbnRab29tO1xyXG5cclxuICAgICAgICAvLyBTZXQgdmlldyB0byB0aGUgY29vcmRpbmF0ZXNcclxuICAgICAgICBtYXBJbnN0YW5jZS5zZXRWaWV3KFtsYXQsIGxuZ10sIHRhcmdldFpvb20pO1xyXG5cclxuICAgICAgICAvLyBFbnN1cmUgbWFwIGlzIHVwZGF0ZWRcclxuICAgICAgICBtYXBJbnN0YW5jZS5pbnZhbGlkYXRlU2l6ZSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgZnJvbSBwYW5lbDonLCBlcnJvcik7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBzZXRJc1NlYXJjaGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gRnVuY3Rpb24gdG8gZ2V0IGFuZCBwcm9jZXNzIGFpcmNyYWZ0IGRhdGFcclxuICBjb25zdCBmZXRjaEFpcmNyYWZ0Rm9yQ2xpY2tMb2NhdGlvbiA9IGFzeW5jIChsYXQ6IG51bWJlciwgbG5nOiBudW1iZXIpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGZXRjaGluZyBhaXJjcmFmdCBuZWFyIGNsaWNrZWQgbG9jYXRpb246JywgbGF0LCBsbmcpO1xyXG5cclxuICAgICAgLy8gQ2FsbCB0aGUgZXhpc3RpbmcgZnVuY3Rpb24gZnJvbSB5b3VyIGdlb2ZlbmNpbmcudHNcclxuICAgICAgY29uc3QgZmV0Y2hlZEFpcmNyYWZ0ID0gYXdhaXQgZ2V0QWlyY3JhZnROZWFyTG9jYXRpb24oXHJcbiAgICAgICAgbGF0LFxyXG4gICAgICAgIGxuZyxcclxuICAgICAgICBnZW9mZW5jZVJhZGl1cyB8fCAyNVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyB0aGUgYWlyY3JhZnQgZGF0YVxyXG4gICAgICBpZiAoZmV0Y2hlZEFpcmNyYWZ0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBhaXJjcmFmdCBmb3VuZCBuZWFyIGNsaWNrZWQgbG9jYXRpb24nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgY29udGV4dCB3aXRoIHRoZSBuZXcgYWlyY3JhZnQgLSBhZGQgbnVsbCBjaGVja1xyXG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZUdlb2ZlbmNlQWlyY3JhZnQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB1cGRhdGVHZW9mZW5jZUFpcmNyYWZ0KGZldGNoZWRBaXJjcmFmdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgICAgJ3VwZGF0ZUdlb2ZlbmNlQWlyY3JhZnQgaXMgbm90IGF2YWlsYWJsZSBvciBub3QgYSBmdW5jdGlvbidcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgRm91bmQgJHtmZXRjaGVkQWlyY3JhZnQubGVuZ3RofSBhaXJjcmFmdCBuZWFyIGNsaWNrZWQgbG9jYXRpb25gXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBhaXJjcmFmdCBmb3IgY2xpY2tlZCBsb2NhdGlvbjonLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gRW5oYW5jZWQgZnVuY3Rpb24gdG8gZXh0cmFjdCBqdXN0IGNpdHkgYW5kIGNvdW50cnkgb3IganVzdCBjb3VudHJ5XHJcbiAgaW50ZXJmYWNlIEZvcm1hdENpdHlDb3VudHJ5T3B0aW9ucyB7XHJcbiAgICBsb2NhdGlvblN0cmluZzogc3RyaW5nO1xyXG4gICAgY291bnRyeU9ubHk/OiBib29sZWFuO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZm9ybWF0Q2l0eUNvdW50cnkgPSAoXHJcbiAgICBsb2NhdGlvblN0cmluZzogRm9ybWF0Q2l0eUNvdW50cnlPcHRpb25zWydsb2NhdGlvblN0cmluZyddLFxyXG4gICAgY291bnRyeU9ubHk6IEZvcm1hdENpdHlDb3VudHJ5T3B0aW9uc1snY291bnRyeU9ubHknXSA9IGZhbHNlXHJcbiAgKTogc3RyaW5nID0+IHtcclxuICAgIGlmICghbG9jYXRpb25TdHJpbmcpIHJldHVybiAnJztcclxuXHJcbiAgICAvLyBTcGxpdCBieSBjb21tYXNcclxuICAgIGNvbnN0IHBhcnRzID0gbG9jYXRpb25TdHJpbmcuc3BsaXQoJywnKS5tYXAoKHBhcnQpID0+IHBhcnQudHJpbSgpKTtcclxuXHJcbiAgICAvLyBJZiB3ZSBvbmx5IHdhbnQgdGhlIGNvdW50cnlcclxuICAgIGlmIChjb3VudHJ5T25seSAmJiBwYXJ0cy5sZW5ndGggPj0gMSkge1xyXG4gICAgICAvLyBSZXR1cm4gdGhlIGxhc3QgcGFydCAodXN1YWxseSB0aGUgY291bnRyeSlcclxuICAgICAgcmV0dXJuIHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciBjaXR5LCBjb3VudHJ5IGZvcm1hdFxyXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAyKSB7XHJcbiAgICAgIC8vIEdldCBjb3VudHJ5ICh1c3VhbGx5IHRoZSBsYXN0IHBhcnQpXHJcbiAgICAgIGNvbnN0IGNvdW50cnkgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcclxuXHJcbiAgICAgIC8vIEZvciBjaXR5LCB1c2UgdGhlIGZpcnN0IG1lYW5pbmdmdWwgcGFydFxyXG4gICAgICBsZXQgY2l0eSA9IHBhcnRzWzBdO1xyXG5cclxuICAgICAgLy8gU2tpcCByZWR1bmRhbnQgcGFydHMgbGlrZSBwcm92aW5jZS9jaXR5IG5hbWUgZHVwbGljYXRpb24gKE1hZHJpZCwgTWFkcmlkKVxyXG4gICAgICBpZiAocGFydHMubGVuZ3RoID49IDMgJiYgcGFydHNbMF0gPT09IHBhcnRzWzFdKSB7XHJcbiAgICAgICAgY2l0eSA9IHBhcnRzWzBdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gYCR7Y2l0eX0sICR7Y291bnRyeX1gO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsb2NhdGlvblN0cmluZztcclxuICB9O1xyXG5cclxuICBjb25zdCBjb3VudHJ5ID0gZm9ybWF0Q2l0eUNvdW50cnkobG9jYXRpb25OYW1lIHx8ICcnLCB0cnVlKTtcclxuICBjb25zdCBmbGFnVXJsID0gZ2V0RmxhZ0ltYWdlVXJsKGNvdW50cnkpO1xyXG5cclxuICBjb25zdCByZW5kZXJGbGFnQW5kTmFtZSA9IChjb3VudHJ5TmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBmbGFnVXJsID0gZ2V0RmxhZ0ltYWdlVXJsKGNvdW50cnlOYW1lKTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yXCI+XHJcbiAgICAgICAge2ZsYWdVcmwgJiYgKFxyXG4gICAgICAgICAgPGltZ1xyXG4gICAgICAgICAgICBzcmM9e2ZsYWdVcmx9XHJcbiAgICAgICAgICAgIGFsdD17YCR7Y291bnRyeU5hbWV9IGZsYWdgfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTUgaC0zIHJvdW5kZWQtc21cIlxyXG4gICAgICAgICAgLz5cclxuICAgICAgICApfVxyXG4gICAgICAgIHtjb3VudHJ5TmFtZX1cclxuICAgICAgPC9zcGFuPlxyXG4gICAgKTtcclxuICB9O1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKGNvb3JkaW5hdGVzICYmICFpc0dlb2ZlbmNlQWN0aXZlICYmICFpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZSkge1xyXG4gICAgICBjb25zdCBmZXRjaExvY2F0aW9uTmFtZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRvIHBhc3MgYm90aCBsYXQgYW5kIGxuZyBhcyBzZXBhcmF0ZSBhcmd1bWVudHNcclxuICAgICAgICAgIC8vIG9yIGFjY29yZGluZyB0byBob3cgeW91ciBmdW5jdGlvbiBpcyBkZWZpbmVkXHJcbiAgICAgICAgICBjb25zdCBuYW1lID0gYXdhaXQgZ2V0TG9jYXRpb25OYW1lRnJvbUNvb3JkaW5hdGVzKFxyXG4gICAgICAgICAgICBjb29yZGluYXRlcy5sYXQsXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmxuZ1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHNldExvY2F0aW9uTmFtZShuYW1lKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbG9jYXRpb24gbmFtZTonLCBlcnJvcik7XHJcbiAgICAgICAgICBzZXRMb2NhdGlvbk5hbWUobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZmV0Y2hMb2NhdGlvbk5hbWUoKTtcclxuICAgIH1cclxuICB9LCBbY29vcmRpbmF0ZXMsIGlzR2VvZmVuY2VBY3RpdmUsIGlzR2VvZmVuY2VQbGFjZW1lbnRNb2RlXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBPbmx5IGZldGNoIGxvY2F0aW9uIG5hbWUgaWYgd2UgaGF2ZSBjb29yZGluYXRlcyBhbmQgbm90IGluIHNwZWNpYWwgc3RhdGVzXHJcbiAgICBpZiAoY29vcmRpbmF0ZXMgJiYgIWlzR2VvZmVuY2VBY3RpdmUgJiYgIWlzR2VvZmVuY2VQbGFjZW1lbnRNb2RlKSB7XHJcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICAgIGNvbnN0IGZldGNoTG9jYXRpb25OYW1lID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBuYW1lID0gYXdhaXQgZ2V0TG9jYXRpb25OYW1lRnJvbUNvb3JkaW5hdGVzKFxyXG4gICAgICAgICAgICBjb29yZGluYXRlcy5sYXQsXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLmxuZ1xyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHNldExvY2F0aW9uTmFtZShuYW1lKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgbG9jYXRpb24gbmFtZTonLCBlcnJvcik7XHJcbiAgICAgICAgICBzZXRMb2NhdGlvbk5hbWUobnVsbCk7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZmV0Y2hMb2NhdGlvbk5hbWUoKTtcclxuICAgIH1cclxuICB9LCBbY29vcmRpbmF0ZXMsIGlzR2VvZmVuY2VBY3RpdmUsIGlzR2VvZmVuY2VQbGFjZW1lbnRNb2RlXSk7XHJcblxyXG4gIC8vIEluIHlvdXIgbG9jYXRpb24gbmFtZSBlZmZlY3RcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKCFjb29yZGluYXRlcykgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGlzU2FtZUNvb3JkaW5hdGVzID1cclxuICAgICAgcHJldkNvb3JkaW5hdGVzUmVmLmN1cnJlbnQ/LmxhdCA9PT0gY29vcmRpbmF0ZXMubGF0ICYmXHJcbiAgICAgIHByZXZDb29yZGluYXRlc1JlZi5jdXJyZW50Py5sbmcgPT09IGNvb3JkaW5hdGVzLmxuZztcclxuXHJcbiAgICBpZiAoaXNTYW1lQ29vcmRpbmF0ZXMgJiYgKGxvY2F0aW9uTmFtZSB8fCBpc0xvYWRpbmdMb2NhdGlvbikpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHByZXZDb29yZGluYXRlc1JlZi5jdXJyZW50ID0gY29vcmRpbmF0ZXM7XHJcblxyXG4gICAgc2V0SXNMb2FkaW5nTG9jYXRpb24odHJ1ZSk7XHJcblxyXG4gICAgZ2V0TG9jYXRpb25OYW1lRnJvbUNvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLmxhdCwgY29vcmRpbmF0ZXMubG5nKVxyXG4gICAgICAudGhlbigobmFtZSkgPT4ge1xyXG4gICAgICAgIHNldExvY2F0aW9uTmFtZShuYW1lKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGxvY2F0aW9uIG5hbWU6JywgZXJyb3IpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nTG9jYXRpb24oZmFsc2UpO1xyXG4gICAgICB9KTtcclxuICB9LCBbY29vcmRpbmF0ZXNdKTtcclxuXHJcbiAgLy8gTGlzdGVuIGZvciB0aGUgY2xlYXIgYWxsIGZpbHRlcnMgZXZlbnRcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaGFuZGxlQ2xlYXJBbGxGaWx0ZXJzID0gKCkgPT4ge1xyXG4gICAgICAvLyBDbG9zZSB0aGUgZmxvYXRpbmcgcGFuZWwgd2hlbiBmaWx0ZXJzIGFyZSBjbGVhcmVkXHJcbiAgICAgIGlmIChzaG93RmxvYXRpbmdQYW5lbCkge1xyXG4gICAgICAgIGNsb3NlRmxvYXRpbmdQYW5lbCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGNsZWFyIGFsbCBmaWx0ZXJzIGV2ZW50XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyaWJib24tZmlsdGVycy1jbGVhcmVkJywgaGFuZGxlQ2xlYXJBbGxGaWx0ZXJzKTtcclxuXHJcbiAgICAvLyBDbGVhbiB1cFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAncmliYm9uLWZpbHRlcnMtY2xlYXJlZCcsXHJcbiAgICAgICAgaGFuZGxlQ2xlYXJBbGxGaWx0ZXJzXHJcbiAgICAgICk7XHJcbiAgICB9O1xyXG4gIH0sIFtzaG93RmxvYXRpbmdQYW5lbCwgY2xvc2VGbG9hdGluZ1BhbmVsXSk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IHJlZj17ZHJvcGRvd25SZWZ9IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XHJcbiAgICAgIDxidXR0b25cclxuICAgICAgICBjbGFzc05hbWU9e2BweC00IHB5LTIgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdhcC0yIHJvdW5kZWQtbGcgYm9yZGVyICR7XHJcbiAgICAgICAgICBhY3RpdmVEcm9wZG93biA9PT0gJ2xvY2F0aW9uJ1xyXG4gICAgICAgICAgICA/ICdiZy1pbmRpZ28tMTAwIHRleHQtaW5kaWdvLTcwMCBib3JkZXItaW5kaWdvLTMwMCBzaGFkb3ctc20nXHJcbiAgICAgICAgICAgIDogaXNHZW9mZW5jZUFjdGl2ZVxyXG4gICAgICAgICAgICAgID8gJ2JnLWluZGlnby01MC83MCB0ZXh0LWluZGlnby02MDAgYm9yZGVyLWluZGlnby0yMDAnXHJcbiAgICAgICAgICAgICAgOiAnYmctZ3JheS01MC8zMCBob3ZlcjpiZy1ncmF5LTUwIGJvcmRlci1ncmF5LTIwMCB0ZXh0LWdyYXktNzAwIGhvdmVyOmJvcmRlci1ncmF5LTMwMCdcclxuICAgICAgICB9IHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTIwMGB9XHJcbiAgICAgICAgb25DbGljaz17KGV2ZW50KSA9PiB0b2dnbGVEcm9wZG93bignbG9jYXRpb24nLCBldmVudCl9XHJcbiAgICAgICAgZGlzYWJsZWQ9e2NvbWJpbmVkTG9hZGluZyB8fCBpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZX1cclxuICAgICAgPlxyXG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGdhcC0yIGZvbnQtbWVkaXVtXCI+XHJcbiAgICAgICAgICA8TWFwUGluXHJcbiAgICAgICAgICAgIHNpemU9ezE2fVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2lzR2VvZmVuY2VBY3RpdmUgPyAndGV4dC1pbmRpZ28tNTAwJyA6ICd0ZXh0LWdyYXktNTAwJ31cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgICB7aXNHZW9mZW5jZUFjdGl2ZSAmJiBnZW9mZW5jZUxvY2F0aW9uXHJcbiAgICAgICAgICAgID8gcmVuZGVyRmxhZ0FuZE5hbWUoZm9ybWF0Q2l0eUNvdW50cnkoZ2VvZmVuY2VMb2NhdGlvbiwgdHJ1ZSkpXHJcbiAgICAgICAgICAgIDogaXNHZW9mZW5jZVBsYWNlbWVudE1vZGVcclxuICAgICAgICAgICAgICA/ICdDbGljayBvbiBtYXAuLi4nXHJcbiAgICAgICAgICAgICAgOiBpc0xvYWRpbmdcclxuICAgICAgICAgICAgICAgID8gJ0xvYWRpbmcgbG9jYXRpb24uLi4nXHJcbiAgICAgICAgICAgICAgICA6IGxvY2F0aW9uTmFtZVxyXG4gICAgICAgICAgICAgICAgICA/IHJlbmRlckZsYWdBbmROYW1lKGZvcm1hdENpdHlDb3VudHJ5KGxvY2F0aW9uTmFtZSwgdHJ1ZSkpXHJcbiAgICAgICAgICAgICAgICAgIDogJ0xvY2F0aW9uJ31cclxuICAgICAgICA8L3NwYW4+XHJcblxyXG4gICAgICAgIDxzdmdcclxuICAgICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtgaC00IHctNCB0cmFuc2l0aW9uLXRyYW5zZm9ybSAke2FjdGl2ZURyb3Bkb3duID09PSAnbG9jYXRpb24nID8gJ3RyYW5zZm9ybSByb3RhdGUtMTgwJyA6ICcnfWB9XHJcbiAgICAgICAgICBmaWxsPVwibm9uZVwiXHJcbiAgICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPHBhdGhcclxuICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcclxuICAgICAgICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXHJcbiAgICAgICAgICAgIHN0cm9rZVdpZHRoPXsyfVxyXG4gICAgICAgICAgICBkPVwiTTE5IDlsLTcgNy03LTdcIlxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L3N2Zz5cclxuICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICB7YWN0aXZlRHJvcGRvd24gPT09ICdsb2NhdGlvbicgJiYgKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0wIHRvcC1mdWxsIG10LTEgdy03MiBiZy13aGl0ZSBzaGFkb3ctbGcgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHotNTBcIj5cclxuICAgICAgICAgIHsvKiBMb2NhdGlvbiBzZWFyY2ggaW5wdXQgKi99XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtMyBib3JkZXItYlwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTIgbWItM1wiPlxyXG4gICAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmxleC0xIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWRcIlxyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJaSVAgY29kZSBvciBjb29yZGluYXRlcy4uLlwiXHJcbiAgICAgICAgICAgICAgICB2YWx1ZT17Z2VvZmVuY2VMb2NhdGlvbn1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0R2VvZmVuY2VMb2NhdGlvbihlLnRhcmdldC52YWx1ZSl9XHJcbiAgICAgICAgICAgICAgICBvbktleURvd249eyhlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgICAgICAgICBlLmtleSA9PT0gJ0VudGVyJyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFjb21iaW5lZExvYWRpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICBnZW9mZW5jZUxvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NHZW9mZW5jZVNlYXJjaCgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BweC0zIHB5LTIgcm91bmRlZC1tZCB0ZXh0LXdoaXRlICR7XHJcbiAgICAgICAgICAgICAgICAgIGNvbWJpbmVkTG9hZGluZyB8fCAoIWdlb2ZlbmNlTG9jYXRpb24gJiYgIWlzR2V0dGluZ0xvY2F0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgID8gJ2JnLWdyYXktNDAwIGN1cnNvci1ub3QtYWxsb3dlZCdcclxuICAgICAgICAgICAgICAgICAgICA6ICdiZy1pbmRpZ28tNjAwIGhvdmVyOmJnLWluZGlnby03MDAnXHJcbiAgICAgICAgICAgICAgICB9YH1cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3Byb2Nlc3NHZW9mZW5jZVNlYXJjaH1cclxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtcclxuICAgICAgICAgICAgICAgICAgY29tYmluZWRMb2FkaW5nIHx8ICghZ2VvZmVuY2VMb2NhdGlvbiAmJiAhaXNHZXR0aW5nTG9jYXRpb24pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aXRsZT1cIlNlYXJjaFwiXHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge2NvbWJpbmVkTG9hZGluZyA/IChcclxuICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gaC01IHctNVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcGFjaXR5LTI1XCJcclxuICAgICAgICAgICAgICAgICAgICAgIGN4PVwiMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgY3k9XCIxMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICByPVwiMTBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiY3VycmVudENvbG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZVdpZHRoPVwiNFwiXHJcbiAgICAgICAgICAgICAgICAgICAgPjwvY2lyY2xlPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXHJcbiAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJvcGFjaXR5LTc1XCJcclxuICAgICAgICAgICAgICAgICAgICAgIGZpbGw9XCJjdXJyZW50Q29sb3JcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgZD1cIk00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3elwiXHJcbiAgICAgICAgICAgICAgICAgICAgPjwvcGF0aD5cclxuICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICA8c3ZnXHJcbiAgICAgICAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaC01IHctNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIlxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkPVwiTTIxIDIxbC02LTZtMi01YTcgNyAwIDExLTE0IDAgNyA3IDAgMDExNCAwelwiXHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBSZXBsYWNlIHRoZSBwbGFjZW1lbnQgbW9kZSBidXR0b24gd2l0aCBvbmUgdGhhdCBvcGVucyB0aGUgZmxvYXRpbmcgcGFuZWwgKi99XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXtvcGVuRmxvYXRpbmdQYW5lbH1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcHktMiBiZy1pbmRpZ28tNjAwIHRleHQtd2hpdGUgcm91bmRlZC1tZCBob3ZlcjpiZy1pbmRpZ28tNzAwIHRyYW5zaXRpb24tY29sb3JzXCJcclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxNYXBQaW4gc2l6ZT17MTZ9IGNsYXNzTmFtZT1cIm1yLTJcIiAvPlxyXG4gICAgICAgICAgICAgIENsaWNrIG9uIE1hcCB0byBTZXQgTG9jYXRpb25cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcblxyXG4gICAgICAgICAgICB7LyogU3BhY2VyICovfVxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm15LTJcIj48L2Rpdj5cclxuXHJcbiAgICAgICAgICAgIHsvKiBDdXJyZW50IGxvY2F0aW9uIGJ1dHRvbiAtIGtlZXAgZXhpc3RpbmcgYnV0dG9uICovfVxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHB5LTIgYm9yZGVyIGJvcmRlci1pbmRpZ28tMzAwIHJvdW5kZWQtbWQgdGV4dC1pbmRpZ28tNzAwIGJnLWluZGlnby01MCBob3ZlcjpiZy1pbmRpZ28tMTAwIHRyYW5zaXRpb24tY29sb3JzICR7XHJcbiAgICAgICAgICAgICAgICBpc0dldHRpbmdMb2NhdGlvbiA/ICdvcGFjaXR5LTc1IGN1cnNvci1ub3QtYWxsb3dlZCcgOiAnJ1xyXG4gICAgICAgICAgICAgIH1gfVxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2dldFVzZXJMb2NhdGlvbn1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17aXNHZXR0aW5nTG9jYXRpb24gfHwgY29tYmluZWRMb2FkaW5nfVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAge2lzR2V0dGluZ0xvY2F0aW9uID8gKFxyXG4gICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgPHN2Z1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiBoLTQgdy00IG1yLTJcIlxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAgPGNpcmNsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3BhY2l0eS0yNVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBjeD1cIjEyXCJcclxuICAgICAgICAgICAgICAgICAgICAgIGN5PVwiMTJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgcj1cIjEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBzdHJva2VXaWR0aD1cIjRcIlxyXG4gICAgICAgICAgICAgICAgICAgID48L2NpcmNsZT5cclxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwib3BhY2l0eS03NVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBmaWxsPVwiY3VycmVudENvbG9yXCJcclxuICAgICAgICAgICAgICAgICAgICAgIGQ9XCJNNCAxMmE4IDggMCAwMTgtOFYwQzUuMzczIDAgMCA1LjM3MyAwIDEyaDR6bTIgNS4yOTFBNy45NjIgNy45NjIgMCAwMTQgMTJIMGMwIDMuMDQyIDEuMTM1IDUuODI0IDMgNy45MzhsMy0yLjY0N3pcIlxyXG4gICAgICAgICAgICAgICAgICAgID48L3BhdGg+XHJcbiAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICBHZXR0aW5nIGxvY2F0aW9uLi4uXHJcbiAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgPD5cclxuICAgICAgICAgICAgICAgICAgPE1hcFBpbiBzaXplPXsxNn0gY2xhc3NOYW1lPVwibXItMlwiIC8+XHJcbiAgICAgICAgICAgICAgICAgIFVzZSBNeSBDdXJyZW50IExvY2F0aW9uXHJcbiAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIHsvKiBSYWRpdXMgc2xpZGVyICovfVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwLTMgYm9yZGVyLWJcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBibG9jayBtYi0xXCI+XHJcbiAgICAgICAgICAgICAgUmFkaXVzOiB7Z2VvZmVuY2VSYWRpdXN9IGttXHJcbiAgICAgICAgICAgIDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgIHR5cGU9XCJyYW5nZVwiXHJcbiAgICAgICAgICAgICAgbWluPVwiNVwiXHJcbiAgICAgICAgICAgICAgbWF4PVwiMTAwXCJcclxuICAgICAgICAgICAgICBzdGVwPVwiNVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e2dlb2ZlbmNlUmFkaXVzfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0R2VvZmVuY2VSYWRpdXMocGFyc2VJbnQoZS50YXJnZXQudmFsdWUpKX1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC0yIGJnLWdyYXktMjAwIHJvdW5kZWQtbGcgYXBwZWFyYW5jZS1ub25lIGN1cnNvci1wb2ludGVyXCJcclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMVwiPlxyXG4gICAgICAgICAgICAgIDxzcGFuPjUga208L3NwYW4+XHJcbiAgICAgICAgICAgICAgPHNwYW4+NTAga208L3NwYW4+XHJcbiAgICAgICAgICAgICAgPHNwYW4+MTAwIGttPC9zcGFuPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG5cclxuICAgICAgey8qIFJlbmRlciB0aGUgZmxvYXRpbmcgcGFuZWwgd2hlbiBhY3RpdmUgKi99XHJcbiAgICAgIHtzaG93RmxvYXRpbmdQYW5lbCAmJiAoXHJcbiAgICAgICAgPEZsb2F0aW5nR2VvZmVuY2VQYW5lbFxyXG4gICAgICAgICAgaXNPcGVuPXtzaG93RmxvYXRpbmdQYW5lbH1cclxuICAgICAgICAgIG9uQ2xvc2U9e2Nsb3NlRmxvYXRpbmdQYW5lbH1cclxuICAgICAgICAgIGdlb2ZlbmNlUmFkaXVzPXtnZW9mZW5jZVJhZGl1c31cclxuICAgICAgICAgIHNldEdlb2ZlbmNlUmFkaXVzPXtzZXRHZW9mZW5jZVJhZGl1c31cclxuICAgICAgICAgIG9uU2VhcmNoPXtoYW5kbGVQYW5lbFNlYXJjaH1cclxuICAgICAgICAgIGlzU2VhcmNoaW5nPXtpc1NlYXJjaGluZ31cclxuICAgICAgICAgIGNvb3JkaW5hdGVzPXt0ZW1wQ29vcmRpbmF0ZXN9XHJcbiAgICAgICAgICBzZXRDb29yZGluYXRlcz17c2V0VGVtcENvb3JkaW5hdGVzfVxyXG4gICAgICAgICAgaXNHZW9mZW5jZUFjdGl2ZT17aXNHZW9mZW5jZUFjdGl2ZX1cclxuICAgICAgICAgIGlzR2VvZmVuY2VQbGFjZW1lbnRNb2RlPXtpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZX1cclxuICAgICAgICAvPlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdlb2ZlbmNlRmlsdGVyO1xyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVJlZiIsIk1hcFBpbiIsInVzZUVuaGFuY2VkTWFwQ29udGV4dCIsIkZsb2F0aW5nR2VvZmVuY2VQYW5lbCIsImdldEFpcmNyYWZ0TmVhckxvY2F0aW9uIiwiZ2V0TG9jYXRpb25OYW1lRnJvbUNvb3JkaW5hdGVzIiwiZ2V0RmxhZ0ltYWdlVXJsIiwiR2VvZmVuY2VGaWx0ZXIiLCJnZW9mZW5jZUxvY2F0aW9uIiwiZ2VvZmVuY2VSYWRpdXMiLCJpc0dldHRpbmdMb2NhdGlvbiIsImlzR2VvZmVuY2VBY3RpdmUiLCJnZW9mZW5jZUNvb3JkaW5hdGVzIiwiZ2V0VXNlckxvY2F0aW9uIiwicHJvY2Vzc0dlb2ZlbmNlU2VhcmNoIiwidG9nZ2xlR2VvZmVuY2VTdGF0ZSIsInNldEdlb2ZlbmNlTG9jYXRpb24iLCJzZXRHZW9mZW5jZVJhZGl1cyIsInNldEdlb2ZlbmNlQ29vcmRpbmF0ZXMiLCJzZXRHZW9mZW5jZUNlbnRlciIsInNldEFjdGl2ZURyb3Bkb3duIiwiY29tYmluZWRMb2FkaW5nIiwiYWN0aXZlRHJvcGRvd24iLCJ0b2dnbGVEcm9wZG93biIsImRyb3Bkb3duUmVmIiwidXBkYXRlR2VvZmVuY2VBaXJjcmFmdCIsImNvb3JkaW5hdGVzIiwiaXNHZW9mZW5jZVBsYWNlbWVudE1vZGUiLCJzZXRJc0dlb2ZlbmNlUGxhY2VtZW50TW9kZSIsIm1hcEluc3RhbmNlIiwic2hvd0Zsb2F0aW5nUGFuZWwiLCJzZXRTaG93RmxvYXRpbmdQYW5lbCIsInRlbXBDb29yZGluYXRlcyIsInNldFRlbXBDb29yZGluYXRlcyIsImlzU2VhcmNoaW5nIiwic2V0SXNTZWFyY2hpbmciLCJsb2NhdGlvbk5hbWUiLCJzZXRMb2NhdGlvbk5hbWUiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJwcmV2Q29vcmRpbmF0ZXNSZWYiLCJpc0xvYWRpbmdMb2NhdGlvbiIsInNldElzTG9hZGluZ0xvY2F0aW9uIiwib3BlbkZsb2F0aW5nUGFuZWwiLCJjbG9zZUZsb2F0aW5nUGFuZWwiLCJoYW5kbGVQYW5lbFNlYXJjaCIsImxhdCIsImxuZyIsInRvRml4ZWQiLCJmZXRjaEFpcmNyYWZ0Rm9yQ2xpY2tMb2NhdGlvbiIsInNldFZpZXciLCJjdXJyZW50Wm9vbSIsImdldFpvb20iLCJ0YXJnZXRab29tIiwiaW52YWxpZGF0ZVNpemUiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaGVkQWlyY3JhZnQiLCJsZW5ndGgiLCJ3YXJuIiwiZm9ybWF0Q2l0eUNvdW50cnkiLCJsb2NhdGlvblN0cmluZyIsImNvdW50cnlPbmx5IiwicGFydHMiLCJzcGxpdCIsIm1hcCIsInBhcnQiLCJ0cmltIiwiY291bnRyeSIsImNpdHkiLCJmbGFnVXJsIiwicmVuZGVyRmxhZ0FuZE5hbWUiLCJjb3VudHJ5TmFtZSIsInNwYW4iLCJjbGFzc05hbWUiLCJpbWciLCJzcmMiLCJhbHQiLCJmZXRjaExvY2F0aW9uTmFtZSIsIm5hbWUiLCJpc1NhbWVDb29yZGluYXRlcyIsImN1cnJlbnQiLCJ0aGVuIiwiY2F0Y2giLCJmaW5hbGx5IiwiaGFuZGxlQ2xlYXJBbGxGaWx0ZXJzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImRpdiIsInJlZiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJldmVudCIsImRpc2FibGVkIiwic2l6ZSIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsIm9uS2V5RG93biIsImtleSIsImF1dG9Gb2N1cyIsInRpdGxlIiwiY2lyY2xlIiwiY3giLCJjeSIsInIiLCJsYWJlbCIsIm1pbiIsIm1heCIsInN0ZXAiLCJwYXJzZUludCIsImlzT3BlbiIsIm9uQ2xvc2UiLCJvblNlYXJjaCIsInNldENvb3JkaW5hdGVzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/tracking/filters/GeofenceFilter.tsx\n"));

/***/ }),

/***/ "(pages-dir-browser)/./components/tracking/hooks/useFilterLogic.ts":
/*!*****************************************************!*\
  !*** ./components/tracking/hooks/useFilterLogic.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useFilterLogic: () => (/* binding */ useFilterLogic)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types_base__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/types/base */ \"(pages-dir-browser)/./types/base.ts\");\n/* harmony import */ var _context_EnhancedMapContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../context/EnhancedMapContext */ \"(pages-dir-browser)/./components/tracking/context/EnhancedMapContext.tsx\");\n/* harmony import */ var _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/services/openSkyTrackingService */ \"(pages-dir-browser)/./lib/services/openSkyTrackingService.ts\");\n/* harmony import */ var _lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/services/geofencing */ \"(pages-dir-browser)/./lib/services/geofencing.ts\");\n/* harmony import */ var _lib_utils_geofenceAdapter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/utils/geofenceAdapter */ \"(pages-dir-browser)/./lib/utils/geofenceAdapter.ts\");\n/* harmony import */ var _lib_utils_geofenceEnricher__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/utils/geofenceEnricher */ \"(pages-dir-browser)/./lib/utils/geofenceEnricher.ts\");\n/* harmony import */ var _hooks_useGeolocation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../hooks/useGeolocation */ \"(pages-dir-browser)/./components/tracking/hooks/useGeolocation.ts\");\n/* harmony import */ var _config_map__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../config/map */ \"(pages-dir-browser)/./config/map.ts\");\n\n\n\n\n\n\n\n\n\n\n\nfunction useFilterLogic() {\n    // Get context state and functions\n    const { selectedManufacturer, selectedModel, totalActive, selectManufacturer, selectModel, reset, fullRefresh, refreshPositions, mapInstance, updateAircraftData, clearGeofenceData, updateGeofenceAircraft, blockManufacturerApiCalls, setBlockManufacturerApiCalls, isManufacturerApiBlocked, setIsManufacturerApiBlocked, geofenceCenter, setGeofenceCenter, toggleGeofence, clearGeofence, displayedAircraft } = (0,_context_EnhancedMapContext__WEBPACK_IMPORTED_MODULE_2__.useEnhancedMapContext)();\n    // Get geolocation hook\n    const { getCurrentPosition } = (0,_hooks_useGeolocation__WEBPACK_IMPORTED_MODULE_7__.useGeolocation)();\n    // Local state\n    const [localLoading, setLocalLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [filterMode, setFilterMode] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [activeDropdown, setActiveDropdown] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [manufacturerSearchTerm, setManufacturerSearchTerm] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const [isRefreshing, setIsRefreshing] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isRateLimited, setIsRateLimited] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [rateLimitTimer, setRateLimitTimer] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    // Geofence state\n    const [isGettingLocation, setIsGettingLocation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [geofenceLocation, setGeofenceLocation] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const [geofenceRadius, setGeofenceRadius] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(25);\n    const [geofenceCoordinates, setGeofenceCoordinates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [geofenceAircraft, setGeofenceAircraft] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [geofenceEnabled, setGeofenceEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isGeofenceActive, setIsGeofenceActive] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [isSearchReady, setIsSearchReady] = react__WEBPACK_IMPORTED_MODULE_0___default().useState(false);\n    // Region state\n    const [activeRegion, setActiveRegion] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [regionOutline, setRegionOutline] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [selectedRegion, setSelectedRegion] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(_types_base__WEBPACK_IMPORTED_MODULE_1__.RegionCode.GLOBAL);\n    // Combined mode state\n    const [combinedModeReady, setCombinedModeReady] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    // Owner filter state\n    const allOwnerTypes = [\n        'individual',\n        'partnership',\n        'corp-owner',\n        'co-owned',\n        'llc',\n        'non-citizen-corp',\n        'airline',\n        'freight',\n        'medical',\n        'media',\n        'historical',\n        'flying-club',\n        'emergency',\n        'local-govt',\n        'education',\n        'federal-govt',\n        'flight-school',\n        'leasing-corp',\n        'military',\n        'unknown'\n    ];\n    const [ownerFilters, setOwnerFilters] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([\n        ...allOwnerTypes\n    ]);\n    // Refs for dropdown handling\n    const dropdownRefs = {\n        filter: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),\n        manufacturer: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),\n        model: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),\n        location: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),\n        region: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),\n        owner: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),\n        actions: (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null)\n    };\n    // Effects\n    react__WEBPACK_IMPORTED_MODULE_0___default().useEffect({\n        \"useFilterLogic.useEffect\": ()=>{\n            if (geofenceCoordinates) {\n                setIsSearchReady(true);\n            }\n        }\n    }[\"useFilterLogic.useEffect\"], [\n        geofenceCoordinates\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFilterLogic.useEffect\": ()=>{\n            if (isRateLimited && rateLimitTimer) {\n                const timer = setTimeout({\n                    \"useFilterLogic.useEffect.timer\": ()=>{\n                        setIsRateLimited(false);\n                        setRateLimitTimer(null);\n                        console.log('Rate limit timer expired, resuming API calls');\n                    }\n                }[\"useFilterLogic.useEffect.timer\"], rateLimitTimer * 1000);\n                return ({\n                    \"useFilterLogic.useEffect\": ()=>clearTimeout(timer)\n                })[\"useFilterLogic.useEffect\"];\n            }\n        }\n    }[\"useFilterLogic.useEffect\"], [\n        isRateLimited,\n        rateLimitTimer\n    ]);\n    // Effect to sync geofence state\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFilterLogic.useEffect\": ()=>{\n            // Update internal state when geofence is toggled externally\n            if (isGeofenceActive !== geofenceEnabled) {\n                setGeofenceEnabled(isGeofenceActive);\n            }\n        }\n    }[\"useFilterLogic.useEffect\"], [\n        isGeofenceActive\n    ]);\n    // Close dropdown when clicking outside\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFilterLogic.useEffect\": ()=>{\n            const handleClickOutside = {\n                \"useFilterLogic.useEffect.handleClickOutside\": (event)=>{\n                    // Check if click is outside of all dropdowns\n                    const isOutsideAll = Object.values(dropdownRefs).every({\n                        \"useFilterLogic.useEffect.handleClickOutside.isOutsideAll\": (ref)=>!ref.current || !ref.current.contains(event.target)\n                    }[\"useFilterLogic.useEffect.handleClickOutside.isOutsideAll\"]);\n                    if (isOutsideAll) {\n                        setActiveDropdown(null);\n                    }\n                }\n            }[\"useFilterLogic.useEffect.handleClickOutside\"];\n            document.addEventListener('mousedown', handleClickOutside);\n            return ({\n                \"useFilterLogic.useEffect\": ()=>{\n                    document.removeEventListener('mousedown', handleClickOutside);\n                }\n            })[\"useFilterLogic.useEffect\"];\n        }\n    }[\"useFilterLogic.useEffect\"], []);\n    // Clean up region outline when component unmounts\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFilterLogic.useEffect\": ()=>{\n            return ({\n                \"useFilterLogic.useEffect\": ()=>{\n                    if (regionOutline) {\n                        regionOutline.remove();\n                    }\n                }\n            })[\"useFilterLogic.useEffect\"];\n        }\n    }[\"useFilterLogic.useEffect\"], [\n        regionOutline\n    ]);\n    // Effect to handle map click for geofence\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useFilterLogic.useEffect\": ()=>{\n            const handleMapGeofenceClick = {\n                \"useFilterLogic.useEffect.handleMapGeofenceClick\": async (event)=>{\n                    try {\n                        // Cast the event to the proper type\n                        const customEvent = event;\n                        const { lat, lng } = customEvent.detail;\n                        // First update coordinates immediately\n                        setGeofenceCoordinates({\n                            lat,\n                            lng\n                        });\n                        // Then start an async operation to get the location name\n                        console.log(\"Getting location name for: \".concat(lat, \", \").concat(lng));\n                        // Temporarily show coordinates while fetching the name\n                        setGeofenceLocation(\"\".concat(lat.toFixed(6), \", \").concat(lng.toFixed(6)));\n                        // Get the friendly name asynchronously\n                        const locationName = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(lat, lng);\n                        console.log(\"Got location name: \".concat(locationName));\n                        // Update with the friendly name once we have it\n                        if (locationName !== null) {\n                            setGeofenceLocation(locationName);\n                        }\n                        // Open the location dropdown if needed\n                        if (activeDropdown !== 'location') {\n                            setActiveDropdown('location');\n                        }\n                    } catch (error) {\n                        console.error('Error handling map click:', error);\n                    // Keep the coordinates display if there was an error\n                    }\n                }\n            }[\"useFilterLogic.useEffect.handleMapGeofenceClick\"];\n            // Add the event listener - use the standard event listener pattern\n            document.addEventListener('map-geofence-click', handleMapGeofenceClick);\n            // Clean up\n            return ({\n                \"useFilterLogic.useEffect\": ()=>{\n                    document.removeEventListener('map-geofence-click', handleMapGeofenceClick);\n                }\n            })[\"useFilterLogic.useEffect\"];\n        }\n    }[\"useFilterLogic.useEffect\"], [\n        setGeofenceLocation,\n        setGeofenceCoordinates,\n        setActiveDropdown,\n        activeDropdown\n    ]);\n    // Main methods\n    const toggleDropdown = (dropdown, event)=>{\n        if (activeDropdown === dropdown) {\n            setActiveDropdown(null);\n        } else {\n            setActiveDropdown(dropdown);\n        }\n        // Prevent events from bubbling up\n        event.stopPropagation();\n    };\n    const handleRateLimit = function() {\n        let retryAfter = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 30;\n        setIsRateLimited(true);\n        setRateLimitTimer(retryAfter);\n        console.log(\"Rate limited by API. Retry after \".concat(retryAfter, \"s\"));\n        // Block all API calls\n        _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBlockAllApiCalls(true);\n        setBlockManufacturerApiCalls(true);\n        // Show notification to user\n        if (retryAfter > 0) {\n            alert(\"Aircraft data refresh rate limited. Please wait \".concat(retryAfter, \" seconds before trying again.\"));\n        }\n    };\n    /**\r\n   * Toggle filter mode\r\n   */ const toggleFilterMode = (mode)=>{\n        setFilterMode(mode);\n        setActiveDropdown(null);\n        // Apply appropriate filters based on new mode\n        if (mode === 'region') {\n            // Block API calls in region mode\n            _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBlockAllApiCalls(true);\n            // Apply region filtering if we already have data\n            if (displayedAircraft && displayedAircraft.length > 0) {\n                filterAircraftByRegion(selectedRegion.toString());\n            }\n            // Clear manufacturer selection from the UI\n            selectManufacturer(null);\n            selectModel(null);\n            // If geofence is active, restore the full geofence data\n            if (geofenceCoordinates && geofenceAircraft.length > 0) {\n                updateGeofenceAircraft(geofenceAircraft);\n            }\n        } else if (mode === 'owner') {\n            // Filter displayed aircraft by owner type\n            if (displayedAircraft && displayedAircraft.length > 0) {\n                // First filter for valid coordinates\n                const aircraftWithValidCoords = displayedAircraft.filter((plane)=>typeof plane.latitude === 'number' && typeof plane.longitude === 'number' && !isNaN(plane.latitude) && !isNaN(plane.longitude));\n                // Apply owner type filter\n                let filteredByOwner = ownerFilters.length === 0 ? aircraftWithValidCoords : aircraftWithValidCoords.filter((aircraft)=>ownerFilters.includes(getAircraftOwnerType(aircraft)));\n                // Update display with filtered aircraft\n                if (clearGeofenceData) {\n                    clearGeofenceData();\n                }\n                updateGeofenceAircraft(filteredByOwner);\n            }\n        } else if (mode === 'both') {\n            // Both mode - BLOCK API CALLS\n            _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBlockAllApiCalls(true);\n            if (selectedManufacturer && isGeofenceActive && geofenceAircraft.length > 0) {\n                applyCombinedFilters();\n            } else {\n                // If one is missing, prompt the user\n                if (!selectedManufacturer && isGeofenceActive) {\n                    alert('Please select a manufacturer to use combined filter mode');\n                } else if (selectedManufacturer && !isGeofenceActive) {\n                    alert('Please set a location to use combined filter mode');\n                } else {\n                    alert('Please select both a manufacturer and location to use combined filter mode');\n                }\n            }\n        }\n    };\n    // Owner filter methods\n    const getAircraftOwnerType = (aircraft)=>{\n        const ownerType = aircraft.TYPE_REGISTRANT || 0;\n        return ownerTypeToString(ownerType);\n    };\n    const ownerTypeToString = (type)=>{\n        const typeNum = typeof type === 'string' ? parseInt(type, 10) : type;\n        const ownerTypeMap = {\n            1: 'individual',\n            2: 'partnership',\n            3: 'corp-owner',\n            4: 'co-owned',\n            7: 'llc',\n            8: 'non-citizen-corp',\n            9: 'airline',\n            10: 'freight',\n            11: 'medical',\n            12: 'media',\n            13: 'historical',\n            14: 'flying-club',\n            15: 'emergency',\n            16: 'local-govt',\n            17: 'education',\n            18: 'federal-govt',\n            19: 'flight-school',\n            20: 'leasing-corp',\n            21: 'military'\n        };\n        return ownerTypeMap[typeNum] || 'unknown';\n    };\n    const applyOwnerTypeFilter = (filters)=>{\n        // Skip filtering if all types are selected or none are selected\n        if (filters.length === 0 || filters.length === allOwnerTypes.length) {\n            return;\n        }\n        // Filter the aircraft based on selected owner types\n        if (displayedAircraft && displayedAircraft.length > 0) {\n            const filteredAircraft = displayedAircraft.filter((aircraft)=>{\n                const ownerType = getAircraftOwnerType(aircraft);\n                return filters.includes(ownerType);\n            });\n            // Update the displayed aircraft\n            if (clearGeofenceData) {\n                clearGeofenceData();\n            }\n            updateGeofenceAircraft(filteredAircraft);\n        }\n    };\n    const handleOwnerFilterChange = (updatedFilters)=>{\n        setOwnerFilters(updatedFilters);\n        // Apply the filter to your aircraft data\n        applyOwnerTypeFilter(updatedFilters);\n    };\n    const resetOwnerFilters = ()=>{\n        setOwnerFilters([\n            ...allOwnerTypes\n        ]);\n    };\n    // Region filter methods\n    const filterAircraftByRegion = (region)=>{\n        if (!displayedAircraft || displayedAircraft.length === 0) return;\n        setLocalLoading(true);\n        try {\n            // Get the bounds for the selected region\n            const boundsExpression = (0,_config_map__WEBPACK_IMPORTED_MODULE_8__.getBoundsByRegion)(region);\n            // Ensure bounds is in the correct format\n            if (!Array.isArray(boundsExpression) || boundsExpression.length !== 2) {\n                console.error(\"Invalid bounds format for region: \".concat(region), boundsExpression);\n                setLocalLoading(false);\n                return;\n            }\n            // Extract coordinates - Leaflet uses [lat, lng] format\n            const [[minLat, minLng], [maxLat, maxLng]] = boundsExpression;\n            console.log(\"Filtering by region: \".concat(region, \" with bounds:\"), {\n                minLat,\n                minLng,\n                maxLat,\n                maxLng\n            });\n            // Filter aircraft based on coordinates within the bounds\n            const filteredAircraft = displayedAircraft.filter((aircraft)=>{\n                // Check if aircraft has valid coordinates\n                if (typeof aircraft.latitude !== 'number' || typeof aircraft.longitude !== 'number' || isNaN(aircraft.latitude) || isNaN(aircraft.longitude)) {\n                    return false;\n                }\n                // Check if coordinates are within the bounds\n                return aircraft.latitude >= minLat && aircraft.latitude <= maxLat && aircraft.longitude >= minLng && aircraft.longitude <= maxLng;\n            });\n            // Update the display with filtered aircraft\n            if (clearGeofenceData) {\n                clearGeofenceData();\n            }\n            updateGeofenceAircraft(filteredAircraft);\n            console.log(\"Filtered to \".concat(filteredAircraft.length, \" aircraft in \").concat(region, \" region (out of \").concat(displayedAircraft.length, \" total)\"));\n        } catch (error) {\n            console.error('Error filtering aircraft by region:', error);\n        } finally{\n            setLocalLoading(false);\n        }\n    };\n    const handleRegionSelect = async (region)=>{\n        setActiveRegion(region);\n        setSelectedRegion(region);\n        setLocalLoading(true);\n        try {\n            // Set map bounds based on region\n            if (mapInstance) {\n                const bounds = (0,_config_map__WEBPACK_IMPORTED_MODULE_8__.getBoundsByRegion)(region);\n                // Get the appropriate zoom level for this region from your config\n                const zoomLevel = (0,_config_map__WEBPACK_IMPORTED_MODULE_8__.getZoomLevelForRegion)(region);\n                // First, set the appropriate zoom level\n                mapInstance.setZoom(zoomLevel);\n                // Then fit bounds with padding\n                const options = {\n                    padding: _config_map__WEBPACK_IMPORTED_MODULE_8__.MAP_CONFIG.PADDING.DEFAULT\n                };\n                mapInstance.fitBounds(bounds, options);\n                mapInstance.invalidateSize();\n                drawRegionOutline(region);\n            }\n            // Instead of immediately fetching aircraft data,\n            // just store the region selection for later use\n            console.log(\"Region selected. Waiting for manufacturer selection...\");\n            // Optionally, you could fetch just the count of aircraft in this region\n            // to give the user an idea of the data volume\n            const countResponse = await fetch(\"/api/tracking/region-count?region=\".concat(region));\n            if (countResponse.ok) {\n                const countData = await countResponse.json();\n                console.log(\"\".concat(countData.count, \" aircraft available in this region\"));\n            }\n            // Clear any previous aircraft data\n            if (clearGeofenceData) {\n                clearGeofenceData();\n            }\n        } catch (error) {\n            console.error('Error in region selection:', error);\n        } finally{\n            setLocalLoading(false);\n            setActiveDropdown(null);\n        }\n    };\n    const drawRegionOutline = (region)=>{\n        if (!mapInstance) return;\n        // Clear any existing outline\n        if (regionOutline) {\n            regionOutline.remove();\n        }\n        // Get the bounds for the selected region\n        const bounds = (0,_config_map__WEBPACK_IMPORTED_MODULE_8__.getBoundsByRegion)(region);\n        // Create a polygon from the bounds\n        const L = __webpack_require__(/*! leaflet */ \"(pages-dir-browser)/./node_modules/leaflet/dist/leaflet-src.js\");\n        const rectangle = L.rectangle(bounds, {\n            color: '#4f46e5',\n            weight: 3,\n            opacity: 0.7,\n            fill: true,\n            fillColor: '#4f46e5',\n            fillOpacity: 0.1,\n            dashArray: '5, 10',\n            interactive: false\n        });\n        // Add to map\n        rectangle.addTo(mapInstance);\n        // Update the state to include both the rectangle and the label\n        setRegionOutline({\n            remove: ()=>{\n                rectangle.remove();\n            }\n        });\n    };\n    // Geofence methods\n    // Fixed getUserLocation function\n    const getUserLocation = async ()=>{\n        if (isRateLimited) {\n            alert(\"Rate limited. Please wait \".concat(rateLimitTimer || 30, \" seconds before trying to get location.\"));\n            return;\n        }\n        setIsGettingLocation(true);\n        try {\n            const position = await getCurrentPosition();\n            if (position) {\n                const { latitude, longitude } = position.coords;\n                // Update state with coordinates\n                setGeofenceCoordinates({\n                    lat: latitude,\n                    lng: longitude\n                });\n                setGeofenceCenter({\n                    lat: latitude,\n                    lng: longitude\n                });\n                // Update the location display with coordinates\n                setGeofenceLocation(\"\".concat(latitude.toFixed(6), \", \").concat(longitude.toFixed(6)));\n                // Automatically trigger the geofence search\n                try {\n                    const fetchedAircraft = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__.getAircraftNearLocation)(latitude, longitude, geofenceRadius);\n                    if (fetchedAircraft.length === 0) {\n                        alert(\"No aircraft found near your current location. Try increasing the radius.\");\n                        setIsGettingLocation(false);\n                        return;\n                    }\n                    // Process the aircraft data\n                    const adaptedAircraft = (0,_lib_utils_geofenceAdapter__WEBPACK_IMPORTED_MODULE_5__.adaptGeofenceAircraft)(fetchedAircraft);\n                    const enrichedAircraft = await (0,_lib_utils_geofenceEnricher__WEBPACK_IMPORTED_MODULE_6__.enrichGeofenceAircraft)(adaptedAircraft);\n                    // Save to local state\n                    setGeofenceAircraft(enrichedAircraft);\n                    // Clear existing aircraft data\n                    if (clearGeofenceData) {\n                        clearGeofenceData();\n                    }\n                    // Update the map with new aircraft\n                    updateGeofenceAircraft(enrichedAircraft);\n                    setIsGeofenceActive(true);\n                    // Center the map on user's location - SIMPLIFIED ZOOM LOGIC\n                    if (mapInstance) {\n                        // Don't modify zoom if it's already at an appropriate level\n                        const currentZoom = mapInstance.getZoom();\n                        const targetZoom = currentZoom <= 7 ? 9 : currentZoom;\n                        // Set the view directly to the user's location\n                        mapInstance.setView([\n                            latitude,\n                            longitude\n                        ], targetZoom);\n                        // Make sure the map reflects changes\n                        mapInstance.invalidateSize();\n                    }\n                    // If in geofence mode, ensure the filter mode is set correctly\n                    if (filterMode !== 'geofence' && filterMode !== 'both') {\n                        setFilterMode('geofence');\n                    }\n                } catch (error) {\n                    var _error_message;\n                    if (((_error_message = error.message) === null || _error_message === void 0 ? void 0 : _error_message.includes('rate limit')) || error.status === 429) {\n                        handleRateLimit(30);\n                        // Still update the location even if we couldn't get aircraft\n                        if (mapInstance) {\n                            mapInstance.setView([\n                                latitude,\n                                longitude\n                            ], 9);\n                            mapInstance.invalidateSize();\n                        }\n                    } else {\n                        throw error;\n                    }\n                }\n                // Close the dropdown after selection\n                setActiveDropdown(null);\n            }\n        } catch (error) {\n            console.error('Error getting user location:', error);\n            alert('Unable to access your location. Please make sure location services are enabled in your browser.');\n        } finally{\n            setIsGettingLocation(false);\n        }\n    };\n    const processGeofenceSearch = async ()=>{\n        if (!geofenceLocation) return;\n        // Check if rate limited\n        if (isRateLimited) {\n            alert(\"Rate limited. Please wait \".concat(rateLimitTimer || 30, \" seconds before searching again.\"));\n            return;\n        }\n        // Block API calls while doing geofence search in combined mode\n        if (filterMode === 'both') {\n            _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBlockAllApiCalls(true);\n            setBlockManufacturerApiCalls(true);\n        }\n        // Set loading state\n        setLocalLoading(true);\n        try {\n            console.log('Searching for aircraft near location: \"'.concat(geofenceLocation, '\"'));\n            // This will handle Postal codes, place names, addresses, POIs, etc.\n            let fetchedAircraft;\n            try {\n                fetchedAircraft = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__.getAircraftNearSearchedLocation)(geofenceLocation, geofenceRadius);\n            } catch (error) {\n                var _error_message;\n                if (((_error_message = error.message) === null || _error_message === void 0 ? void 0 : _error_message.includes('rate limit')) || error.status === 429) {\n                    const retryAfter = 30; // Default to 30 seconds if not specified\n                    handleRateLimit(retryAfter);\n                    setLocalLoading(false);\n                    return;\n                }\n                throw error;\n            }\n            // Get coordinates for the map\n            let locations;\n            try {\n                locations = await (0,_lib_services_geofencing__WEBPACK_IMPORTED_MODULE_4__.searchLocationWithMapbox)(geofenceLocation, 1);\n            } catch (error) {\n                console.error('Error searching location with Mapbox:', error);\n                // Continue with aircraft data if available\n                locations = [];\n            }\n            let coordinates = null;\n            if (locations.length > 0) {\n                coordinates = {\n                    lat: locations[0].lat,\n                    lng: locations[0].lng\n                };\n                // Save the formatted location name\n                setGeofenceLocation(locations[0].name);\n            } else if (fetchedAircraft.length > 0 && fetchedAircraft[0].latitude && fetchedAircraft[0].longitude) {\n                // Fallback to first aircraft position\n                coordinates = {\n                    lat: fetchedAircraft[0].latitude,\n                    lng: fetchedAircraft[0].longitude\n                };\n            }\n            if (fetchedAircraft.length === 0) {\n                alert(\"No aircraft found near \".concat(geofenceLocation, \". Try increasing the radius or searching in a different area.\"));\n                setLocalLoading(false);\n                return;\n            }\n            // Update state with the coordinates\n            if (coordinates) {\n                setGeofenceCoordinates(coordinates);\n                setGeofenceCenter(coordinates);\n                setGeofenceRadius(geofenceRadius);\n            }\n            if (!isGeofenceActive) {\n                toggleGeofence();\n            } else if (!coordinates) {\n                throw new Error('Could not determine coordinates for the location');\n            }\n            console.log(\"Found \".concat(fetchedAircraft.length, \" aircraft in the area, preparing for display...\"));\n            // Ensure the data is in the right format\n            const adaptedAircraft = fetchedAircraft[0].MANUFACTURER !== undefined ? fetchedAircraft // Already in the right format\n             : (0,_lib_utils_geofenceAdapter__WEBPACK_IMPORTED_MODULE_5__.adaptGeofenceAircraft)(fetchedAircraft); // Needs adaptation\n            // Enrich with static data\n            console.log('Enriching geofence aircraft with static data...');\n            const enrichedAircraft = await (0,_lib_utils_geofenceEnricher__WEBPACK_IMPORTED_MODULE_6__.enrichGeofenceAircraft)(adaptedAircraft);\n            // Save the FULL set to local state\n            setGeofenceAircraft(enrichedAircraft);\n            setIsGeofenceActive(true);\n            // Clear existing aircraft data\n            if (clearGeofenceData) {\n                clearGeofenceData();\n            }\n            // If we're in combined mode and have a manufacturer, apply the combined filter\n            if (filterMode === 'both' && selectedManufacturer) {\n                // Make sure API calls remain blocked\n                _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBlockAllApiCalls(true);\n                setBlockManufacturerApiCalls(true);\n                setTimeout(()=>{\n                    applyCombinedFilters();\n                }, 100);\n            } else {\n                // Just show all aircraft in the geofence\n                updateGeofenceAircraft(enrichedAircraft);\n                // Center the map - SIMPLIFIED ZOOM LOGIC\n                if (mapInstance && coordinates) {\n                    // Get current zoom level\n                    const currentZoom = mapInstance.getZoom();\n                    // Use appropriate zoom level based on current view\n                    const targetZoom = currentZoom <= 7 ? 9 : currentZoom;\n                    // Set view to the coordinates\n                    mapInstance.setView([\n                        coordinates.lat,\n                        coordinates.lng\n                    ], targetZoom);\n                    // Ensure map is updated\n                    mapInstance.invalidateSize();\n                }\n            }\n            // Close dropdown after search\n            setActiveDropdown(null);\n        } catch (error) {\n            var _error_message1;\n            console.error('Error in geofence search:', error);\n            if (((_error_message1 = error.message) === null || _error_message1 === void 0 ? void 0 : _error_message1.includes('rate limit')) || error.status === 429) {\n                handleRateLimit(30);\n            } else {\n                alert(\"Error: \".concat(error instanceof Error ? error.message : 'Unknown error occurred'));\n            }\n        } finally{\n            setLocalLoading(false);\n        }\n    };\n    /**\r\n   * STEP 3: Fix toggleGeofenceState to better handle manually clicking the button\r\n   */ const toggleGeofenceState = (enabled)=>{\n        console.log('toggleGeofenceState called with:', enabled);\n        console.log('Current geofenceCoordinates:', geofenceCoordinates);\n        if (enabled) {\n            // Check if we have valid coordinates\n            if (geofenceCoordinates && typeof geofenceCoordinates.lat === 'number' && typeof geofenceCoordinates.lng === 'number' && !isNaN(geofenceCoordinates.lat) && !isNaN(geofenceCoordinates.lng)) {\n                console.log('Valid coordinates found, enabling geofence');\n                // Set flags first\n                setGeofenceEnabled(true);\n                setIsGeofenceActive(true);\n                // Call context toggle function if available\n                if (typeof toggleGeofence === 'function') {\n                    toggleGeofence();\n                }\n                // Display aircraft if we have them\n                if (geofenceAircraft && geofenceAircraft.length > 0) {\n                    console.log(\"Showing \".concat(geofenceAircraft.length, \" aircraft in geofence\"));\n                    updateGeofenceAircraft(geofenceAircraft);\n                } else {\n                    // No aircraft data yet, trigger a search\n                    console.log('No aircraft data yet, triggering search');\n                    setTimeout(()=>{\n                        processGeofenceSearch();\n                    }, 100);\n                }\n            } else {\n                // No valid coordinates\n                console.warn('No valid coordinates, showing alert');\n                alert('Please set a location before enabling geofence.\\n\\nClick anywhere on the map to set a location.');\n                setGeofenceEnabled(false);\n                setIsGeofenceActive(false);\n            }\n        } else {\n            // Disabling geofence\n            console.log('Disabling geofence');\n            setGeofenceEnabled(false);\n            setIsGeofenceActive(false);\n            // Clear geofence data if function available\n            if (typeof clearGeofenceData === 'function') {\n                clearGeofenceData();\n            }\n        }\n    };\n    // Manufacturer filter methods\n    const selectManufacturerAndClose = (value)=>{\n        // Close dropdown\n        setActiveDropdown(null);\n        setManufacturerSearchTerm('');\n        // If clearing the selection\n        if (value === '') {\n            selectManufacturer(null);\n            return;\n        }\n        // Set the manufacturer selection\n        selectManufacturer(value);\n        // If region is already selected, fetch filtered data\n        if (activeRegion !== null) {\n            fetchAircraftByRegionAndManufacturer(activeRegion, value);\n        } else {\n            // Otherwise, just proceed with manufacturer-only filtering as before\n            fetchManufacturerData(value);\n        }\n    };\n    const fetchManufacturerData = (manufacturer)=>{\n        if (isRateLimited) {\n            console.log(\"Skipping data fetch - rate limited for \".concat(rateLimitTimer, \"s\"));\n            return;\n        }\n        console.log(\"Fetching data for manufacturer: \".concat(manufacturer));\n        try {\n            // If you have a context function for this, call it after a slight delay\n            if (typeof refreshPositions === 'function') {\n                // Apply a small delay to prevent overwhelming the API\n                setTimeout(()=>{\n                    refreshPositions().catch((error)=>{\n                        var _error_message;\n                        if (((_error_message = error.message) === null || _error_message === void 0 ? void 0 : _error_message.includes('rate limit')) || error.status === 429) {\n                            handleRateLimit(30);\n                        } else {\n                            console.error('Error fetching manufacturer data:', error);\n                        }\n                    });\n                }, 200);\n            }\n        } catch (error) {\n            var _error_message;\n            if (((_error_message = error.message) === null || _error_message === void 0 ? void 0 : _error_message.includes('rate limit')) || error.status === 429) {\n                handleRateLimit(30);\n            } else {\n                console.error('Error scheduling manufacturer data fetch:', error);\n            }\n        }\n    };\n    const fetchAircraftByRegionAndManufacturer = async function(region, manufacturer) {\n        let page = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 1, limit = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 500;\n        if (!region || !manufacturer) {\n            console.log('Both region and manufacturer must be selected');\n            return;\n        }\n        setLocalLoading(true);\n        try {\n            const response = await fetch(\"/api/tracking/filtered-aircraft?region=\".concat(region, \"&manufacturer=\").concat(encodeURIComponent(manufacturer), \"&page=\").concat(page, \"&limit=\").concat(limit));\n            const data = await response.json();\n            const aircraftData = data.aircraft || [];\n            if (!response.ok) {\n                throw new Error(\"API error: \".concat(response.statusText));\n            }\n            // Process the filtered aircraft data\n            if (aircraftData.length > 0) {\n                const extendedAircraft = aircraftData.map((aircraft)=>{\n                    var _aircraft_OPERATOR;\n                    var _aircraft_OPERATOR_toLowerCase_includes;\n                    return {\n                        ...aircraft,\n                        type: aircraft.TYPE_AIRCRAFT || 'Unknown',\n                        isGovernment: (_aircraft_OPERATOR_toLowerCase_includes = (_aircraft_OPERATOR = aircraft.OPERATOR) === null || _aircraft_OPERATOR === void 0 ? void 0 : _aircraft_OPERATOR.toLowerCase().includes('government')) !== null && _aircraft_OPERATOR_toLowerCase_includes !== void 0 ? _aircraft_OPERATOR_toLowerCase_includes : false,\n                        REGION: aircraft.REGION,\n                        zoomLevel: undefined\n                    };\n                });\n                // Update the map\n                updateGeofenceAircraft(extendedAircraft);\n            } else {\n                console.log(\"No aircraft found for manufacturer \".concat(manufacturer, \" in region \").concat(region));\n            }\n        } catch (error) {\n            console.error('Error fetching filtered aircraft:', error);\n        } finally{\n            setLocalLoading(false);\n        }\n    };\n    // Model selection methods\n    const handleModelSelect = (value)=>{\n        selectModel(value === '' ? null : value);\n        setActiveDropdown(null);\n        // If in combined mode, reapply the filter\n        if (filterMode === 'both' && isGeofenceActive && selectedManufacturer) {\n            setTimeout(()=>{\n                applyCombinedFilters();\n            }, 100);\n        }\n    };\n    // Combined filter methods\n    const applyCombinedFilters = ()=>{\n        if (!selectedManufacturer || !isGeofenceActive || geofenceAircraft.length === 0) {\n            return;\n        }\n        setLocalLoading(true);\n        try {\n            console.log(\"Filtering \".concat(geofenceAircraft.length, \" aircraft by \").concat(selectedManufacturer));\n            // Filter the aircraft by manufacturer\n            let filteredAircraft = geofenceAircraft.filter((aircraft)=>{\n                var _aircraft_MANUFACTURER;\n                return ((_aircraft_MANUFACTURER = aircraft.MANUFACTURER) === null || _aircraft_MANUFACTURER === void 0 ? void 0 : _aircraft_MANUFACTURER.toLowerCase()) === selectedManufacturer.toLowerCase();\n            });\n            // Further filter by model if selected\n            if (selectedModel) {\n                filteredAircraft = filteredAircraft.filter((aircraft)=>{\n                    var _aircraft_MODEL;\n                    return ((_aircraft_MODEL = aircraft.MODEL) === null || _aircraft_MODEL === void 0 ? void 0 : _aircraft_MODEL.toLowerCase()) === selectedModel.toLowerCase();\n                });\n            }\n            console.log(\"Found \".concat(filteredAircraft.length, \" matching aircraft\"));\n            if (filteredAircraft.length === 0) {\n                alert(\"No \".concat(selectedManufacturer, \" aircraft found in this area.\"));\n                return;\n            }\n            // Clear display data\n            if (clearGeofenceData) {\n                clearGeofenceData();\n            }\n            // Update the display\n            updateGeofenceAircraft(filteredAircraft);\n        } catch (error) {\n            console.error('Error filtering aircraft:', error);\n        } finally{\n            setLocalLoading(false);\n        }\n    };\n    // Reset all filters\n    const clearAllFilters = ()=>{\n        console.log('Clearing all filters...');\n        // 1. Reset filter mode\n        setFilterMode('manufacturer');\n        // 2. Unblock API calls that might have been blocked\n        _lib_services_openSkyTrackingService__WEBPACK_IMPORTED_MODULE_3__[\"default\"].setBlockAllApiCalls(false);\n        setBlockManufacturerApiCalls(false);\n        setIsManufacturerApiBlocked(false);\n        // 3. Clear manufacturer selection\n        selectManufacturer(null);\n        selectModel(null);\n        // 4. Clear geofence\n        setGeofenceLocation('');\n        setGeofenceCoordinates(null);\n        setGeofenceAircraft([]);\n        setGeofenceEnabled(false);\n        setIsGeofenceActive(false);\n        if (typeof clearGeofence === 'function') {\n            clearGeofence();\n        }\n        if (typeof clearGeofenceData === 'function') {\n            clearGeofenceData();\n        }\n        // 5. Reset owner filters to select all\n        setOwnerFilters([\n            ...allOwnerTypes\n        ]);\n        // 6. Clear region filter properly\n        setActiveRegion(null);\n        setSelectedRegion(_types_base__WEBPACK_IMPORTED_MODULE_1__.RegionCode.GLOBAL);\n        // Clear region outline from map\n        if (regionOutline) {\n            try {\n                // Handle different possible object structures\n                if (typeof regionOutline.remove === 'function') {\n                    regionOutline.remove();\n                } else if (regionOutline.rectangle && typeof regionOutline.rectangle.remove === 'function') {\n                    regionOutline.rectangle.remove();\n                }\n                // Clear any labels associated with the region\n                if (regionOutline.label && typeof regionOutline.label.remove === 'function') {\n                    regionOutline.label.remove();\n                }\n            } catch (error) {\n                console.error('Error removing region outline:', error);\n            }\n            // Always reset the region outline state\n            setRegionOutline(null);\n        }\n        // 7. Reset map view to global\n        if (mapInstance) {\n            // Use the predefined center and zoom level from your map config\n            mapInstance.setView(_config_map__WEBPACK_IMPORTED_MODULE_8__.MAP_CONFIG.CENTER, _config_map__WEBPACK_IMPORTED_MODULE_8__.MAP_CONFIG.DEFAULT_ZOOM);\n            mapInstance.invalidateSize();\n        }\n        // 8. Reset to initial aircraft data\n        if (typeof reset === 'function') {\n            reset();\n        } else if (typeof fullRefresh === 'function') {\n            fullRefresh();\n        }\n        // 9. Close any open dropdown\n        setActiveDropdown(null);\n        // 10. Reset rate limiting states\n        setIsRateLimited(false);\n        setRateLimitTimer(null);\n        // 11. Clear combined mode state\n        setCombinedModeReady(false);\n        // 12. Reset search terms\n        setManufacturerSearchTerm('');\n        // 13. Dispatch a custom event that other components can listen for\n        const clearEvent = new CustomEvent('ribbon-filters-cleared');\n        document.dispatchEvent(clearEvent);\n        console.log('All filters cleared successfully');\n    };\n    // Calculate combined loading state\n    const combinedLoading = localLoading;\n    return {\n        // State\n        filterMode,\n        activeDropdown,\n        selectedManufacturer,\n        selectedModel,\n        geofenceLocation,\n        geofenceRadius,\n        isGeofenceActive,\n        geofenceCoordinates,\n        activeRegion,\n        ownerFilters,\n        allOwnerTypes,\n        manufacturerSearchTerm,\n        combinedLoading,\n        isGettingLocation,\n        dropdownRefs,\n        localLoading,\n        isRateLimited,\n        selectedRegion,\n        isRefreshing,\n        isGeofencePlacementMode: false,\n        // Methods\n        toggleDropdown,\n        toggleFilterMode,\n        selectManufacturerAndClose,\n        handleModelSelect,\n        getUserLocation,\n        processGeofenceSearch,\n        handleOwnerFilterChange,\n        handleRegionSelect,\n        setManufacturerSearchTerm,\n        setGeofenceLocation,\n        setGeofenceRadius,\n        toggleGeofenceState,\n        clearAllFilters,\n        applyCombinedFilters,\n        getAircraftOwnerType,\n        refreshWithFilters: ()=>{\n            // Implement refresh logic here\n            if (typeof refreshPositions === 'function') {\n                refreshPositions().catch((error)=>{\n                    console.error('Error refreshing positions:', error);\n                });\n            }\n        },\n        setActiveDropdown,\n        setGeofenceCoordinates,\n        setGeofenceCenter,\n        updateGeofenceAircraft\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL2NvbXBvbmVudHMvdHJhY2tpbmcvaG9va3MvdXNlRmlsdGVyTG9naWMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7QUFDMUI7QUFDZ0I7QUFFNEI7QUFDSztBQUt4QztBQUNvQztBQUNIO0FBQ0U7QUFDYjtBQUs1QjtBQVd0QixTQUFTaUI7SUFDZCxrQ0FBa0M7SUFDbEMsTUFBTSxFQUNKQyxvQkFBb0IsRUFDcEJDLGFBQWEsRUFDYkMsV0FBVyxFQUNYQyxrQkFBa0IsRUFDbEJDLFdBQVcsRUFDWEMsS0FBSyxFQUNMQyxXQUFXLEVBQ1hDLGdCQUFnQixFQUNoQkMsV0FBVyxFQUNYQyxrQkFBa0IsRUFDbEJDLGlCQUFpQixFQUNqQkMsc0JBQXNCLEVBQ3RCQyx5QkFBeUIsRUFDekJDLDRCQUE0QixFQUM1QkMsd0JBQXdCLEVBQ3hCQywyQkFBMkIsRUFDM0JDLGNBQWMsRUFDZEMsaUJBQWlCLEVBQ2pCQyxjQUFjLEVBQ2RDLGFBQWEsRUFDYkMsaUJBQWlCLEVBQ2xCLEdBQUdqQyxrRkFBcUJBO0lBRXpCLHVCQUF1QjtJQUN2QixNQUFNLEVBQUVrQyxrQkFBa0IsRUFBRSxHQUFHMUIscUVBQWNBO0lBRTdDLGNBQWM7SUFDZCxNQUFNLENBQUMyQixjQUFjQyxnQkFBZ0IsR0FBR3pDLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQzBDLFlBQVlDLGNBQWMsR0FBRzNDLCtDQUFRQSxDQUFvQjtJQUNoRSxNQUFNLENBQUM0QyxnQkFBZ0JDLGtCQUFrQixHQUFHN0MsK0NBQVFBLENBQWdCO0lBQ3BFLE1BQU0sQ0FBQzhDLHdCQUF3QkMsMEJBQTBCLEdBQUcvQywrQ0FBUUEsQ0FBQztJQUNyRSxNQUFNLENBQUNnRCxjQUFjQyxnQkFBZ0IsR0FBR2pELCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ2tELGVBQWVDLGlCQUFpQixHQUFHbkQsK0NBQVFBLENBQUM7SUFDbkQsTUFBTSxDQUFDb0QsZ0JBQWdCQyxrQkFB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QUQ7UUFFQXVHLG9CQUFvQjtZQUNsQiwrQkFBK0I7WUFDL0IsSUFBSSxPQUFPdk4scUJBQXFCLFlBQVk7Z0JBQzFDQSxtQkFBbUI2TCxLQUFLLENBQUMsQ0FBQ2xHO29CQUN4QnhCLFFBQVF3QixLQUFLLENBQUMsK0JBQStCQTtnQkFDL0M7WUFDRjtRQUNGO1FBQ0F2RTtRQUVBZ0I7UUFDQTFCO1FBQ0FOO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxzYXRob1xcRG9jdW1lbnRzXFxQcm9qZWN0c1xcYWlyY3JhZnQtdHJhY2tpbmdcXGNvbXBvbmVudHNcXHRyYWNraW5nXFxob29rc1xcdXNlRmlsdGVyTG9naWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZVJlZiwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBSZWdpb25Db2RlIH0gZnJvbSAnQC90eXBlcy9iYXNlJztcclxuaW1wb3J0IHR5cGUgeyBFeHRlbmRlZEFpcmNyYWZ0IH0gZnJvbSAnQC90eXBlcy9iYXNlJztcclxuaW1wb3J0IHsgdXNlRW5oYW5jZWRNYXBDb250ZXh0IH0gZnJvbSAnLi4vY29udGV4dC9FbmhhbmNlZE1hcENvbnRleHQnO1xyXG5pbXBvcnQgb3BlblNreVRyYWNraW5nU2VydmljZSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9vcGVuU2t5VHJhY2tpbmdTZXJ2aWNlJztcclxuaW1wb3J0IHtcclxuICBnZXRBaXJjcmFmdE5lYXJMb2NhdGlvbixcclxuICBzZWFyY2hMb2NhdGlvbldpdGhNYXBib3gsXHJcbiAgZ2V0QWlyY3JhZnROZWFyU2VhcmNoZWRMb2NhdGlvbixcclxufSBmcm9tICdAL2xpYi9zZXJ2aWNlcy9nZW9mZW5jaW5nJztcclxuaW1wb3J0IGdldExvY2F0aW9uTmFtZUZyb21Db29yZGluYXRlcyBmcm9tICdAL2xpYi9zZXJ2aWNlcy9nZW9mZW5jaW5nJztcclxuaW1wb3J0IHsgYWRhcHRHZW9mZW5jZUFpcmNyYWZ0IH0gZnJvbSAnQC9saWIvdXRpbHMvZ2VvZmVuY2VBZGFwdGVyJztcclxuaW1wb3J0IHsgZW5yaWNoR2VvZmVuY2VBaXJjcmFmdCB9IGZyb20gJ0AvbGliL3V0aWxzL2dlb2ZlbmNlRW5yaWNoZXInO1xyXG5pbXBvcnQgeyB1c2VHZW9sb2NhdGlvbiB9IGZyb20gJy4uL2hvb2tzL3VzZUdlb2xvY2F0aW9uJztcclxuaW1wb3J0IHtcclxuICBNQVBfQ09ORklHLFxyXG4gIGdldEJvdW5kc0J5UmVnaW9uLFxyXG4gIGdldFpvb21MZXZlbEZvclJlZ2lvbixcclxufSBmcm9tICcuLi8uLi8uLi9jb25maWcvbWFwJztcclxuXHJcbnR5cGUgTWFwR2VvZmVuY2VDbGlja0V2ZW50ID0gQ3VzdG9tRXZlbnQ8eyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXIgfT47XHJcblxyXG5leHBvcnQgdHlwZSBGaWx0ZXJNb2RlID1cclxuICB8ICdtYW51ZmFjdHVyZXInXHJcbiAgfCAnZ2VvZmVuY2UnXHJcbiAgfCAnYm90aCdcclxuICB8ICdvd25lcidcclxuICB8ICdyZWdpb24nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVzZUZpbHRlckxvZ2ljKCkge1xyXG4gIC8vIEdldCBjb250ZXh0IHN0YXRlIGFuZCBmdW5jdGlvbnNcclxuICBjb25zdCB7XHJcbiAgICBzZWxlY3RlZE1hbnVmYWN0dXJlcixcclxuICAgIHNlbGVjdGVkTW9kZWwsXHJcbiAgICB0b3RhbEFjdGl2ZSxcclxuICAgIHNlbGVjdE1hbnVmYWN0dXJlcixcclxuICAgIHNlbGVjdE1vZGVsLFxyXG4gICAgcmVzZXQsXHJcbiAgICBmdWxsUmVmcmVzaCxcclxuICAgIHJlZnJlc2hQb3NpdGlvbnMsXHJcbiAgICBtYXBJbnN0YW5jZSxcclxuICAgIHVwZGF0ZUFpcmNyYWZ0RGF0YSxcclxuICAgIGNsZWFyR2VvZmVuY2VEYXRhLFxyXG4gICAgdXBkYXRlR2VvZmVuY2VBaXJjcmFmdCxcclxuICAgIGJsb2NrTWFudWZhY3R1cmVyQXBpQ2FsbHMsXHJcbiAgICBzZXRCbG9ja01hbnVmYWN0dXJlckFwaUNhbGxzLFxyXG4gICAgaXNNYW51ZmFjdHVyZXJBcGlCbG9ja2VkLFxyXG4gICAgc2V0SXNNYW51ZmFjdHVyZXJBcGlCbG9ja2VkLFxyXG4gICAgZ2VvZmVuY2VDZW50ZXIsXHJcbiAgICBzZXRHZW9mZW5jZUNlbnRlcixcclxuICAgIHRvZ2dsZUdlb2ZlbmNlLFxyXG4gICAgY2xlYXJHZW9mZW5jZSxcclxuICAgIGRpc3BsYXllZEFpcmNyYWZ0LFxyXG4gIH0gPSB1c2VFbmhhbmNlZE1hcENvbnRleHQoKTtcclxuXHJcbiAgLy8gR2V0IGdlb2xvY2F0aW9uIGhvb2tcclxuICBjb25zdCB7IGdldEN1cnJlbnRQb3NpdGlvbiB9ID0gdXNlR2VvbG9jYXRpb24oKTtcclxuXHJcbiAgLy8gTG9jYWwgc3RhdGVcclxuICBjb25zdCBbbG9jYWxMb2FkaW5nLCBzZXRMb2NhbExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtmaWx0ZXJNb2RlLCBzZXRGaWx0ZXJNb2RlXSA9IHVzZVN0YXRlPEZpbHRlck1vZGUgfCBudWxsPihudWxsKTtcclxuICBjb25zdCBbYWN0aXZlRHJvcGRvd24sIHNldEFjdGl2ZURyb3Bkb3duXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFttYW51ZmFjdHVyZXJTZWFyY2hUZXJtLCBzZXRNYW51ZmFjdHVyZXJTZWFyY2hUZXJtXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBbaXNSZWZyZXNoaW5nLCBzZXRJc1JlZnJlc2hpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpc1JhdGVMaW1pdGVkLCBzZXRJc1JhdGVMaW1pdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbcmF0ZUxpbWl0VGltZXIsIHNldFJhdGVMaW1pdFRpbWVyXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xyXG5cclxuICAvLyBHZW9mZW5jZSBzdGF0ZVxyXG4gIGNvbnN0IFtpc0dldHRpbmdMb2NhdGlvbiwgc2V0SXNHZXR0aW5nTG9jYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtnZW9mZW5jZUxvY2F0aW9uLCBzZXRHZW9mZW5jZUxvY2F0aW9uXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xyXG4gIGNvbnN0IFtnZW9mZW5jZVJhZGl1cywgc2V0R2VvZmVuY2VSYWRpdXNdID0gdXNlU3RhdGU8bnVtYmVyPigyNSk7XHJcbiAgY29uc3QgW2dlb2ZlbmNlQ29vcmRpbmF0ZXMsIHNldEdlb2ZlbmNlQ29vcmRpbmF0ZXNdID0gdXNlU3RhdGU8e1xyXG4gICAgbGF0OiBudW1iZXI7XHJcbiAgICBsbmc6IG51bWJlcjtcclxuICB9IHwgbnVsbD4obnVsbCk7XHJcbiAgY29uc3QgW2dlb2ZlbmNlQWlyY3JhZnQsIHNldEdlb2ZlbmNlQWlyY3JhZnRdID0gdXNlU3RhdGU8RXh0ZW5kZWRBaXJjcmFmdFtdPihcclxuICAgIFtdXHJcbiAgKTtcclxuICBjb25zdCBbZ2VvZmVuY2VFbmFibGVkLCBzZXRHZW9mZW5jZUVuYWJsZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtpc0dlb2ZlbmNlQWN0aXZlLCBzZXRJc0dlb2ZlbmNlQWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbaXNTZWFyY2hSZWFkeSwgc2V0SXNTZWFyY2hSZWFkeV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XHJcblxyXG4gIC8vIFJlZ2lvbiBzdGF0ZVxyXG4gIGNvbnN0IFthY3RpdmVSZWdpb24sIHNldEFjdGl2ZVJlZ2lvbl0gPSB1c2VTdGF0ZTxSZWdpb25Db2RlIHwgc3RyaW5nIHwgbnVsbD4oXHJcbiAgICBudWxsXHJcbiAgKTtcclxuICBjb25zdCBbcmVnaW9uT3V0bGluZSwgc2V0UmVnaW9uT3V0bGluZV0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xyXG4gIGNvbnN0IFtzZWxlY3RlZFJlZ2lvbiwgc2V0U2VsZWN0ZWRSZWdpb25dID0gdXNlU3RhdGU8bnVtYmVyPihcclxuICAgIFJlZ2lvbkNvZGUuR0xPQkFMXHJcbiAgKTtcclxuXHJcbiAgLy8gQ29tYmluZWQgbW9kZSBzdGF0ZVxyXG4gIGNvbnN0IFtjb21iaW5lZE1vZGVSZWFkeSwgc2V0Q29tYmluZWRNb2RlUmVhZHldID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xyXG5cclxuICAvLyBPd25lciBmaWx0ZXIgc3RhdGVcclxuICBjb25zdCBhbGxPd25lclR5cGVzID0gW1xyXG4gICAgJ2luZGl2aWR1YWwnLFxyXG4gICAgJ3BhcnRuZXJzaGlwJyxcclxuICAgICdjb3JwLW93bmVyJyxcclxuICAgICdjby1vd25lZCcsXHJcbiAgICAnbGxjJyxcclxuICAgICdub24tY2l0aXplbi1jb3JwJyxcclxuICAgICdhaXJsaW5lJyxcclxuICAgICdmcmVpZ2h0JyxcclxuICAgICdtZWRpY2FsJyxcclxuICAgICdtZWRpYScsXHJcbiAgICAnaGlzdG9yaWNhbCcsXHJcbiAgICAnZmx5aW5nLWNsdWInLFxyXG4gICAgJ2VtZXJnZW5jeScsXHJcbiAgICAnbG9jYWwtZ292dCcsXHJcbiAgICAnZWR1Y2F0aW9uJyxcclxuICAgICdmZWRlcmFsLWdvdnQnLFxyXG4gICAgJ2ZsaWdodC1zY2hvb2wnLFxyXG4gICAgJ2xlYXNpbmctY29ycCcsXHJcbiAgICAnbWlsaXRhcnknLFxyXG4gICAgJ3Vua25vd24nLFxyXG4gIF07XHJcblxyXG4gIGNvbnN0IFtvd25lckZpbHRlcnMsIHNldE93bmVyRmlsdGVyc10gPSB1c2VTdGF0ZTxzdHJpbmdbXT4oW1xyXG4gICAgLi4uYWxsT3duZXJUeXBlcyxcclxuICBdKTtcclxuXHJcbiAgLy8gUmVmcyBmb3IgZHJvcGRvd24gaGFuZGxpbmdcclxuICBjb25zdCBkcm9wZG93blJlZnMgPSB7XHJcbiAgICBmaWx0ZXI6IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCksXHJcbiAgICBtYW51ZmFjdHVyZXI6IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCksXHJcbiAgICBtb2RlbDogdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKSxcclxuICAgIGxvY2F0aW9uOiB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpLFxyXG4gICAgcmVnaW9uOiB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpLFxyXG4gICAgb3duZXI6IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCksXHJcbiAgICBhY3Rpb25zOiB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpLFxyXG4gIH07XHJcblxyXG4gIC8vIEVmZmVjdHNcclxuXHJcbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChnZW9mZW5jZUNvb3JkaW5hdGVzKSB7XHJcbiAgICAgIHNldElzU2VhcmNoUmVhZHkodHJ1ZSk7XHJcbiAgICB9XHJcbiAgfSwgW2dlb2ZlbmNlQ29vcmRpbmF0ZXNdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChpc1JhdGVMaW1pdGVkICYmIHJhdGVMaW1pdFRpbWVyKSB7XHJcbiAgICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgc2V0SXNSYXRlTGltaXRlZChmYWxzZSk7XHJcbiAgICAgICAgc2V0UmF0ZUxpbWl0VGltZXIobnVsbCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1JhdGUgbGltaXQgdGltZXIgZXhwaXJlZCwgcmVzdW1pbmcgQVBJIGNhbGxzJyk7XHJcbiAgICAgIH0sIHJhdGVMaW1pdFRpbWVyICogMTAwMCk7XHJcblxyXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICAgIH1cclxuICB9LCBbaXNSYXRlTGltaXRlZCwgcmF0ZUxpbWl0VGltZXJdKTtcclxuXHJcbiAgLy8gRWZmZWN0IHRvIHN5bmMgZ2VvZmVuY2Ugc3RhdGVcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gVXBkYXRlIGludGVybmFsIHN0YXRlIHdoZW4gZ2VvZmVuY2UgaXMgdG9nZ2xlZCBleHRlcm5hbGx5XHJcbiAgICBpZiAoaXNHZW9mZW5jZUFjdGl2ZSAhPT0gZ2VvZmVuY2VFbmFibGVkKSB7XHJcbiAgICAgIHNldEdlb2ZlbmNlRW5hYmxlZChpc0dlb2ZlbmNlQWN0aXZlKTtcclxuICAgIH1cclxuICB9LCBbaXNHZW9mZW5jZUFjdGl2ZV0pO1xyXG5cclxuICAvLyBDbG9zZSBkcm9wZG93biB3aGVuIGNsaWNraW5nIG91dHNpZGVcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3QgaGFuZGxlQ2xpY2tPdXRzaWRlID0gKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgIC8vIENoZWNrIGlmIGNsaWNrIGlzIG91dHNpZGUgb2YgYWxsIGRyb3Bkb3duc1xyXG4gICAgICBjb25zdCBpc091dHNpZGVBbGwgPSBPYmplY3QudmFsdWVzKGRyb3Bkb3duUmVmcykuZXZlcnkoXHJcbiAgICAgICAgKHJlZikgPT4gIXJlZi5jdXJyZW50IHx8ICFyZWYuY3VycmVudC5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmIChpc091dHNpZGVBbGwpIHtcclxuICAgICAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBoYW5kbGVDbGlja091dHNpZGUpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaGFuZGxlQ2xpY2tPdXRzaWRlKTtcclxuICAgIH07XHJcbiAgfSwgW10pO1xyXG5cclxuICAvLyBDbGVhbiB1cCByZWdpb24gb3V0bGluZSB3aGVuIGNvbXBvbmVudCB1bm1vdW50c1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBpZiAocmVnaW9uT3V0bGluZSkge1xyXG4gICAgICAgIHJlZ2lvbk91dGxpbmUucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSwgW3JlZ2lvbk91dGxpbmVdKTtcclxuXHJcbiAgLy8gRWZmZWN0IHRvIGhhbmRsZSBtYXAgY2xpY2sgZm9yIGdlb2ZlbmNlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZU1hcEdlb2ZlbmNlQ2xpY2sgPSBhc3luYyAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ2FzdCB0aGUgZXZlbnQgdG8gdGhlIHByb3BlciB0eXBlXHJcbiAgICAgICAgY29uc3QgY3VzdG9tRXZlbnQgPSBldmVudCBhcyBDdXN0b21FdmVudDx7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlciB9PjtcclxuICAgICAgICBjb25zdCB7IGxhdCwgbG5nIH0gPSBjdXN0b21FdmVudC5kZXRhaWw7XHJcblxyXG4gICAgICAgIC8vIEZpcnN0IHVwZGF0ZSBjb29yZGluYXRlcyBpbW1lZGlhdGVseVxyXG4gICAgICAgIHNldEdlb2ZlbmNlQ29vcmRpbmF0ZXMoeyBsYXQsIGxuZyB9KTtcclxuXHJcbiAgICAgICAgLy8gVGhlbiBzdGFydCBhbiBhc3luYyBvcGVyYXRpb24gdG8gZ2V0IHRoZSBsb2NhdGlvbiBuYW1lXHJcbiAgICAgICAgY29uc29sZS5sb2coYEdldHRpbmcgbG9jYXRpb24gbmFtZSBmb3I6ICR7bGF0fSwgJHtsbmd9YCk7XHJcblxyXG4gICAgICAgIC8vIFRlbXBvcmFyaWx5IHNob3cgY29vcmRpbmF0ZXMgd2hpbGUgZmV0Y2hpbmcgdGhlIG5hbWVcclxuICAgICAgICBzZXRHZW9mZW5jZUxvY2F0aW9uKGAke2xhdC50b0ZpeGVkKDYpfSwgJHtsbmcudG9GaXhlZCg2KX1gKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IHRoZSBmcmllbmRseSBuYW1lIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgY29uc3QgbG9jYXRpb25OYW1lID0gYXdhaXQgZ2V0TG9jYXRpb25OYW1lRnJvbUNvb3JkaW5hdGVzKGxhdCwgbG5nKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgR290IGxvY2F0aW9uIG5hbWU6ICR7bG9jYXRpb25OYW1lfWApO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgd2l0aCB0aGUgZnJpZW5kbHkgbmFtZSBvbmNlIHdlIGhhdmUgaXRcclxuICAgICAgICBpZiAobG9jYXRpb25OYW1lICE9PSBudWxsKSB7XHJcbiAgICAgICAgICBzZXRHZW9mZW5jZUxvY2F0aW9uKGxvY2F0aW9uTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBPcGVuIHRoZSBsb2NhdGlvbiBkcm9wZG93biBpZiBuZWVkZWRcclxuICAgICAgICBpZiAoYWN0aXZlRHJvcGRvd24gIT09ICdsb2NhdGlvbicpIHtcclxuICAgICAgICAgIHNldEFjdGl2ZURyb3Bkb3duKCdsb2NhdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoYW5kbGluZyBtYXAgY2xpY2s6JywgZXJyb3IpO1xyXG4gICAgICAgIC8vIEtlZXAgdGhlIGNvb3JkaW5hdGVzIGRpc3BsYXkgaWYgdGhlcmUgd2FzIGFuIGVycm9yXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gQWRkIHRoZSBldmVudCBsaXN0ZW5lciAtIHVzZSB0aGUgc3RhbmRhcmQgZXZlbnQgbGlzdGVuZXIgcGF0dGVyblxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgJ21hcC1nZW9mZW5jZS1jbGljaycsXHJcbiAgICAgIGhhbmRsZU1hcEdlb2ZlbmNlQ2xpY2sgYXMgRXZlbnRMaXN0ZW5lclxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBDbGVhbiB1cFxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAnbWFwLWdlb2ZlbmNlLWNsaWNrJyxcclxuICAgICAgICBoYW5kbGVNYXBHZW9mZW5jZUNsaWNrIGFzIEV2ZW50TGlzdGVuZXJcclxuICAgICAgKTtcclxuICAgIH07XHJcbiAgfSwgW1xyXG4gICAgc2V0R2VvZmVuY2VMb2NhdGlvbixcclxuICAgIHNldEdlb2ZlbmNlQ29vcmRpbmF0ZXMsXHJcbiAgICBzZXRBY3RpdmVEcm9wZG93bixcclxuICAgIGFjdGl2ZURyb3Bkb3duLFxyXG4gIF0pO1xyXG5cclxuICAvLyBNYWluIG1ldGhvZHNcclxuICBjb25zdCB0b2dnbGVEcm9wZG93biA9IChkcm9wZG93bjogc3RyaW5nLCBldmVudDogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xyXG4gICAgaWYgKGFjdGl2ZURyb3Bkb3duID09PSBkcm9wZG93bikge1xyXG4gICAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNldEFjdGl2ZURyb3Bkb3duKGRyb3Bkb3duKTtcclxuICAgIH1cclxuICAgIC8vIFByZXZlbnQgZXZlbnRzIGZyb20gYnViYmxpbmcgdXBcclxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZVJhdGVMaW1pdCA9IChyZXRyeUFmdGVyOiBudW1iZXIgPSAzMCkgPT4ge1xyXG4gICAgc2V0SXNSYXRlTGltaXRlZCh0cnVlKTtcclxuICAgIHNldFJhdGVMaW1pdFRpbWVyKHJldHJ5QWZ0ZXIpO1xyXG4gICAgY29uc29sZS5sb2coYFJhdGUgbGltaXRlZCBieSBBUEkuIFJldHJ5IGFmdGVyICR7cmV0cnlBZnRlcn1zYCk7XHJcblxyXG4gICAgLy8gQmxvY2sgYWxsIEFQSSBjYWxsc1xyXG4gICAgb3BlblNreVRyYWNraW5nU2VydmljZS5zZXRCbG9ja0FsbEFwaUNhbGxzKHRydWUpO1xyXG4gICAgc2V0QmxvY2tNYW51ZmFjdHVyZXJBcGlDYWxscyh0cnVlKTtcclxuXHJcbiAgICAvLyBTaG93IG5vdGlmaWNhdGlvbiB0byB1c2VyXHJcbiAgICBpZiAocmV0cnlBZnRlciA+IDApIHtcclxuICAgICAgYWxlcnQoXHJcbiAgICAgICAgYEFpcmNyYWZ0IGRhdGEgcmVmcmVzaCByYXRlIGxpbWl0ZWQuIFBsZWFzZSB3YWl0ICR7cmV0cnlBZnRlcn0gc2Vjb25kcyBiZWZvcmUgdHJ5aW5nIGFnYWluLmBcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBUb2dnbGUgZmlsdGVyIG1vZGVcclxuICAgKi9cclxuICBjb25zdCB0b2dnbGVGaWx0ZXJNb2RlID0gKG1vZGU6IEZpbHRlck1vZGUpID0+IHtcclxuICAgIHNldEZpbHRlck1vZGUobW9kZSk7XHJcbiAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTtcclxuXHJcbiAgICAvLyBBcHBseSBhcHByb3ByaWF0ZSBmaWx0ZXJzIGJhc2VkIG9uIG5ldyBtb2RlXHJcbiAgICBpZiAobW9kZSA9PT0gJ3JlZ2lvbicpIHtcclxuICAgICAgLy8gQmxvY2sgQVBJIGNhbGxzIGluIHJlZ2lvbiBtb2RlXHJcbiAgICAgIG9wZW5Ta3lUcmFja2luZ1NlcnZpY2Uuc2V0QmxvY2tBbGxBcGlDYWxscyh0cnVlKTtcclxuXHJcbiAgICAgIC8vIEFwcGx5IHJlZ2lvbiBmaWx0ZXJpbmcgaWYgd2UgYWxyZWFkeSBoYXZlIGRhdGFcclxuICAgICAgaWYgKGRpc3BsYXllZEFpcmNyYWZ0ICYmIGRpc3BsYXllZEFpcmNyYWZ0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmaWx0ZXJBaXJjcmFmdEJ5UmVnaW9uKHNlbGVjdGVkUmVnaW9uLnRvU3RyaW5nKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDbGVhciBtYW51ZmFjdHVyZXIgc2VsZWN0aW9uIGZyb20gdGhlIFVJXHJcbiAgICAgIHNlbGVjdE1hbnVmYWN0dXJlcihudWxsKTtcclxuICAgICAgc2VsZWN0TW9kZWwobnVsbCk7XHJcblxyXG4gICAgICAvLyBJZiBnZW9mZW5jZSBpcyBhY3RpdmUsIHJlc3RvcmUgdGhlIGZ1bGwgZ2VvZmVuY2UgZGF0YVxyXG4gICAgICBpZiAoZ2VvZmVuY2VDb29yZGluYXRlcyAmJiBnZW9mZW5jZUFpcmNyYWZ0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICB1cGRhdGVHZW9mZW5jZUFpcmNyYWZ0KGdlb2ZlbmNlQWlyY3JhZnQpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdvd25lcicpIHtcclxuICAgICAgLy8gRmlsdGVyIGRpc3BsYXllZCBhaXJjcmFmdCBieSBvd25lciB0eXBlXHJcbiAgICAgIGlmIChkaXNwbGF5ZWRBaXJjcmFmdCAmJiBkaXNwbGF5ZWRBaXJjcmFmdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgLy8gRmlyc3QgZmlsdGVyIGZvciB2YWxpZCBjb29yZGluYXRlc1xyXG4gICAgICAgIGNvbnN0IGFpcmNyYWZ0V2l0aFZhbGlkQ29vcmRzID0gZGlzcGxheWVkQWlyY3JhZnQuZmlsdGVyKFxyXG4gICAgICAgICAgKHBsYW5lKSA9PlxyXG4gICAgICAgICAgICB0eXBlb2YgcGxhbmUubGF0aXR1ZGUgPT09ICdudW1iZXInICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBwbGFuZS5sb25naXR1ZGUgPT09ICdudW1iZXInICYmXHJcbiAgICAgICAgICAgICFpc05hTihwbGFuZS5sYXRpdHVkZSkgJiZcclxuICAgICAgICAgICAgIWlzTmFOKHBsYW5lLmxvbmdpdHVkZSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBBcHBseSBvd25lciB0eXBlIGZpbHRlclxyXG4gICAgICAgIGxldCBmaWx0ZXJlZEJ5T3duZXIgPVxyXG4gICAgICAgICAgb3duZXJGaWx0ZXJzLmxlbmd0aCA9PT0gMFxyXG4gICAgICAgICAgICA/IGFpcmNyYWZ0V2l0aFZhbGlkQ29vcmRzXHJcbiAgICAgICAgICAgIDogYWlyY3JhZnRXaXRoVmFsaWRDb29yZHMuZmlsdGVyKChhaXJjcmFmdCkgPT5cclxuICAgICAgICAgICAgICAgIG93bmVyRmlsdGVycy5pbmNsdWRlcyhnZXRBaXJjcmFmdE93bmVyVHlwZShhaXJjcmFmdCkpXHJcbiAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGRpc3BsYXkgd2l0aCBmaWx0ZXJlZCBhaXJjcmFmdFxyXG4gICAgICAgIGlmIChjbGVhckdlb2ZlbmNlRGF0YSkge1xyXG4gICAgICAgICAgY2xlYXJHZW9mZW5jZURhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlR2VvZmVuY2VBaXJjcmFmdChmaWx0ZXJlZEJ5T3duZXIpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdib3RoJykge1xyXG4gICAgICAvLyBCb3RoIG1vZGUgLSBCTE9DSyBBUEkgQ0FMTFNcclxuICAgICAgb3BlblNreVRyYWNraW5nU2VydmljZS5zZXRCbG9ja0FsbEFwaUNhbGxzKHRydWUpO1xyXG5cclxuICAgICAgaWYgKFxyXG4gICAgICAgIHNlbGVjdGVkTWFudWZhY3R1cmVyICYmXHJcbiAgICAgICAgaXNHZW9mZW5jZUFjdGl2ZSAmJlxyXG4gICAgICAgIGdlb2ZlbmNlQWlyY3JhZnQubGVuZ3RoID4gMFxyXG4gICAgICApIHtcclxuICAgICAgICBhcHBseUNvbWJpbmVkRmlsdGVycygpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIElmIG9uZSBpcyBtaXNzaW5nLCBwcm9tcHQgdGhlIHVzZXJcclxuICAgICAgICBpZiAoIXNlbGVjdGVkTWFudWZhY3R1cmVyICYmIGlzR2VvZmVuY2VBY3RpdmUpIHtcclxuICAgICAgICAgIGFsZXJ0KCdQbGVhc2Ugc2VsZWN0IGEgbWFudWZhY3R1cmVyIHRvIHVzZSBjb21iaW5lZCBmaWx0ZXIgbW9kZScpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRNYW51ZmFjdHVyZXIgJiYgIWlzR2VvZmVuY2VBY3RpdmUpIHtcclxuICAgICAgICAgIGFsZXJ0KCdQbGVhc2Ugc2V0IGEgbG9jYXRpb24gdG8gdXNlIGNvbWJpbmVkIGZpbHRlciBtb2RlJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgICAnUGxlYXNlIHNlbGVjdCBib3RoIGEgbWFudWZhY3R1cmVyIGFuZCBsb2NhdGlvbiB0byB1c2UgY29tYmluZWQgZmlsdGVyIG1vZGUnXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE93bmVyIGZpbHRlciBtZXRob2RzXHJcbiAgY29uc3QgZ2V0QWlyY3JhZnRPd25lclR5cGUgPSAoYWlyY3JhZnQ6IEV4dGVuZGVkQWlyY3JhZnQpOiBzdHJpbmcgPT4ge1xyXG4gICAgY29uc3Qgb3duZXJUeXBlID0gYWlyY3JhZnQuVFlQRV9SRUdJU1RSQU5UIHx8IDA7XHJcbiAgICByZXR1cm4gb3duZXJUeXBlVG9TdHJpbmcob3duZXJUeXBlKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBvd25lclR5cGVUb1N0cmluZyA9ICh0eXBlOiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcgPT4ge1xyXG4gICAgY29uc3QgdHlwZU51bSA9IHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJyA/IHBhcnNlSW50KHR5cGUsIDEwKSA6IHR5cGU7XHJcblxyXG4gICAgY29uc3Qgb3duZXJUeXBlTWFwOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmc+ID0ge1xyXG4gICAgICAxOiAnaW5kaXZpZHVhbCcsXHJcbiAgICAgIDI6ICdwYXJ0bmVyc2hpcCcsXHJcbiAgICAgIDM6ICdjb3JwLW93bmVyJyxcclxuICAgICAgNDogJ2NvLW93bmVkJyxcclxuICAgICAgNzogJ2xsYycsXHJcbiAgICAgIDg6ICdub24tY2l0aXplbi1jb3JwJyxcclxuICAgICAgOTogJ2FpcmxpbmUnLFxyXG4gICAgICAxMDogJ2ZyZWlnaHQnLFxyXG4gICAgICAxMTogJ21lZGljYWwnLFxyXG4gICAgICAxMjogJ21lZGlhJyxcclxuICAgICAgMTM6ICdoaXN0b3JpY2FsJyxcclxuICAgICAgMTQ6ICdmbHlpbmctY2x1YicsXHJcbiAgICAgIDE1OiAnZW1lcmdlbmN5JyxcclxuICAgICAgMTY6ICdsb2NhbC1nb3Z0JyxcclxuICAgICAgMTc6ICdlZHVjYXRpb24nLFxyXG4gICAgICAxODogJ2ZlZGVyYWwtZ292dCcsXHJcbiAgICAgIDE5OiAnZmxpZ2h0LXNjaG9vbCcsXHJcbiAgICAgIDIwOiAnbGVhc2luZy1jb3JwJyxcclxuICAgICAgMjE6ICdtaWxpdGFyeScsXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBvd25lclR5cGVNYXBbdHlwZU51bV0gfHwgJ3Vua25vd24nO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGFwcGx5T3duZXJUeXBlRmlsdGVyID0gKGZpbHRlcnM6IHN0cmluZ1tdKSA9PiB7XHJcbiAgICAvLyBTa2lwIGZpbHRlcmluZyBpZiBhbGwgdHlwZXMgYXJlIHNlbGVjdGVkIG9yIG5vbmUgYXJlIHNlbGVjdGVkXHJcbiAgICBpZiAoZmlsdGVycy5sZW5ndGggPT09IDAgfHwgZmlsdGVycy5sZW5ndGggPT09IGFsbE93bmVyVHlwZXMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBGaWx0ZXIgdGhlIGFpcmNyYWZ0IGJhc2VkIG9uIHNlbGVjdGVkIG93bmVyIHR5cGVzXHJcbiAgICBpZiAoZGlzcGxheWVkQWlyY3JhZnQgJiYgZGlzcGxheWVkQWlyY3JhZnQubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCBmaWx0ZXJlZEFpcmNyYWZ0ID0gZGlzcGxheWVkQWlyY3JhZnQuZmlsdGVyKChhaXJjcmFmdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG93bmVyVHlwZSA9IGdldEFpcmNyYWZ0T3duZXJUeXBlKGFpcmNyYWZ0KTtcclxuICAgICAgICByZXR1cm4gZmlsdGVycy5pbmNsdWRlcyhvd25lclR5cGUpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZGlzcGxheWVkIGFpcmNyYWZ0XHJcbiAgICAgIGlmIChjbGVhckdlb2ZlbmNlRGF0YSkge1xyXG4gICAgICAgIGNsZWFyR2VvZmVuY2VEYXRhKCk7XHJcbiAgICAgIH1cclxuICAgICAgdXBkYXRlR2VvZmVuY2VBaXJjcmFmdChmaWx0ZXJlZEFpcmNyYWZ0KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVPd25lckZpbHRlckNoYW5nZSA9ICh1cGRhdGVkRmlsdGVyczogc3RyaW5nW10pID0+IHtcclxuICAgIHNldE93bmVyRmlsdGVycyh1cGRhdGVkRmlsdGVycyk7XHJcbiAgICAvLyBBcHBseSB0aGUgZmlsdGVyIHRvIHlvdXIgYWlyY3JhZnQgZGF0YVxyXG4gICAgYXBwbHlPd25lclR5cGVGaWx0ZXIodXBkYXRlZEZpbHRlcnMpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc2V0T3duZXJGaWx0ZXJzID0gKCkgPT4ge1xyXG4gICAgc2V0T3duZXJGaWx0ZXJzKFsuLi5hbGxPd25lclR5cGVzXSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gUmVnaW9uIGZpbHRlciBtZXRob2RzXHJcbiAgY29uc3QgZmlsdGVyQWlyY3JhZnRCeVJlZ2lvbiA9IChyZWdpb246IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKCFkaXNwbGF5ZWRBaXJjcmFmdCB8fCBkaXNwbGF5ZWRBaXJjcmFmdC5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgIHNldExvY2FsTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBHZXQgdGhlIGJvdW5kcyBmb3IgdGhlIHNlbGVjdGVkIHJlZ2lvblxyXG4gICAgICBjb25zdCBib3VuZHNFeHByZXNzaW9uID0gZ2V0Qm91bmRzQnlSZWdpb24ocmVnaW9uKTtcclxuXHJcbiAgICAgIC8vIEVuc3VyZSBib3VuZHMgaXMgaW4gdGhlIGNvcnJlY3QgZm9ybWF0XHJcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShib3VuZHNFeHByZXNzaW9uKSB8fCBib3VuZHNFeHByZXNzaW9uLmxlbmd0aCAhPT0gMikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXHJcbiAgICAgICAgICBgSW52YWxpZCBib3VuZHMgZm9ybWF0IGZvciByZWdpb246ICR7cmVnaW9ufWAsXHJcbiAgICAgICAgICBib3VuZHNFeHByZXNzaW9uXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzZXRMb2NhbExvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRXh0cmFjdCBjb29yZGluYXRlcyAtIExlYWZsZXQgdXNlcyBbbGF0LCBsbmddIGZvcm1hdFxyXG4gICAgICBjb25zdCBbW21pbkxhdCwgbWluTG5nXSwgW21heExhdCwgbWF4TG5nXV0gPSBib3VuZHNFeHByZXNzaW9uO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coYEZpbHRlcmluZyBieSByZWdpb246ICR7cmVnaW9ufSB3aXRoIGJvdW5kczpgLCB7XHJcbiAgICAgICAgbWluTGF0LFxyXG4gICAgICAgIG1pbkxuZyxcclxuICAgICAgICBtYXhMYXQsXHJcbiAgICAgICAgbWF4TG5nLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEZpbHRlciBhaXJjcmFmdCBiYXNlZCBvbiBjb29yZGluYXRlcyB3aXRoaW4gdGhlIGJvdW5kc1xyXG4gICAgICBjb25zdCBmaWx0ZXJlZEFpcmNyYWZ0ID0gZGlzcGxheWVkQWlyY3JhZnQuZmlsdGVyKChhaXJjcmFmdCkgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIGFpcmNyYWZ0IGhhcyB2YWxpZCBjb29yZGluYXRlc1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHR5cGVvZiBhaXJjcmFmdC5sYXRpdHVkZSAhPT0gJ251bWJlcicgfHxcclxuICAgICAgICAgIHR5cGVvZiBhaXJjcmFmdC5sb25naXR1ZGUgIT09ICdudW1iZXInIHx8XHJcbiAgICAgICAgICBpc05hTihhaXJjcmFmdC5sYXRpdHVkZSkgfHxcclxuICAgICAgICAgIGlzTmFOKGFpcmNyYWZ0LmxvbmdpdHVkZSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIGNvb3JkaW5hdGVzIGFyZSB3aXRoaW4gdGhlIGJvdW5kc1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICBhaXJjcmFmdC5sYXRpdHVkZSA+PSBtaW5MYXQgJiZcclxuICAgICAgICAgIGFpcmNyYWZ0LmxhdGl0dWRlIDw9IG1heExhdCAmJlxyXG4gICAgICAgICAgYWlyY3JhZnQubG9uZ2l0dWRlID49IG1pbkxuZyAmJlxyXG4gICAgICAgICAgYWlyY3JhZnQubG9uZ2l0dWRlIDw9IG1heExuZ1xyXG4gICAgICAgICk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5IHdpdGggZmlsdGVyZWQgYWlyY3JhZnRcclxuICAgICAgaWYgKGNsZWFyR2VvZmVuY2VEYXRhKSB7XHJcbiAgICAgICAgY2xlYXJHZW9mZW5jZURhdGEoKTtcclxuICAgICAgfVxyXG4gICAgICB1cGRhdGVHZW9mZW5jZUFpcmNyYWZ0KGZpbHRlcmVkQWlyY3JhZnQpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgRmlsdGVyZWQgdG8gJHtmaWx0ZXJlZEFpcmNyYWZ0Lmxlbmd0aH0gYWlyY3JhZnQgaW4gJHtyZWdpb259IHJlZ2lvbiAob3V0IG9mICR7ZGlzcGxheWVkQWlyY3JhZnQubGVuZ3RofSB0b3RhbClgXHJcbiAgICAgICk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaWx0ZXJpbmcgYWlyY3JhZnQgYnkgcmVnaW9uOicsIGVycm9yKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldExvY2FsTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmVnaW9uU2VsZWN0ID0gYXN5bmMgKHJlZ2lvbjogUmVnaW9uQ29kZSkgPT4ge1xyXG4gICAgc2V0QWN0aXZlUmVnaW9uKHJlZ2lvbik7XHJcbiAgICBzZXRTZWxlY3RlZFJlZ2lvbihyZWdpb24pO1xyXG4gICAgc2V0TG9jYWxMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFNldCBtYXAgYm91bmRzIGJhc2VkIG9uIHJlZ2lvblxyXG4gICAgICBpZiAobWFwSW5zdGFuY2UpIHtcclxuICAgICAgICBjb25zdCBib3VuZHMgPSBnZXRCb3VuZHNCeVJlZ2lvbihyZWdpb24pO1xyXG5cclxuICAgICAgICAvLyBHZXQgdGhlIGFwcHJvcHJpYXRlIHpvb20gbGV2ZWwgZm9yIHRoaXMgcmVnaW9uIGZyb20geW91ciBjb25maWdcclxuICAgICAgICBjb25zdCB6b29tTGV2ZWwgPSBnZXRab29tTGV2ZWxGb3JSZWdpb24ocmVnaW9uKTtcclxuXHJcbiAgICAgICAgLy8gRmlyc3QsIHNldCB0aGUgYXBwcm9wcmlhdGUgem9vbSBsZXZlbFxyXG4gICAgICAgIG1hcEluc3RhbmNlLnNldFpvb20oem9vbUxldmVsKTtcclxuXHJcbiAgICAgICAgLy8gVGhlbiBmaXQgYm91bmRzIHdpdGggcGFkZGluZ1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICBwYWRkaW5nOiBNQVBfQ09ORklHLlBBRERJTkcuREVGQVVMVCxcclxuICAgICAgICAgIC8vIERvbid0IHNldCBtYXhab29tIGhlcmUgYXMgd2Ugd2FudCB0aGUgcmVnaW9uIHRvIGJlIHByb3Blcmx5IGRpc3BsYXllZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIG1hcEluc3RhbmNlLmZpdEJvdW5kcyhib3VuZHMgYXMgYW55LCBvcHRpb25zKTtcclxuICAgICAgICBtYXBJbnN0YW5jZS5pbnZhbGlkYXRlU2l6ZSgpO1xyXG4gICAgICAgIGRyYXdSZWdpb25PdXRsaW5lKHJlZ2lvbik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEluc3RlYWQgb2YgaW1tZWRpYXRlbHkgZmV0Y2hpbmcgYWlyY3JhZnQgZGF0YSxcclxuICAgICAgLy8ganVzdCBzdG9yZSB0aGUgcmVnaW9uIHNlbGVjdGlvbiBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgIGNvbnNvbGUubG9nKGBSZWdpb24gc2VsZWN0ZWQuIFdhaXRpbmcgZm9yIG1hbnVmYWN0dXJlciBzZWxlY3Rpb24uLi5gKTtcclxuXHJcbiAgICAgIC8vIE9wdGlvbmFsbHksIHlvdSBjb3VsZCBmZXRjaCBqdXN0IHRoZSBjb3VudCBvZiBhaXJjcmFmdCBpbiB0aGlzIHJlZ2lvblxyXG4gICAgICAvLyB0byBnaXZlIHRoZSB1c2VyIGFuIGlkZWEgb2YgdGhlIGRhdGEgdm9sdW1lXHJcbiAgICAgIGNvbnN0IGNvdW50UmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBgL2FwaS90cmFja2luZy9yZWdpb24tY291bnQ/cmVnaW9uPSR7cmVnaW9ufWBcclxuICAgICAgKTtcclxuICAgICAgaWYgKGNvdW50UmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zdCBjb3VudERhdGEgPSBhd2FpdCBjb3VudFJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgJHtjb3VudERhdGEuY291bnR9IGFpcmNyYWZ0IGF2YWlsYWJsZSBpbiB0aGlzIHJlZ2lvbmApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDbGVhciBhbnkgcHJldmlvdXMgYWlyY3JhZnQgZGF0YVxyXG4gICAgICBpZiAoY2xlYXJHZW9mZW5jZURhdGEpIHtcclxuICAgICAgICBjbGVhckdlb2ZlbmNlRGF0YSgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiByZWdpb24gc2VsZWN0aW9uOicsIGVycm9yKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldExvY2FsTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIHNldEFjdGl2ZURyb3Bkb3duKG51bGwpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGRyYXdSZWdpb25PdXRsaW5lID0gKHJlZ2lvbjogUmVnaW9uQ29kZSkgPT4ge1xyXG4gICAgaWYgKCFtYXBJbnN0YW5jZSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBvdXRsaW5lXHJcbiAgICBpZiAocmVnaW9uT3V0bGluZSkge1xyXG4gICAgICByZWdpb25PdXRsaW5lLnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEdldCB0aGUgYm91bmRzIGZvciB0aGUgc2VsZWN0ZWQgcmVnaW9uXHJcbiAgICBjb25zdCBib3VuZHMgPSBnZXRCb3VuZHNCeVJlZ2lvbihyZWdpb24pIGFzIFtcclxuICAgICAgW251bWJlciwgbnVtYmVyXSxcclxuICAgICAgW251bWJlciwgbnVtYmVyXSxcclxuICAgIF07XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgcG9seWdvbiBmcm9tIHRoZSBib3VuZHNcclxuICAgIGNvbnN0IEwgPSByZXF1aXJlKCdsZWFmbGV0Jyk7XHJcbiAgICBjb25zdCByZWN0YW5nbGUgPSBMLnJlY3RhbmdsZShib3VuZHMsIHtcclxuICAgICAgY29sb3I6ICcjNGY0NmU1JywgLy8gSW5kaWdvIGNvbG9yIG1hdGNoaW5nIHlvdXIgVUlcclxuICAgICAgd2VpZ2h0OiAzLFxyXG4gICAgICBvcGFjaXR5OiAwLjcsXHJcbiAgICAgIGZpbGw6IHRydWUsXHJcbiAgICAgIGZpbGxDb2xvcjogJyM0ZjQ2ZTUnLFxyXG4gICAgICBmaWxsT3BhY2l0eTogMC4xLFxyXG4gICAgICBkYXNoQXJyYXk6ICc1LCAxMCcsIC8vIE9wdGlvbmFsOiBjcmVhdGVzIGEgZGFzaGVkIGxpbmVcclxuICAgICAgaW50ZXJhY3RpdmU6IGZhbHNlLCAvLyBQcmV2ZW50cyB0aGUgcmVjdGFuZ2xlIGZyb20gY2FwdHVyaW5nIG1vdXNlIGV2ZW50c1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWRkIHRvIG1hcFxyXG4gICAgcmVjdGFuZ2xlLmFkZFRvKG1hcEluc3RhbmNlKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgdGhlIHN0YXRlIHRvIGluY2x1ZGUgYm90aCB0aGUgcmVjdGFuZ2xlIGFuZCB0aGUgbGFiZWxcclxuICAgIHNldFJlZ2lvbk91dGxpbmUoe1xyXG4gICAgICByZW1vdmU6ICgpID0+IHtcclxuICAgICAgICByZWN0YW5nbGUucmVtb3ZlKCk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyBHZW9mZW5jZSBtZXRob2RzXHJcbiAgLy8gRml4ZWQgZ2V0VXNlckxvY2F0aW9uIGZ1bmN0aW9uXHJcbiAgY29uc3QgZ2V0VXNlckxvY2F0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgaWYgKGlzUmF0ZUxpbWl0ZWQpIHtcclxuICAgICAgYWxlcnQoXHJcbiAgICAgICAgYFJhdGUgbGltaXRlZC4gUGxlYXNlIHdhaXQgJHtyYXRlTGltaXRUaW1lciB8fCAzMH0gc2Vjb25kcyBiZWZvcmUgdHJ5aW5nIHRvIGdldCBsb2NhdGlvbi5gXHJcbiAgICAgICk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRJc0dldHRpbmdMb2NhdGlvbih0cnVlKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gYXdhaXQgZ2V0Q3VycmVudFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICBpZiAocG9zaXRpb24pIHtcclxuICAgICAgICBjb25zdCB7IGxhdGl0dWRlLCBsb25naXR1ZGUgfSA9IHBvc2l0aW9uLmNvb3JkcztcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHN0YXRlIHdpdGggY29vcmRpbmF0ZXNcclxuICAgICAgICBzZXRHZW9mZW5jZUNvb3JkaW5hdGVzKHsgbGF0OiBsYXRpdHVkZSwgbG5nOiBsb25naXR1ZGUgfSk7XHJcbiAgICAgICAgc2V0R2VvZmVuY2VDZW50ZXIoeyBsYXQ6IGxhdGl0dWRlLCBsbmc6IGxvbmdpdHVkZSB9KTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsb2NhdGlvbiBkaXNwbGF5IHdpdGggY29vcmRpbmF0ZXNcclxuICAgICAgICBzZXRHZW9mZW5jZUxvY2F0aW9uKGAke2xhdGl0dWRlLnRvRml4ZWQoNil9LCAke2xvbmdpdHVkZS50b0ZpeGVkKDYpfWApO1xyXG5cclxuICAgICAgICAvLyBBdXRvbWF0aWNhbGx5IHRyaWdnZXIgdGhlIGdlb2ZlbmNlIHNlYXJjaFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBmZXRjaGVkQWlyY3JhZnQgPSBhd2FpdCBnZXRBaXJjcmFmdE5lYXJMb2NhdGlvbihcclxuICAgICAgICAgICAgbGF0aXR1ZGUsXHJcbiAgICAgICAgICAgIGxvbmdpdHVkZSxcclxuICAgICAgICAgICAgZ2VvZmVuY2VSYWRpdXNcclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgaWYgKGZldGNoZWRBaXJjcmFmdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICAgICAgYE5vIGFpcmNyYWZ0IGZvdW5kIG5lYXIgeW91ciBjdXJyZW50IGxvY2F0aW9uLiBUcnkgaW5jcmVhc2luZyB0aGUgcmFkaXVzLmBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgc2V0SXNHZXR0aW5nTG9jYXRpb24oZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gUHJvY2VzcyB0aGUgYWlyY3JhZnQgZGF0YVxyXG4gICAgICAgICAgY29uc3QgYWRhcHRlZEFpcmNyYWZ0ID0gYWRhcHRHZW9mZW5jZUFpcmNyYWZ0KGZldGNoZWRBaXJjcmFmdCk7XHJcbiAgICAgICAgICBjb25zdCBlbnJpY2hlZEFpcmNyYWZ0ID1cclxuICAgICAgICAgICAgYXdhaXQgZW5yaWNoR2VvZmVuY2VBaXJjcmFmdChhZGFwdGVkQWlyY3JhZnQpO1xyXG5cclxuICAgICAgICAgIC8vIFNhdmUgdG8gbG9jYWwgc3RhdGVcclxuICAgICAgICAgIHNldEdlb2ZlbmNlQWlyY3JhZnQoZW5yaWNoZWRBaXJjcmFmdCk7XHJcblxyXG4gICAgICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgYWlyY3JhZnQgZGF0YVxyXG4gICAgICAgICAgaWYgKGNsZWFyR2VvZmVuY2VEYXRhKSB7XHJcbiAgICAgICAgICAgIGNsZWFyR2VvZmVuY2VEYXRhKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gVXBkYXRlIHRoZSBtYXAgd2l0aCBuZXcgYWlyY3JhZnRcclxuICAgICAgICAgIHVwZGF0ZUdlb2ZlbmNlQWlyY3JhZnQoZW5yaWNoZWRBaXJjcmFmdCk7XHJcbiAgICAgICAgICBzZXRJc0dlb2ZlbmNlQWN0aXZlKHRydWUpO1xyXG5cclxuICAgICAgICAgIC8vIENlbnRlciB0aGUgbWFwIG9uIHVzZXIncyBsb2NhdGlvbiAtIFNJTVBMSUZJRUQgWk9PTSBMT0dJQ1xyXG4gICAgICAgICAgaWYgKG1hcEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIC8vIERvbid0IG1vZGlmeSB6b29tIGlmIGl0J3MgYWxyZWFkeSBhdCBhbiBhcHByb3ByaWF0ZSBsZXZlbFxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Wm9vbSA9IG1hcEluc3RhbmNlLmdldFpvb20oKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Wm9vbSA9IGN1cnJlbnRab29tIDw9IDcgPyA5IDogY3VycmVudFpvb207XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIHZpZXcgZGlyZWN0bHkgdG8gdGhlIHVzZXIncyBsb2NhdGlvblxyXG4gICAgICAgICAgICBtYXBJbnN0YW5jZS5zZXRWaWV3KFtsYXRpdHVkZSwgbG9uZ2l0dWRlXSwgdGFyZ2V0Wm9vbSk7XHJcblxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIG1hcCByZWZsZWN0cyBjaGFuZ2VzXHJcbiAgICAgICAgICAgIG1hcEluc3RhbmNlLmludmFsaWRhdGVTaXplKCk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gSWYgaW4gZ2VvZmVuY2UgbW9kZSwgZW5zdXJlIHRoZSBmaWx0ZXIgbW9kZSBpcyBzZXQgY29ycmVjdGx5XHJcbiAgICAgICAgICBpZiAoZmlsdGVyTW9kZSAhPT0gJ2dlb2ZlbmNlJyAmJiBmaWx0ZXJNb2RlICE9PSAnYm90aCcpIHtcclxuICAgICAgICAgICAgc2V0RmlsdGVyTW9kZSgnZ2VvZmVuY2UnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3JhdGUgbGltaXQnKSB8fCBlcnJvci5zdGF0dXMgPT09IDQyOSkge1xyXG4gICAgICAgICAgICBoYW5kbGVSYXRlTGltaXQoMzApO1xyXG4gICAgICAgICAgICAvLyBTdGlsbCB1cGRhdGUgdGhlIGxvY2F0aW9uIGV2ZW4gaWYgd2UgY291bGRuJ3QgZ2V0IGFpcmNyYWZ0XHJcbiAgICAgICAgICAgIGlmIChtYXBJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgIG1hcEluc3RhbmNlLnNldFZpZXcoW2xhdGl0dWRlLCBsb25naXR1ZGVdLCA5KTtcclxuICAgICAgICAgICAgICBtYXBJbnN0YW5jZS5pbnZhbGlkYXRlU2l6ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsb3NlIHRoZSBkcm9wZG93biBhZnRlciBzZWxlY3Rpb25cclxuICAgICAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyB1c2VyIGxvY2F0aW9uOicsIGVycm9yKTtcclxuICAgICAgYWxlcnQoXHJcbiAgICAgICAgJ1VuYWJsZSB0byBhY2Nlc3MgeW91ciBsb2NhdGlvbi4gUGxlYXNlIG1ha2Ugc3VyZSBsb2NhdGlvbiBzZXJ2aWNlcyBhcmUgZW5hYmxlZCBpbiB5b3VyIGJyb3dzZXIuJ1xyXG4gICAgICApO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNHZXR0aW5nTG9jYXRpb24oZmFsc2UpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHByb2Nlc3NHZW9mZW5jZVNlYXJjaCA9IGFzeW5jICgpID0+IHtcclxuICAgIGlmICghZ2VvZmVuY2VMb2NhdGlvbikgcmV0dXJuO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHJhdGUgbGltaXRlZFxyXG4gICAgaWYgKGlzUmF0ZUxpbWl0ZWQpIHtcclxuICAgICAgYWxlcnQoXHJcbiAgICAgICAgYFJhdGUgbGltaXRlZC4gUGxlYXNlIHdhaXQgJHtyYXRlTGltaXRUaW1lciB8fCAzMH0gc2Vjb25kcyBiZWZvcmUgc2VhcmNoaW5nIGFnYWluLmBcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJsb2NrIEFQSSBjYWxscyB3aGlsZSBkb2luZyBnZW9mZW5jZSBzZWFyY2ggaW4gY29tYmluZWQgbW9kZVxyXG4gICAgaWYgKGZpbHRlck1vZGUgPT09ICdib3RoJykge1xyXG4gICAgICBvcGVuU2t5VHJhY2tpbmdTZXJ2aWNlLnNldEJsb2NrQWxsQXBpQ2FsbHModHJ1ZSk7XHJcbiAgICAgIHNldEJsb2NrTWFudWZhY3R1cmVyQXBpQ2FsbHModHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IGxvYWRpbmcgc3RhdGVcclxuICAgIHNldExvY2FsTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICBgU2VhcmNoaW5nIGZvciBhaXJjcmFmdCBuZWFyIGxvY2F0aW9uOiBcIiR7Z2VvZmVuY2VMb2NhdGlvbn1cImBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIFRoaXMgd2lsbCBoYW5kbGUgUG9zdGFsIGNvZGVzLCBwbGFjZSBuYW1lcywgYWRkcmVzc2VzLCBQT0lzLCBldGMuXHJcbiAgICAgIGxldCBmZXRjaGVkQWlyY3JhZnQ7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgZmV0Y2hlZEFpcmNyYWZ0ID0gYXdhaXQgZ2V0QWlyY3JhZnROZWFyU2VhcmNoZWRMb2NhdGlvbihcclxuICAgICAgICAgIGdlb2ZlbmNlTG9jYXRpb24sXHJcbiAgICAgICAgICBnZW9mZW5jZVJhZGl1c1xyXG4gICAgICAgICk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3JhdGUgbGltaXQnKSB8fCBlcnJvci5zdGF0dXMgPT09IDQyOSkge1xyXG4gICAgICAgICAgY29uc3QgcmV0cnlBZnRlciA9IDMwOyAvLyBEZWZhdWx0IHRvIDMwIHNlY29uZHMgaWYgbm90IHNwZWNpZmllZFxyXG4gICAgICAgICAgaGFuZGxlUmF0ZUxpbWl0KHJldHJ5QWZ0ZXIpO1xyXG4gICAgICAgICAgc2V0TG9jYWxMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEdldCBjb29yZGluYXRlcyBmb3IgdGhlIG1hcFxyXG4gICAgICBsZXQgbG9jYXRpb25zOiB7IGxhdDogbnVtYmVyOyBsbmc6IG51bWJlcjsgbmFtZTogc3RyaW5nIH1bXTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBsb2NhdGlvbnMgPSBhd2FpdCBzZWFyY2hMb2NhdGlvbldpdGhNYXBib3goZ2VvZmVuY2VMb2NhdGlvbiwgMSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGxvY2F0aW9uIHdpdGggTWFwYm94OicsIGVycm9yKTtcclxuICAgICAgICAvLyBDb250aW51ZSB3aXRoIGFpcmNyYWZ0IGRhdGEgaWYgYXZhaWxhYmxlXHJcbiAgICAgICAgbG9jYXRpb25zID0gW107XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxldCBjb29yZGluYXRlczogeyBsYXQ6IG51bWJlcjsgbG5nOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29vcmRpbmF0ZXMgPSB7XHJcbiAgICAgICAgICBsYXQ6IGxvY2F0aW9uc1swXS5sYXQsXHJcbiAgICAgICAgICBsbmc6IGxvY2F0aW9uc1swXS5sbmcsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBTYXZlIHRoZSBmb3JtYXR0ZWQgbG9jYXRpb24gbmFtZVxyXG4gICAgICAgIHNldEdlb2ZlbmNlTG9jYXRpb24obG9jYXRpb25zWzBdLm5hbWUpO1xyXG4gICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgIGZldGNoZWRBaXJjcmFmdC5sZW5ndGggPiAwICYmXHJcbiAgICAgICAgZmV0Y2hlZEFpcmNyYWZ0WzBdLmxhdGl0dWRlICYmXHJcbiAgICAgICAgZmV0Y2hlZEFpcmNyYWZ0WzBdLmxvbmdpdHVkZVxyXG4gICAgICApIHtcclxuICAgICAgICAvLyBGYWxsYmFjayB0byBmaXJzdCBhaXJjcmFmdCBwb3NpdGlvblxyXG4gICAgICAgIGNvb3JkaW5hdGVzID0ge1xyXG4gICAgICAgICAgbGF0OiBmZXRjaGVkQWlyY3JhZnRbMF0ubGF0aXR1ZGUsXHJcbiAgICAgICAgICBsbmc6IGZldGNoZWRBaXJjcmFmdFswXS5sb25naXR1ZGUsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGZldGNoZWRBaXJjcmFmdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBhbGVydChcclxuICAgICAgICAgIGBObyBhaXJjcmFmdCBmb3VuZCBuZWFyICR7Z2VvZmVuY2VMb2NhdGlvbn0uIFRyeSBpbmNyZWFzaW5nIHRoZSByYWRpdXMgb3Igc2VhcmNoaW5nIGluIGEgZGlmZmVyZW50IGFyZWEuYFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgc2V0TG9jYWxMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFVwZGF0ZSBzdGF0ZSB3aXRoIHRoZSBjb29yZGluYXRlc1xyXG4gICAgICBpZiAoY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICBzZXRHZW9mZW5jZUNvb3JkaW5hdGVzKGNvb3JkaW5hdGVzKTtcclxuICAgICAgICBzZXRHZW9mZW5jZUNlbnRlcihjb29yZGluYXRlcyk7XHJcbiAgICAgICAgc2V0R2VvZmVuY2VSYWRpdXMoZ2VvZmVuY2VSYWRpdXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmICghaXNHZW9mZW5jZUFjdGl2ZSkge1xyXG4gICAgICAgIHRvZ2dsZUdlb2ZlbmNlKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoIWNvb3JkaW5hdGVzKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZGV0ZXJtaW5lIGNvb3JkaW5hdGVzIGZvciB0aGUgbG9jYXRpb24nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYEZvdW5kICR7ZmV0Y2hlZEFpcmNyYWZ0Lmxlbmd0aH0gYWlyY3JhZnQgaW4gdGhlIGFyZWEsIHByZXBhcmluZyBmb3IgZGlzcGxheS4uLmBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEVuc3VyZSB0aGUgZGF0YSBpcyBpbiB0aGUgcmlnaHQgZm9ybWF0XHJcbiAgICAgIGNvbnN0IGFkYXB0ZWRBaXJjcmFmdCA9XHJcbiAgICAgICAgZmV0Y2hlZEFpcmNyYWZ0WzBdLk1BTlVGQUNUVVJFUiAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICA/IGZldGNoZWRBaXJjcmFmdCAvLyBBbHJlYWR5IGluIHRoZSByaWdodCBmb3JtYXRcclxuICAgICAgICAgIDogYWRhcHRHZW9mZW5jZUFpcmNyYWZ0KGZldGNoZWRBaXJjcmFmdCk7IC8vIE5lZWRzIGFkYXB0YXRpb25cclxuXHJcbiAgICAgIC8vIEVucmljaCB3aXRoIHN0YXRpYyBkYXRhXHJcbiAgICAgIGNvbnNvbGUubG9nKCdFbnJpY2hpbmcgZ2VvZmVuY2UgYWlyY3JhZnQgd2l0aCBzdGF0aWMgZGF0YS4uLicpO1xyXG4gICAgICBjb25zdCBlbnJpY2hlZEFpcmNyYWZ0ID0gYXdhaXQgZW5yaWNoR2VvZmVuY2VBaXJjcmFmdChhZGFwdGVkQWlyY3JhZnQpO1xyXG5cclxuICAgICAgLy8gU2F2ZSB0aGUgRlVMTCBzZXQgdG8gbG9jYWwgc3RhdGVcclxuICAgICAgc2V0R2VvZmVuY2VBaXJjcmFmdChlbnJpY2hlZEFpcmNyYWZ0KTtcclxuICAgICAgc2V0SXNHZW9mZW5jZUFjdGl2ZSh0cnVlKTtcclxuXHJcbiAgICAgIC8vIENsZWFyIGV4aXN0aW5nIGFpcmNyYWZ0IGRhdGFcclxuICAgICAgaWYgKGNsZWFyR2VvZmVuY2VEYXRhKSB7XHJcbiAgICAgICAgY2xlYXJHZW9mZW5jZURhdGEoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSWYgd2UncmUgaW4gY29tYmluZWQgbW9kZSBhbmQgaGF2ZSBhIG1hbnVmYWN0dXJlciwgYXBwbHkgdGhlIGNvbWJpbmVkIGZpbHRlclxyXG4gICAgICBpZiAoZmlsdGVyTW9kZSA9PT0gJ2JvdGgnICYmIHNlbGVjdGVkTWFudWZhY3R1cmVyKSB7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIEFQSSBjYWxscyByZW1haW4gYmxvY2tlZFxyXG4gICAgICAgIG9wZW5Ta3lUcmFja2luZ1NlcnZpY2Uuc2V0QmxvY2tBbGxBcGlDYWxscyh0cnVlKTtcclxuICAgICAgICBzZXRCbG9ja01hbnVmYWN0dXJlckFwaUNhbGxzKHRydWUpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgYXBwbHlDb21iaW5lZEZpbHRlcnMoKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIEp1c3Qgc2hvdyBhbGwgYWlyY3JhZnQgaW4gdGhlIGdlb2ZlbmNlXHJcbiAgICAgICAgdXBkYXRlR2VvZmVuY2VBaXJjcmFmdChlbnJpY2hlZEFpcmNyYWZ0KTtcclxuXHJcbiAgICAgICAgLy8gQ2VudGVyIHRoZSBtYXAgLSBTSU1QTElGSUVEIFpPT00gTE9HSUNcclxuICAgICAgICBpZiAobWFwSW5zdGFuY2UgJiYgY29vcmRpbmF0ZXMpIHtcclxuICAgICAgICAgIC8vIEdldCBjdXJyZW50IHpvb20gbGV2ZWxcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRab29tID0gbWFwSW5zdGFuY2UuZ2V0Wm9vbSgpO1xyXG4gICAgICAgICAgLy8gVXNlIGFwcHJvcHJpYXRlIHpvb20gbGV2ZWwgYmFzZWQgb24gY3VycmVudCB2aWV3XHJcbiAgICAgICAgICBjb25zdCB0YXJnZXRab29tID0gY3VycmVudFpvb20gPD0gNyA/IDkgOiBjdXJyZW50Wm9vbTtcclxuXHJcbiAgICAgICAgICAvLyBTZXQgdmlldyB0byB0aGUgY29vcmRpbmF0ZXNcclxuICAgICAgICAgIG1hcEluc3RhbmNlLnNldFZpZXcoW2Nvb3JkaW5hdGVzLmxhdCwgY29vcmRpbmF0ZXMubG5nXSwgdGFyZ2V0Wm9vbSk7XHJcblxyXG4gICAgICAgICAgLy8gRW5zdXJlIG1hcCBpcyB1cGRhdGVkXHJcbiAgICAgICAgICBtYXBJbnN0YW5jZS5pbnZhbGlkYXRlU2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQ2xvc2UgZHJvcGRvd24gYWZ0ZXIgc2VhcmNoXHJcbiAgICAgIHNldEFjdGl2ZURyb3Bkb3duKG51bGwpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW9mZW5jZSBzZWFyY2g6JywgZXJyb3IpO1xyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3JhdGUgbGltaXQnKSB8fCBlcnJvci5zdGF0dXMgPT09IDQyOSkge1xyXG4gICAgICAgIGhhbmRsZVJhdGVMaW1pdCgzMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICBgRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCd9YFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHNldExvY2FsTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogU1RFUCAzOiBGaXggdG9nZ2xlR2VvZmVuY2VTdGF0ZSB0byBiZXR0ZXIgaGFuZGxlIG1hbnVhbGx5IGNsaWNraW5nIHRoZSBidXR0b25cclxuICAgKi9cclxuICBjb25zdCB0b2dnbGVHZW9mZW5jZVN0YXRlID0gKGVuYWJsZWQ6IGJvb2xlYW4pID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCd0b2dnbGVHZW9mZW5jZVN0YXRlIGNhbGxlZCB3aXRoOicsIGVuYWJsZWQpO1xyXG4gICAgY29uc29sZS5sb2coJ0N1cnJlbnQgZ2VvZmVuY2VDb29yZGluYXRlczonLCBnZW9mZW5jZUNvb3JkaW5hdGVzKTtcclxuXHJcbiAgICBpZiAoZW5hYmxlZCkge1xyXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIHZhbGlkIGNvb3JkaW5hdGVzXHJcbiAgICAgIGlmIChcclxuICAgICAgICBnZW9mZW5jZUNvb3JkaW5hdGVzICYmXHJcbiAgICAgICAgdHlwZW9mIGdlb2ZlbmNlQ29vcmRpbmF0ZXMubGF0ID09PSAnbnVtYmVyJyAmJlxyXG4gICAgICAgIHR5cGVvZiBnZW9mZW5jZUNvb3JkaW5hdGVzLmxuZyA9PT0gJ251bWJlcicgJiZcclxuICAgICAgICAhaXNOYU4oZ2VvZmVuY2VDb29yZGluYXRlcy5sYXQpICYmXHJcbiAgICAgICAgIWlzTmFOKGdlb2ZlbmNlQ29vcmRpbmF0ZXMubG5nKVxyXG4gICAgICApIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVmFsaWQgY29vcmRpbmF0ZXMgZm91bmQsIGVuYWJsaW5nIGdlb2ZlbmNlJyk7XHJcblxyXG4gICAgICAgIC8vIFNldCBmbGFncyBmaXJzdFxyXG4gICAgICAgIHNldEdlb2ZlbmNlRW5hYmxlZCh0cnVlKTtcclxuICAgICAgICBzZXRJc0dlb2ZlbmNlQWN0aXZlKHRydWUpO1xyXG5cclxuICAgICAgICAvLyBDYWxsIGNvbnRleHQgdG9nZ2xlIGZ1bmN0aW9uIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmICh0eXBlb2YgdG9nZ2xlR2VvZmVuY2UgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHRvZ2dsZUdlb2ZlbmNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEaXNwbGF5IGFpcmNyYWZ0IGlmIHdlIGhhdmUgdGhlbVxyXG4gICAgICAgIGlmIChnZW9mZW5jZUFpcmNyYWZ0ICYmIGdlb2ZlbmNlQWlyY3JhZnQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgIGBTaG93aW5nICR7Z2VvZmVuY2VBaXJjcmFmdC5sZW5ndGh9IGFpcmNyYWZ0IGluIGdlb2ZlbmNlYFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICAgIHVwZGF0ZUdlb2ZlbmNlQWlyY3JhZnQoZ2VvZmVuY2VBaXJjcmFmdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIE5vIGFpcmNyYWZ0IGRhdGEgeWV0LCB0cmlnZ2VyIGEgc2VhcmNoXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTm8gYWlyY3JhZnQgZGF0YSB5ZXQsIHRyaWdnZXJpbmcgc2VhcmNoJyk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcHJvY2Vzc0dlb2ZlbmNlU2VhcmNoKCk7XHJcbiAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBObyB2YWxpZCBjb29yZGluYXRlc1xyXG4gICAgICAgIGNvbnNvbGUud2FybignTm8gdmFsaWQgY29vcmRpbmF0ZXMsIHNob3dpbmcgYWxlcnQnKTtcclxuICAgICAgICBhbGVydChcclxuICAgICAgICAgICdQbGVhc2Ugc2V0IGEgbG9jYXRpb24gYmVmb3JlIGVuYWJsaW5nIGdlb2ZlbmNlLlxcblxcbkNsaWNrIGFueXdoZXJlIG9uIHRoZSBtYXAgdG8gc2V0IGEgbG9jYXRpb24uJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgc2V0R2VvZmVuY2VFbmFibGVkKGZhbHNlKTtcclxuICAgICAgICBzZXRJc0dlb2ZlbmNlQWN0aXZlKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRGlzYWJsaW5nIGdlb2ZlbmNlXHJcbiAgICAgIGNvbnNvbGUubG9nKCdEaXNhYmxpbmcgZ2VvZmVuY2UnKTtcclxuICAgICAgc2V0R2VvZmVuY2VFbmFibGVkKGZhbHNlKTtcclxuICAgICAgc2V0SXNHZW9mZW5jZUFjdGl2ZShmYWxzZSk7XHJcblxyXG4gICAgICAvLyBDbGVhciBnZW9mZW5jZSBkYXRhIGlmIGZ1bmN0aW9uIGF2YWlsYWJsZVxyXG4gICAgICBpZiAodHlwZW9mIGNsZWFyR2VvZmVuY2VEYXRhID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgY2xlYXJHZW9mZW5jZURhdGEoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIE1hbnVmYWN0dXJlciBmaWx0ZXIgbWV0aG9kc1xyXG4gIGNvbnN0IHNlbGVjdE1hbnVmYWN0dXJlckFuZENsb3NlID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgIC8vIENsb3NlIGRyb3Bkb3duXHJcbiAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTtcclxuICAgIHNldE1hbnVmYWN0dXJlclNlYXJjaFRlcm0oJycpO1xyXG5cclxuICAgIC8vIElmIGNsZWFyaW5nIHRoZSBzZWxlY3Rpb25cclxuICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcclxuICAgICAgc2VsZWN0TWFudWZhY3R1cmVyKG51bGwpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHRoZSBtYW51ZmFjdHVyZXIgc2VsZWN0aW9uXHJcbiAgICBzZWxlY3RNYW51ZmFjdHVyZXIodmFsdWUpO1xyXG5cclxuICAgIC8vIElmIHJlZ2lvbiBpcyBhbHJlYWR5IHNlbGVjdGVkLCBmZXRjaCBmaWx0ZXJlZCBkYXRhXHJcbiAgICBpZiAoYWN0aXZlUmVnaW9uICE9PSBudWxsKSB7XHJcbiAgICAgIGZldGNoQWlyY3JhZnRCeVJlZ2lvbkFuZE1hbnVmYWN0dXJlcihhY3RpdmVSZWdpb24gYXMgUmVnaW9uQ29kZSwgdmFsdWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gT3RoZXJ3aXNlLCBqdXN0IHByb2NlZWQgd2l0aCBtYW51ZmFjdHVyZXItb25seSBmaWx0ZXJpbmcgYXMgYmVmb3JlXHJcbiAgICAgIGZldGNoTWFudWZhY3R1cmVyRGF0YSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgZmV0Y2hNYW51ZmFjdHVyZXJEYXRhID0gKG1hbnVmYWN0dXJlcjogc3RyaW5nKSA9PiB7XHJcbiAgICBpZiAoaXNSYXRlTGltaXRlZCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhgU2tpcHBpbmcgZGF0YSBmZXRjaCAtIHJhdGUgbGltaXRlZCBmb3IgJHtyYXRlTGltaXRUaW1lcn1zYCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgZGF0YSBmb3IgbWFudWZhY3R1cmVyOiAke21hbnVmYWN0dXJlcn1gKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBJZiB5b3UgaGF2ZSBhIGNvbnRleHQgZnVuY3Rpb24gZm9yIHRoaXMsIGNhbGwgaXQgYWZ0ZXIgYSBzbGlnaHQgZGVsYXlcclxuICAgICAgaWYgKHR5cGVvZiByZWZyZXNoUG9zaXRpb25zID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgLy8gQXBwbHkgYSBzbWFsbCBkZWxheSB0byBwcmV2ZW50IG92ZXJ3aGVsbWluZyB0aGUgQVBJXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICByZWZyZXNoUG9zaXRpb25zKCkuY2F0Y2goKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdyYXRlIGxpbWl0JykgfHwgZXJyb3Iuc3RhdHVzID09PSA0MjkpIHtcclxuICAgICAgICAgICAgICBoYW5kbGVSYXRlTGltaXQoMzApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG1hbnVmYWN0dXJlciBkYXRhOicsIGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMjAwKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICBpZiAoZXJyb3IubWVzc2FnZT8uaW5jbHVkZXMoJ3JhdGUgbGltaXQnKSB8fCBlcnJvci5zdGF0dXMgPT09IDQyOSkge1xyXG4gICAgICAgIGhhbmRsZVJhdGVMaW1pdCgzMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2NoZWR1bGluZyBtYW51ZmFjdHVyZXIgZGF0YSBmZXRjaDonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBmZXRjaEFpcmNyYWZ0QnlSZWdpb25BbmRNYW51ZmFjdHVyZXIgPSBhc3luYyAoXHJcbiAgICByZWdpb246IFJlZ2lvbkNvZGUsXHJcbiAgICBtYW51ZmFjdHVyZXI6IHN0cmluZyxcclxuICAgIHBhZ2U6IG51bWJlciA9IDEsXHJcbiAgICBsaW1pdDogbnVtYmVyID0gNTAwXHJcbiAgKSA9PiB7XHJcbiAgICBpZiAoIXJlZ2lvbiB8fCAhbWFudWZhY3R1cmVyKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdCb3RoIHJlZ2lvbiBhbmQgbWFudWZhY3R1cmVyIG11c3QgYmUgc2VsZWN0ZWQnKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExvY2FsTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxyXG4gICAgICAgIGAvYXBpL3RyYWNraW5nL2ZpbHRlcmVkLWFpcmNyYWZ0P3JlZ2lvbj0ke3JlZ2lvbn0mbWFudWZhY3R1cmVyPSR7ZW5jb2RlVVJJQ29tcG9uZW50KG1hbnVmYWN0dXJlcil9JnBhZ2U9JHtwYWdlfSZsaW1pdD0ke2xpbWl0fWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGNvbnN0IGFpcmNyYWZ0RGF0YSA9IGRhdGEuYWlyY3JhZnQgfHwgW107XHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gUHJvY2VzcyB0aGUgZmlsdGVyZWQgYWlyY3JhZnQgZGF0YVxyXG4gICAgICBpZiAoYWlyY3JhZnREYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBUcmFuc2Zvcm0gdG8gRXh0ZW5kZWRBaXJjcmFmdFxyXG4gICAgICAgIGludGVyZmFjZSBBaXJjcmFmdERhdGEge1xyXG4gICAgICAgICAgVFlQRV9BSVJDUkFGVD86IHN0cmluZztcclxuICAgICAgICAgIE9QRVJBVE9SPzogc3RyaW5nO1xyXG4gICAgICAgICAgUkVHSU9OOiBudW1iZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBleHRlbmRlZEFpcmNyYWZ0OiBFeHRlbmRlZEFpcmNyYWZ0W10gPSBhaXJjcmFmdERhdGEubWFwKFxyXG4gICAgICAgICAgKGFpcmNyYWZ0OiBBaXJjcmFmdERhdGEpID0+ICh7XHJcbiAgICAgICAgICAgIC4uLmFpcmNyYWZ0LFxyXG4gICAgICAgICAgICB0eXBlOiBhaXJjcmFmdC5UWVBFX0FJUkNSQUZUIHx8ICdVbmtub3duJyxcclxuICAgICAgICAgICAgaXNHb3Zlcm5tZW50OlxyXG4gICAgICAgICAgICAgIGFpcmNyYWZ0Lk9QRVJBVE9SPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdnb3Zlcm5tZW50JykgPz8gZmFsc2UsXHJcbiAgICAgICAgICAgIFJFR0lPTjogYWlyY3JhZnQuUkVHSU9OLFxyXG4gICAgICAgICAgICB6b29tTGV2ZWw6IHVuZGVmaW5lZCxcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBtYXBcclxuICAgICAgICB1cGRhdGVHZW9mZW5jZUFpcmNyYWZ0KGV4dGVuZGVkQWlyY3JhZnQpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgYE5vIGFpcmNyYWZ0IGZvdW5kIGZvciBtYW51ZmFjdHVyZXIgJHttYW51ZmFjdHVyZXJ9IGluIHJlZ2lvbiAke3JlZ2lvbn1gXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZmlsdGVyZWQgYWlyY3JhZnQ6JywgZXJyb3IpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9jYWxMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBNb2RlbCBzZWxlY3Rpb24gbWV0aG9kc1xyXG4gIGNvbnN0IGhhbmRsZU1vZGVsU2VsZWN0ID0gKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgIHNlbGVjdE1vZGVsKHZhbHVlID09PSAnJyA/IG51bGwgOiB2YWx1ZSk7XHJcbiAgICBzZXRBY3RpdmVEcm9wZG93bihudWxsKTtcclxuXHJcbiAgICAvLyBJZiBpbiBjb21iaW5lZCBtb2RlLCByZWFwcGx5IHRoZSBmaWx0ZXJcclxuICAgIGlmIChmaWx0ZXJNb2RlID09PSAnYm90aCcgJiYgaXNHZW9mZW5jZUFjdGl2ZSAmJiBzZWxlY3RlZE1hbnVmYWN0dXJlcikge1xyXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBhcHBseUNvbWJpbmVkRmlsdGVycygpO1xyXG4gICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vIENvbWJpbmVkIGZpbHRlciBtZXRob2RzXHJcbiAgY29uc3QgYXBwbHlDb21iaW5lZEZpbHRlcnMgPSAoKSA9PiB7XHJcbiAgICBpZiAoXHJcbiAgICAgICFzZWxlY3RlZE1hbnVmYWN0dXJlciB8fFxyXG4gICAgICAhaXNHZW9mZW5jZUFjdGl2ZSB8fFxyXG4gICAgICBnZW9mZW5jZUFpcmNyYWZ0Lmxlbmd0aCA9PT0gMFxyXG4gICAgKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzZXRMb2NhbExvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgYEZpbHRlcmluZyAke2dlb2ZlbmNlQWlyY3JhZnQubGVuZ3RofSBhaXJjcmFmdCBieSAke3NlbGVjdGVkTWFudWZhY3R1cmVyfWBcclxuICAgICAgKTtcclxuXHJcbiAgICAgIC8vIEZpbHRlciB0aGUgYWlyY3JhZnQgYnkgbWFudWZhY3R1cmVyXHJcbiAgICAgIGxldCBmaWx0ZXJlZEFpcmNyYWZ0ID0gZ2VvZmVuY2VBaXJjcmFmdC5maWx0ZXIoXHJcbiAgICAgICAgKGFpcmNyYWZ0KSA9PlxyXG4gICAgICAgICAgYWlyY3JhZnQuTUFOVUZBQ1RVUkVSPy50b0xvd2VyQ2FzZSgpID09PVxyXG4gICAgICAgICAgc2VsZWN0ZWRNYW51ZmFjdHVyZXIudG9Mb3dlckNhc2UoKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gRnVydGhlciBmaWx0ZXIgYnkgbW9kZWwgaWYgc2VsZWN0ZWRcclxuICAgICAgaWYgKHNlbGVjdGVkTW9kZWwpIHtcclxuICAgICAgICBmaWx0ZXJlZEFpcmNyYWZ0ID0gZmlsdGVyZWRBaXJjcmFmdC5maWx0ZXIoXHJcbiAgICAgICAgICAoYWlyY3JhZnQpID0+XHJcbiAgICAgICAgICAgIGFpcmNyYWZ0Lk1PREVMPy50b0xvd2VyQ2FzZSgpID09PSBzZWxlY3RlZE1vZGVsLnRvTG93ZXJDYXNlKClcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhgRm91bmQgJHtmaWx0ZXJlZEFpcmNyYWZ0Lmxlbmd0aH0gbWF0Y2hpbmcgYWlyY3JhZnRgKTtcclxuXHJcbiAgICAgIGlmIChmaWx0ZXJlZEFpcmNyYWZ0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGFsZXJ0KGBObyAke3NlbGVjdGVkTWFudWZhY3R1cmVyfSBhaXJjcmFmdCBmb3VuZCBpbiB0aGlzIGFyZWEuYCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBDbGVhciBkaXNwbGF5IGRhdGFcclxuICAgICAgaWYgKGNsZWFyR2VvZmVuY2VEYXRhKSB7XHJcbiAgICAgICAgY2xlYXJHZW9mZW5jZURhdGEoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5XHJcbiAgICAgIHVwZGF0ZUdlb2ZlbmNlQWlyY3JhZnQoZmlsdGVyZWRBaXJjcmFmdCk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmaWx0ZXJpbmcgYWlyY3JhZnQ6JywgZXJyb3IpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0TG9jYWxMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyBSZXNldCBhbGwgZmlsdGVyc1xyXG4gIGNvbnN0IGNsZWFyQWxsRmlsdGVycyA9ICgpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdDbGVhcmluZyBhbGwgZmlsdGVycy4uLicpO1xyXG5cclxuICAgIC8vIDEuIFJlc2V0IGZpbHRlciBtb2RlXHJcbiAgICBzZXRGaWx0ZXJNb2RlKCdtYW51ZmFjdHVyZXInKTtcclxuXHJcbiAgICAvLyAyLiBVbmJsb2NrIEFQSSBjYWxscyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiBibG9ja2VkXHJcbiAgICBvcGVuU2t5VHJhY2tpbmdTZXJ2aWNlLnNldEJsb2NrQWxsQXBpQ2FsbHMoZmFsc2UpO1xyXG4gICAgc2V0QmxvY2tNYW51ZmFjdHVyZXJBcGlDYWxscyhmYWxzZSk7XHJcbiAgICBzZXRJc01hbnVmYWN0dXJlckFwaUJsb2NrZWQoZmFsc2UpO1xyXG5cclxuICAgIC8vIDMuIENsZWFyIG1hbnVmYWN0dXJlciBzZWxlY3Rpb25cclxuICAgIHNlbGVjdE1hbnVmYWN0dXJlcihudWxsKTtcclxuICAgIHNlbGVjdE1vZGVsKG51bGwpO1xyXG5cclxuICAgIC8vIDQuIENsZWFyIGdlb2ZlbmNlXHJcbiAgICBzZXRHZW9mZW5jZUxvY2F0aW9uKCcnKTtcclxuICAgIHNldEdlb2ZlbmNlQ29vcmRpbmF0ZXMobnVsbCk7XHJcbiAgICBzZXRHZW9mZW5jZUFpcmNyYWZ0KFtdKTtcclxuICAgIHNldEdlb2ZlbmNlRW5hYmxlZChmYWxzZSk7XHJcbiAgICBzZXRJc0dlb2ZlbmNlQWN0aXZlKGZhbHNlKTtcclxuICAgIGlmICh0eXBlb2YgY2xlYXJHZW9mZW5jZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICBjbGVhckdlb2ZlbmNlKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNsZWFyR2VvZmVuY2VEYXRhID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIGNsZWFyR2VvZmVuY2VEYXRhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gNS4gUmVzZXQgb3duZXIgZmlsdGVycyB0byBzZWxlY3QgYWxsXHJcbiAgICBzZXRPd25lckZpbHRlcnMoWy4uLmFsbE93bmVyVHlwZXNdKTtcclxuXHJcbiAgICAvLyA2LiBDbGVhciByZWdpb24gZmlsdGVyIHByb3Blcmx5XHJcbiAgICBzZXRBY3RpdmVSZWdpb24obnVsbCk7XHJcbiAgICBzZXRTZWxlY3RlZFJlZ2lvbihSZWdpb25Db2RlLkdMT0JBTCk7XHJcblxyXG4gICAgLy8gQ2xlYXIgcmVnaW9uIG91dGxpbmUgZnJvbSBtYXBcclxuICAgIGlmIChyZWdpb25PdXRsaW5lKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCBwb3NzaWJsZSBvYmplY3Qgc3RydWN0dXJlc1xyXG4gICAgICAgIGlmICh0eXBlb2YgcmVnaW9uT3V0bGluZS5yZW1vdmUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHJlZ2lvbk91dGxpbmUucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgIHJlZ2lvbk91dGxpbmUucmVjdGFuZ2xlICYmXHJcbiAgICAgICAgICB0eXBlb2YgcmVnaW9uT3V0bGluZS5yZWN0YW5nbGUucmVtb3ZlID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICByZWdpb25PdXRsaW5lLnJlY3RhbmdsZS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENsZWFyIGFueSBsYWJlbHMgYXNzb2NpYXRlZCB3aXRoIHRoZSByZWdpb25cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICByZWdpb25PdXRsaW5lLmxhYmVsICYmXHJcbiAgICAgICAgICB0eXBlb2YgcmVnaW9uT3V0bGluZS5sYWJlbC5yZW1vdmUgPT09ICdmdW5jdGlvbidcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHJlZ2lvbk91dGxpbmUubGFiZWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbW92aW5nIHJlZ2lvbiBvdXRsaW5lOicsIGVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gQWx3YXlzIHJlc2V0IHRoZSByZWdpb24gb3V0bGluZSBzdGF0ZVxyXG4gICAgICBzZXRSZWdpb25PdXRsaW5lKG51bGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDcuIFJlc2V0IG1hcCB2aWV3IHRvIGdsb2JhbFxyXG4gICAgaWYgKG1hcEluc3RhbmNlKSB7XHJcbiAgICAgIC8vIFVzZSB0aGUgcHJlZGVmaW5lZCBjZW50ZXIgYW5kIHpvb20gbGV2ZWwgZnJvbSB5b3VyIG1hcCBjb25maWdcclxuICAgICAgbWFwSW5zdGFuY2Uuc2V0VmlldyhNQVBfQ09ORklHLkNFTlRFUiwgTUFQX0NPTkZJRy5ERUZBVUxUX1pPT00pO1xyXG4gICAgICBtYXBJbnN0YW5jZS5pbnZhbGlkYXRlU2l6ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDguIFJlc2V0IHRvIGluaXRpYWwgYWlyY3JhZnQgZGF0YVxyXG4gICAgaWYgKHR5cGVvZiByZXNldCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICByZXNldCgpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZnVsbFJlZnJlc2ggPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgZnVsbFJlZnJlc2goKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA5LiBDbG9zZSBhbnkgb3BlbiBkcm9wZG93blxyXG4gICAgc2V0QWN0aXZlRHJvcGRvd24obnVsbCk7XHJcblxyXG4gICAgLy8gMTAuIFJlc2V0IHJhdGUgbGltaXRpbmcgc3RhdGVzXHJcbiAgICBzZXRJc1JhdGVMaW1pdGVkKGZhbHNlKTtcclxuICAgIHNldFJhdGVMaW1pdFRpbWVyKG51bGwpO1xyXG5cclxuICAgIC8vIDExLiBDbGVhciBjb21iaW5lZCBtb2RlIHN0YXRlXHJcbiAgICBzZXRDb21iaW5lZE1vZGVSZWFkeShmYWxzZSk7XHJcblxyXG4gICAgLy8gMTIuIFJlc2V0IHNlYXJjaCB0ZXJtc1xyXG4gICAgc2V0TWFudWZhY3R1cmVyU2VhcmNoVGVybSgnJyk7XHJcblxyXG4gICAgLy8gMTMuIERpc3BhdGNoIGEgY3VzdG9tIGV2ZW50IHRoYXQgb3RoZXIgY29tcG9uZW50cyBjYW4gbGlzdGVuIGZvclxyXG4gICAgY29uc3QgY2xlYXJFdmVudCA9IG5ldyBDdXN0b21FdmVudCgncmliYm9uLWZpbHRlcnMtY2xlYXJlZCcpO1xyXG4gICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChjbGVhckV2ZW50KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnQWxsIGZpbHRlcnMgY2xlYXJlZCBzdWNjZXNzZnVsbHknKTtcclxuICB9O1xyXG5cclxuICAvLyBDYWxjdWxhdGUgY29tYmluZWQgbG9hZGluZyBzdGF0ZVxyXG4gIGNvbnN0IGNvbWJpbmVkTG9hZGluZyA9IGxvY2FsTG9hZGluZztcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8vIFN0YXRlXHJcbiAgICBmaWx0ZXJNb2RlLFxyXG4gICAgYWN0aXZlRHJvcGRvd24sXHJcbiAgICBzZWxlY3RlZE1hbnVmYWN0dXJlcixcclxuICAgIHNlbGVjdGVkTW9kZWwsXHJcbiAgICBnZW9mZW5jZUxvY2F0aW9uLFxyXG4gICAgZ2VvZmVuY2VSYWRpdXMsXHJcbiAgICBpc0dlb2ZlbmNlQWN0aXZlLFxyXG4gICAgZ2VvZmVuY2VDb29yZGluYXRlcyxcclxuICAgIGFjdGl2ZVJlZ2lvbixcclxuICAgIG93bmVyRmlsdGVycyxcclxuICAgIGFsbE93bmVyVHlwZXMsXHJcbiAgICBtYW51ZmFjdHVyZXJTZWFyY2hUZXJtLFxyXG4gICAgY29tYmluZWRMb2FkaW5nLFxyXG4gICAgaXNHZXR0aW5nTG9jYXRpb24sXHJcbiAgICBkcm9wZG93blJlZnMsXHJcbiAgICBsb2NhbExvYWRpbmcsXHJcbiAgICBpc1JhdGVMaW1pdGVkLFxyXG4gICAgc2VsZWN0ZWRSZWdpb24sXHJcbiAgICBpc1JlZnJlc2hpbmcsXHJcbiAgICBpc0dlb2ZlbmNlUGxhY2VtZW50TW9kZTogZmFsc2UsIC8vIEluaXRpYWxpemUgd2l0aCBhIGRlZmF1bHQgdmFsdWVcclxuXHJcbiAgICAvLyBNZXRob2RzXHJcbiAgICB0b2dnbGVEcm9wZG93bixcclxuICAgIHRvZ2dsZUZpbHRlck1vZGUsXHJcbiAgICBzZWxlY3RNYW51ZmFjdHVyZXJBbmRDbG9zZSxcclxuICAgIGhhbmRsZU1vZGVsU2VsZWN0LFxyXG4gICAgZ2V0VXNlckxvY2F0aW9uLFxyXG4gICAgcHJvY2Vzc0dlb2ZlbmNlU2VhcmNoLFxyXG4gICAgaGFuZGxlT3duZXJGaWx0ZXJDaGFuZ2UsXHJcbiAgICBoYW5kbGVSZWdpb25TZWxlY3QsXHJcbiAgICBzZXRNYW51ZmFjdHVyZXJTZWFyY2hUZXJtLFxyXG4gICAgc2V0R2VvZmVuY2VMb2NhdGlvbixcclxuICAgIHNldEdlb2ZlbmNlUmFkaXVzLFxyXG4gICAgdG9nZ2xlR2VvZmVuY2VTdGF0ZSxcclxuICAgIGNsZWFyQWxsRmlsdGVycyxcclxuICAgIGFwcGx5Q29tYmluZWRGaWx0ZXJzLFxyXG4gICAgZ2V0QWlyY3JhZnRPd25lclR5cGUsXHJcblxyXG4gICAgcmVmcmVzaFdpdGhGaWx0ZXJzOiAoKSA9PiB7XHJcbiAgICAgIC8vIEltcGxlbWVudCByZWZyZXNoIGxvZ2ljIGhlcmVcclxuICAgICAgaWYgKHR5cGVvZiByZWZyZXNoUG9zaXRpb25zID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcmVmcmVzaFBvc2l0aW9ucygpLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVmcmVzaGluZyBwb3NpdGlvbnM6JywgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2V0QWN0aXZlRHJvcGRvd24sIC8vIEFkZCB0aGlzIGxpbmUgaWYgeW91IGhhdmUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIHNldEdlb2ZlbmNlQ29vcmRpbmF0ZXMsXHJcbiAgICBzZXRHZW9mZW5jZUNlbnRlcixcclxuICAgIHVwZGF0ZUdlb2ZlbmNlQWlyY3JhZnQsXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VFZmZlY3QiLCJSZWFjdCIsIlJlZ2lvbkNvZGUiLCJ1c2VFbmhhbmNlZE1hcENvbnRleHQiLCJvcGVuU2t5VHJhY2tpbmdTZXJ2aWNlIiwiZ2V0QWlyY3JhZnROZWFyTG9jYXRpb24iLCJzZWFyY2hMb2NhdGlvbldpdGhNYXBib3giLCJnZXRBaXJjcmFmdE5lYXJTZWFyY2hlZExvY2F0aW9uIiwiZ2V0TG9jYXRpb25OYW1lRnJvbUNvb3JkaW5hdGVzIiwiYWRhcHRHZW9mZW5jZUFpcmNyYWZ0IiwiZW5yaWNoR2VvZmVuY2VBaXJjcmFmdCIsInVzZUdlb2xvY2F0aW9uIiwiTUFQX0NPTkZJRyIsImdldEJvdW5kc0J5UmVnaW9uIiwiZ2V0Wm9vbUxldmVsRm9yUmVnaW9uIiwidXNlRmlsdGVyTG9naWMiLCJzZWxlY3RlZE1hbnVmYWN0dXJlciIsInNlbGVjdGVkTW9kZWwiLCJ0b3RhbEFjdGl2ZSIsInNlbGVjdE1hbnVmYWN0dXJlciIsInNlbGVjdE1vZGVsIiwicmVzZXQiLCJmdWxsUmVmcmVzaCIsInJlZnJlc2hQb3NpdGlvbnMiLCJtYXBJbnN0YW5jZSIsInVwZGF0ZUFpcmNyYWZ0RGF0YSIsImNsZWFyR2VvZmVuY2VEYXRhIiwidXBkYXRlR2VvZmVuY2VBaXJjcmFmdCIsImJsb2NrTWFudWZhY3R1cmVyQXBpQ2FsbHMiLCJzZXRCbG9ja01hbnVmYWN0dXJlckFwaUNhbGxzIiwiaXNNYW51ZmFjdHVyZXJBcGlCbG9ja2VkIiwic2V0SXNNYW51ZmFjdHVyZXJBcGlCbG9ja2VkIiwiZ2VvZmVuY2VDZW50ZXIiLCJzZXRHZW9mZW5jZUNlbnRlciIsInRvZ2dsZUdlb2ZlbmNlIiwiY2xlYXJHZW9mZW5jZSIsImRpc3BsYXllZEFpcmNyYWZ0IiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwibG9jYWxMb2FkaW5nIiwic2V0TG9jYWxMb2FkaW5nIiwiZmlsdGVyTW9kZSIsInNldEZpbHRlck1vZGUiLCJhY3RpdmVEcm9wZG93biIsInNldEFjdGl2ZURyb3Bkb3duIiwibWFudWZhY3R1cmVyU2VhcmNoVGVybSIsInNldE1hbnVmYWN0dXJlclNlYXJjaFRlcm0iLCJpc1JlZnJlc2hpbmciLCJzZXRJc1JlZnJlc2hpbmciLCJpc1JhdGVMaW1pdGVkIiwic2V0SXNSYXRlTGltaXRlZCIsInJhdGVMaW1pdFRpbWVyIiwic2V0UmF0ZUxpbWl0VGltZXIiLCJpc0dldHRpbmdMb2NhdGlvbiIsInNldElzR2V0dGluZ0xvY2F0aW9uIiwiZ2VvZmVuY2VMb2NhdGlvbiIsInNldEdlb2ZlbmNlTG9jYXRpb24iLCJnZW9mZW5jZVJhZGl1cyIsInNldEdlb2ZlbmNlUmFkaXVzIiwiZ2VvZmVuY2VDb29yZGluYXRlcyIsInNldEdlb2ZlbmNlQ29vcmRpbmF0ZXMiLCJnZW9mZW5jZUFpcmNyYWZ0Iiwic2V0R2VvZmVuY2VBaXJjcmFmdCIsImdlb2ZlbmNlRW5hYmxlZCIsInNldEdlb2ZlbmNlRW5hYmxlZCIsImlzR2VvZmVuY2VBY3RpdmUiLCJzZXRJc0dlb2ZlbmNlQWN0aXZlIiwiaXNTZWFyY2hSZWFkeSIsInNldElzU2VhcmNoUmVhZHkiLCJhY3RpdmVSZWdpb24iLCJzZXRBY3RpdmVSZWdpb24iLCJyZWdpb25PdXRsaW5lIiwic2V0UmVnaW9uT3V0bGluZSIsInNlbGVjdGVkUmVnaW9uIiwic2V0U2VsZWN0ZWRSZWdpb24iLCJHTE9CQUwiLCJjb21iaW5lZE1vZGVSZWFkeSIsInNldENvbWJpbmVkTW9kZVJlYWR5IiwiYWxsT3duZXJUeXBlcyIsIm93bmVyRmlsdGVycyIsInNldE93bmVyRmlsdGVycyIsImRyb3Bkb3duUmVmcyIsImZpbHRlciIsIm1hbnVmYWN0dXJlciIsIm1vZGVsIiwibG9jYXRpb24iLCJyZWdpb24iLCJvd25lciIsImFjdGlvbnMiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwibG9nIiwiY2xlYXJUaW1lb3V0IiwiaGFuZGxlQ2xpY2tPdXRzaWRlIiwiZXZlbnQiLCJpc091dHNpZGVBbGwiLCJPYmplY3QiLCJ2YWx1ZXMiLCJldmVyeSIsInJlZiIsImN1cnJlbnQiLCJjb250YWlucyIsInRhcmdldCIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmUiLCJoYW5kbGVNYXBHZW9mZW5jZUNsaWNrIiwiY3VzdG9tRXZlbnQiLCJsYXQiLCJsbmciLCJkZXRhaWwiLCJ0b0ZpeGVkIiwibG9jYXRpb25OYW1lIiwiZXJyb3IiLCJ0b2dnbGVEcm9wZG93biIsImRyb3Bkb3duIiwic3RvcFByb3BhZ2F0aW9uIiwiaGFuZGxlUmF0ZUxpbWl0IiwicmV0cnlBZnRlciIsInNldEJsb2NrQWxsQXBpQ2FsbHMiLCJhbGVydCIsInRvZ2dsZUZpbHRlck1vZGUiLCJtb2RlIiwibGVuZ3RoIiwiZmlsdGVyQWlyY3JhZnRCeVJlZ2lvbiIsInRvU3RyaW5nIiwiYWlyY3JhZnRXaXRoVmFsaWRDb29yZHMiLCJwbGFuZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaXNOYU4iLCJmaWx0ZXJlZEJ5T3duZXIiLCJhaXJjcmFmdCIsImluY2x1ZGVzIiwiZ2V0QWlyY3JhZnRPd25lclR5cGUiLCJhcHBseUNvbWJpbmVkRmlsdGVycyIsIm93bmVyVHlwZSIsIlRZUEVfUkVHSVNUUkFOVCIsIm93bmVyVHlwZVRvU3RyaW5nIiwidHlwZSIsInR5cGVOdW0iLCJwYXJzZUludCIsIm93bmVyVHlwZU1hcCIsImFwcGx5T3duZXJUeXBlRmlsdGVyIiwiZmlsdGVycyIsImZpbHRlcmVkQWlyY3JhZnQiLCJoYW5kbGVPd25lckZpbHRlckNoYW5nZSIsInVwZGF0ZWRGaWx0ZXJzIiwicmVzZXRPd25lckZpbHRlcnMiLCJib3VuZHNFeHByZXNzaW9uIiwiQXJyYXkiLCJpc0FycmF5IiwibWluTGF0IiwibWluTG5nIiwibWF4TGF0IiwibWF4TG5nIiwiaGFuZGxlUmVnaW9uU2VsZWN0IiwiYm91bmRzIiwiem9vbUxldmVsIiwic2V0Wm9vbSIsIm9wdGlvbnMiLCJwYWRkaW5nIiwiUEFERElORyIsIkRFRkFVTFQiLCJmaXRCb3VuZHMiLCJpbnZhbGlkYXRlU2l6ZSIsImRyYXdSZWdpb25PdXRsaW5lIiwiY291bnRSZXNwb25zZSIsImZldGNoIiwib2siLCJjb3VudERhdGEiLCJqc29uIiwiY291bnQiLCJMIiwicmVxdWlyZSIsInJlY3RhbmdsZSIsImNvbG9yIiwid2VpZ2h0Iiwib3BhY2l0eSIsImZpbGwiLCJmaWxsQ29sb3IiLCJmaWxsT3BhY2l0eSIsImRhc2hBcnJheSIsImludGVyYWN0aXZlIiwiYWRkVG8iLCJnZXRVc2VyTG9jYXRpb24iLCJwb3NpdGlvbiIsImNvb3JkcyIsImZldGNoZWRBaXJjcmFmdCIsImFkYXB0ZWRBaXJjcmFmdCIsImVucmljaGVkQWlyY3JhZnQiLCJjdXJyZW50Wm9vbSIsImdldFpvb20iLCJ0YXJnZXRab29tIiwic2V0VmlldyIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJwcm9jZXNzR2VvZmVuY2VTZWFyY2giLCJsb2NhdGlvbnMiLCJjb29yZGluYXRlcyIsIm5hbWUiLCJFcnJvciIsIk1BTlVGQUNUVVJFUiIsInVuZGVmaW5lZCIsInRvZ2dsZUdlb2ZlbmNlU3RhdGUiLCJlbmFibGVkIiwid2FybiIsInNlbGVjdE1hbnVmYWN0dXJlckFuZENsb3NlIiwidmFsdWUiLCJmZXRjaEFpcmNyYWZ0QnlSZWdpb25BbmRNYW51ZmFjdHVyZXIiLCJmZXRjaE1hbnVmYWN0dXJlckRhdGEiLCJjYXRjaCIsInBhZ2UiLCJsaW1pdCIsInJlc3BvbnNlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiZGF0YSIsImFpcmNyYWZ0RGF0YSIsInN0YXR1c1RleHQiLCJleHRlbmRlZEFpcmNyYWZ0IiwibWFwIiwiVFlQRV9BSVJDUkFGVCIsImlzR292ZXJubWVudCIsIk9QRVJBVE9SIiwidG9Mb3dlckNhc2UiLCJSRUdJT04iLCJoYW5kbGVNb2RlbFNlbGVjdCIsIk1PREVMIiwiY2xlYXJBbGxGaWx0ZXJzIiwibGFiZWwiLCJDRU5URVIiLCJERUZBVUxUX1pPT00iLCJjbGVhckV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwiY29tYmluZWRMb2FkaW5nIiwiaXNHZW9mZW5jZVBsYWNlbWVudE1vZGUiLCJyZWZyZXNoV2l0aEZpbHRlcnMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./components/tracking/hooks/useFilterLogic.ts\n"));

/***/ })

});